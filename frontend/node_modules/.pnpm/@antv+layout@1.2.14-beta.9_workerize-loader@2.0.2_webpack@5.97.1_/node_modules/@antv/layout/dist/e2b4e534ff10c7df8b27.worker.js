(()=>{var t={5439:(t,e,r)=>{t.exports={graphlib:r(1943),layout:r(5499),debug:r(5856),util:{time:r(345).time,notime:r(345).notime},version:r(3404)}},5205:(t,e,r)=>{"use strict";var n=r(2692),o=r(824);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],r={},o={};return n.forEach(t.nodes(),(function i(s){n.has(o,s)||(o[s]=!0,r[s]=!0,n.forEach(t.outEdges(s),(function(t){n.has(r,t.w)?e.push(t):i(t.w)})),delete r[s])})),e}(t);n.forEach(e,(function(e){var r=t.edge(e);t.removeEdge(e),r.forwardName=e.name,r.reversed=!0,t.setEdge(e.w,e.v,r,n.uniqueId("rev"))}))},undo:function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}}))}}},1555:(t,e,r)=>{var n=r(2692),o=r(345);function i(t,e,r,n,i,s){var a={width:0,height:0,rank:s,borderType:e},u=i[e][s-1],d=o.addDummyNode(t,"border",a,r);i[e][s]=d,t.setParent(d,n),u&&t.setEdge(u,d,{weight:1})}t.exports=function(t){n.forEach(t.children(),(function e(r){var o=t.children(r),s=t.node(r);if(o.length&&n.forEach(o,e),n.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,u=s.maxRank+1;a<u;++a)i(t,"borderLeft","_bl",r,s,a),i(t,"borderRight","_br",r,s,a)}}))}},4688:(t,e,r)=>{"use strict";var n=r(2692);function o(t){n.forEach(t.nodes(),(function(e){i(t.node(e))})),n.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){n.forEach(t.nodes(),(function(e){s(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.forEach(r.points,s),n.has(r,"y")&&s(r)}))}(t),"lr"!==e&&"rl"!==e||(function(t){n.forEach(t.nodes(),(function(e){a(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.forEach(r.points,a),n.has(r,"x")&&a(r)}))}(t),o(t))}}},2278:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function n(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,n)),r=r._prev;return"["+t.join(", ")+"]"}},5856:(t,e,r)=>{var n=r(2692),o=r(345),i=r(1943).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),r=new i({compound:!0,multigraph:!0}).setGraph({});return n.forEach(t.nodes(),(function(e){r.setNode(e,{label:e}),r.setParent(e,"layer"+t.node(e).rank)})),n.forEach(t.edges(),(function(t){r.setEdge(t.v,t.w,{},t.name)})),n.forEach(e,(function(t,e){var o="layer"+e;r.setNode(o,{rank:"same"}),n.reduce(t,(function(t,e){return r.setEdge(t,e,{style:"invis"}),e}))})),r}}},1943:(t,e,r)=>{var n;try{n=r(6960)}catch(t){}n||(n=window.graphlib),t.exports=n},824:(t,e,r)=>{var n=r(2692),o=r(1943).Graph,i=r(2278);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var r=function(t,e){var r=new o,s=0,a=0;n.forEach(t.nodes(),(function(t){r.setNode(t,{v:t,in:0,out:0})})),n.forEach(t.edges(),(function(t){var n=r.edge(t.v,t.w)||0,o=e(t),i=n+o;r.setEdge(t.v,t.w,i),a=Math.max(a,r.node(t.v).out+=o),s=Math.max(s,r.node(t.w).in+=o)}));var d=n.range(a+s+3).map((function(){return new i})),h=s+1;return n.forEach(r.nodes(),(function(t){u(d,h,r.node(t))})),{graph:r,buckets:d,zeroIdx:h}}(t,e||s),d=function(t,e,r){for(var n,o=[],i=e[e.length-1],s=e[0];t.nodeCount();){for(;n=s.dequeue();)a(t,e,r,n);for(;n=i.dequeue();)a(t,e,r,n);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(n=e[u].dequeue()){o=o.concat(a(t,e,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(d,(function(e){return t.outEdges(e.v,e.w)})),!0)};var s=n.constant(1);function a(t,e,r,o,i){var s=i?[]:void 0;return n.forEach(t.inEdges(o.v),(function(n){var o=t.edge(n),a=t.node(n.v);i&&s.push({v:n.v,w:n.w}),a.out-=o,u(e,r,a)})),n.forEach(t.outEdges(o.v),(function(n){var o=t.edge(n),i=n.w,s=t.node(i);s.in-=o,u(e,r,s)})),t.removeNode(o.v),s}function u(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}},5499:(t,e,r)=>{"use strict";var n=r(2692),o=r(5205),i=r(4125),s=r(8264),a=r(345).normalizeRanks,u=r(2555),d=r(345).removeEmptyRanks,h=r(838),c=r(1555),l=r(4688),f=r(6571),g=r(9533),p=r(345),v=r(1943).Graph;t.exports=function(t,e){var r=e&&e.debugTiming?p.time:p.notime;r("layout",(function(){var e=r("  buildLayoutGraph",(function(){return function(t){var e=new v({multigraph:!0,compound:!0}),r=k(t.graph());return e.setGraph(n.merge({},m,M(r,y),n.pick(r,w))),n.forEach(t.nodes(),(function(r){var o=k(t.node(r));e.setNode(r,n.defaults(M(o,x),b)),e.setParent(r,t.parent(r))})),n.forEach(t.edges(),(function(r){var o=k(t.edge(r));e.setEdge(r,n.merge({},N,M(o,E),n.pick(o,_)))})),e}(t)}));r("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,n.forEach(t.edges(),(function(r){var n=t.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){n.forEach(t.edges(),(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){h.run(t)})),e("    rank",(function(){s(p.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),o={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e};p.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){d(t)})),e("    nestingGraph.cleanup",(function(){h.cleanup(t)})),e("    normalizeRanks",(function(){a(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;n.forEach(t.nodes(),(function(r){var o=t.node(r);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=n.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){n.forEach(t.nodes(),(function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){u(t)})),e("    addBorderSegments",(function(){c(t)})),e("    order",(function(){f(t)})),e("    insertSelfEdges",(function(){!function(t){var e=p.buildLayerMatrix(t);n.forEach(e,(function(e){var r=0;n.forEach(e,(function(e,o){var i=t.node(e);i.order=o+r,n.forEach(i.selfEdges,(function(e){p.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++r,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){l.adjust(t)})),e("    position",(function(){g(t)})),e("    positionSelfEdges",(function(){!function(t){n.forEach(t.nodes(),(function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),o=n.x+n.width/2,i=n.y,s=r.x-o,a=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:o+2*s/3,y:i-a},{x:o+5*s/6,y:i-a},{x:o+s,y:i},{x:o+5*s/6,y:i+a},{x:o+2*s/3,y:i+a}],r.label.x=r.x,r.label.y=r.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){n.forEach(t.nodes(),(function(e){if(t.children(e).length){var r=t.node(e),o=t.node(r.borderTop),i=t.node(r.borderBottom),s=t.node(n.last(r.borderLeft)),a=t.node(n.last(r.borderRight));r.width=Math.abs(a.x-s.x),r.height=Math.abs(i.y-o.y),r.x=s.x+r.width/2,r.y=o.y+r.height/2}})),n.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(n.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){l.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,r=0,o=Number.POSITIVE_INFINITY,i=0,s=t.graph(),a=s.marginx||0,u=s.marginy||0;function d(t){var n=t.x,s=t.y,a=t.width,u=t.height;e=Math.min(e,n-a/2),r=Math.max(r,n+a/2),o=Math.min(o,s-u/2),i=Math.max(i,s+u/2)}n.forEach(t.nodes(),(function(e){d(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.has(r,"x")&&d(r)})),e-=a,o-=u,n.forEach(t.nodes(),(function(r){var n=t.node(r);n.x-=e,n.y-=o})),n.forEach(t.edges(),(function(r){var i=t.edge(r);n.forEach(i.points,(function(t){t.x-=e,t.y-=o})),n.has(i,"x")&&(i.x-=e),n.has(i,"y")&&(i.y-=o)})),s.width=r-e+a,s.height=i-o+u}(t)})),e("    assignNodeIntersects",(function(){!function(t){n.forEach(t.edges(),(function(e){var r,n,o=t.edge(e),i=t.node(e.v),s=t.node(e.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=s,n=i),o.points.unshift(p.intersectRect(i,r)),o.points.push(p.intersectRect(s,n))}))}(t)})),e("    reversePoints",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);r.reversed&&r.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,r)})),r("  updateInputGraph",(function(){!function(t,e){n.forEach(t.nodes(),(function(r){var n=t.node(r),o=e.node(r);n&&(n.x=o.x,n.y=o.y,e.children(r).length&&(n.width=o.width,n.height=o.height))})),n.forEach(t.edges(),(function(r){var o=t.edge(r),i=e.edge(r);o.points=i.points,n.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],x=["width","height"],b={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],N={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function M(t,e){return n.mapValues(n.pick(t,e),Number)}function k(t){var e={};return n.forEach(t,(function(t,r){e[r.toLowerCase()]=t})),e}},2692:(t,e,r)=>{var n;try{n={cloneDeep:r(7179),constant:r(9203),defaults:r(3821),each:r(678),filter:r(4663),find:r(6969),flatten:r(2923),forEach:r(7734),forIn:r(7514),has:r(5346),isUndefined:r(6474),last:r(7875),map:r(9107),mapValues:r(1230),max:r(6492),merge:r(8469),min:r(5071),minBy:r(6838),now:r(231),pick:r(9335),range:r(8569),reduce:r(7682),sortBy:r(1635),uniqueId:r(1422),values:r(1682),zipObject:r(4142)}}catch(t){}n||(n=window._),t.exports=n},838:(t,e,r)=>{var n=r(2692),o=r(345);function i(t,e,r,s,a,u,d){var h=t.children(d);if(h.length){var c=o.addBorderNode(t,"_bt"),l=o.addBorderNode(t,"_bb"),f=t.node(d);t.setParent(c,d),f.borderTop=c,t.setParent(l,d),f.borderBottom=l,n.forEach(h,(function(n){i(t,e,r,s,a,u,n);var o=t.node(n),h=o.borderTop?o.borderTop:n,f=o.borderBottom?o.borderBottom:n,g=o.borderTop?s:2*s,p=h!==f?1:a-u[d]+1;t.setEdge(c,h,{weight:g,minlen:p,nestingEdge:!0}),t.setEdge(f,l,{weight:g,minlen:p,nestingEdge:!0})})),t.parent(d)||t.setEdge(e,c,{weight:0,minlen:a+u[d]})}else d!==e&&t.setEdge(e,d,{weight:0,minlen:r})}t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),r=function(t){var e={};function r(o,i){var s=t.children(o);s&&s.length&&n.forEach(s,(function(t){r(t,i+1)})),e[o]=i}return n.forEach(t.children(),(function(t){r(t,1)})),e}(t),s=n.max(n.values(r))-1,a=2*s+1;t.graph().nestingRoot=e,n.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return n.reduce(t.edges(),(function(e,r){return e+t.edge(r).weight}),0)}(t)+1;n.forEach(t.children(),(function(n){i(t,e,a,u,s,r,n)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,n.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},4125:(t,e,r)=>{"use strict";var n=r(2692),o=r(345);t.exports={run:function(t){t.graph().dummyChains=[],n.forEach(t.edges(),(function(e){!function(t,e){var r,n,i,s=e.v,a=t.node(s).rank,u=e.w,d=t.node(u).rank,h=e.name,c=t.edge(e),l=c.labelRank;if(d!==a+1){for(t.removeEdge(e),i=0,++a;a<d;++i,++a)c.points=[],n={width:0,height:0,edgeLabel:c,edgeObj:e,rank:a},r=o.addDummyNode(t,"edge",n,"_d"),a===l&&(n.width=c.width,n.height=c.height,n.dummy="edge-label",n.labelpos=c.labelpos),t.setEdge(s,r,{weight:c.weight},h),0===i&&t.graph().dummyChains.push(r),s=r;t.setEdge(s,u,{weight:c.weight},h)}}(t,e)}))},undo:function(t){n.forEach(t.graph().dummyChains,(function(e){var r,n=t.node(e),o=n.edgeLabel;for(t.setEdge(n.edgeObj,o);n.dummy;)r=t.successors(e)[0],t.removeNode(e),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),e=r,n=t.node(e)}))}}},4333:(t,e,r)=>{var n=r(2692);t.exports=function(t,e,r){var o,i={};n.forEach(r,(function(r){for(var n,s,a=t.parent(r);a;){if((n=t.parent(a))?(s=i[n],i[n]=a):(s=o,o=a),s&&s!==a)return void e.setEdge(s,a);a=n}}))}},5374:(t,e,r)=>{var n=r(2692);t.exports=function(t,e){return n.map(e,(function(e){var r=t.inEdges(e);if(r.length){var o=n.reduce(r,(function(e,r){var n=t.edge(r),o=t.node(r.v);return{sum:e.sum+n.weight*o.order,weight:e.weight+n.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},3037:(t,e,r)=>{var n=r(2692),o=r(1943).Graph;t.exports=function(t,e,r){var i=function(t){for(var e;t.hasNode(e=n.uniqueId("_root")););return e}(t),s=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return n.forEach(t.nodes(),(function(o){var a=t.node(o),u=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(o),s.setParent(o,u||i),n.forEach(t[r](o),(function(e){var r=e.v===o?e.w:e.v,i=s.edge(r,o),a=n.isUndefined(i)?0:i.weight;s.setEdge(r,o,{weight:t.edge(e).weight+a})})),n.has(a,"minRank")&&s.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))})),s}},9420:(t,e,r)=>{"use strict";var n=r(2692);function o(t,e,r){for(var o=n.zipObject(r,n.map(r,(function(t,e){return e}))),i=n.flatten(n.map(e,(function(e){return n.sortBy(n.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),s=1;s<r.length;)s<<=1;var a=2*s-1;s-=1;var u=n.map(new Array(a),(function(){return 0})),d=0;return n.forEach(i.forEach((function(t){var e=t.pos+s;u[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=u[e+1]),u[e=e-1>>1]+=t.weight;d+=t.weight*r}))),d}t.exports=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=o(t,e[n-1],e[n]);return r}},6571:(t,e,r)=>{"use strict";var n=r(2692),o=r(1001),i=r(9420),s=r(7407),a=r(3037),u=r(4333),d=r(1943).Graph,h=r(345);function c(t,e,r){return n.map(e,(function(e){return a(t,e,r)}))}function l(t,e){var r=new d;n.forEach(t,(function(t){var o=t.graph().root,i=s(t,o,r,e);n.forEach(i.vs,(function(e,r){t.node(e).order=r})),u(t,r,i.vs)}))}function f(t,e){n.forEach(e,(function(e){n.forEach(e,(function(e,r){t.node(e).order=r}))}))}t.exports=function(t){var e=h.maxRank(t),r=c(t,n.range(1,e+1),"inEdges"),s=c(t,n.range(e-1,-1,-1),"outEdges"),a=o(t);f(t,a);for(var u,d=Number.POSITIVE_INFINITY,g=0,p=0;p<4;++g,++p){l(g%2?r:s,g%4>=2),a=h.buildLayerMatrix(t);var v=i(t,a);v<d&&(p=0,u=n.cloneDeep(a),d=v)}f(t,u)}},1001:(t,e,r)=>{"use strict";var n=r(2692);t.exports=function(t){var e={},r=n.filter(t.nodes(),(function(e){return!t.children(e).length})),o=n.max(n.map(r,(function(e){return t.node(e).rank}))),i=n.map(n.range(o+1),(function(){return[]})),s=n.sortBy(r,(function(e){return t.node(e).rank}));return n.forEach(s,(function r(o){if(!n.has(e,o)){e[o]=!0;var s=t.node(o);i[s.rank].push(o),n.forEach(t.successors(o),r)}})),i}},8522:(t,e,r)=>{"use strict";var n=r(2692);t.exports=function(t,e){var r={};return n.forEach(t,(function(t,e){var o=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};n.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),n.forEach(e.edges(),(function(t){var e=r[t.v],o=r[t.w];n.isUndefined(e)||n.isUndefined(o)||(o.indegree++,e.out.push(r[t.w]))})),function(t){var e=[];function r(t){return function(e){var r,o,i,s;e.merged||(n.isUndefined(e.barycenter)||n.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(o=e,i=0,s=0,(r=t).weight&&(i+=r.barycenter*r.weight,s+=r.weight),o.weight&&(i+=o.barycenter*o.weight,s+=o.weight),r.vs=o.vs.concat(r.vs),r.barycenter=i/s,r.weight=s,r.i=Math.min(o.i,r.i),o.merged=!0)}}function o(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}for(;t.length;){var i=t.pop();e.push(i),n.forEach(i.in.reverse(),r(i)),n.forEach(i.out,o(i))}return n.map(n.filter(e,(function(t){return!t.merged})),(function(t){return n.pick(t,["vs","i","barycenter","weight"])}))}(n.filter(r,(function(t){return!t.indegree})))}},7407:(t,e,r)=>{var n=r(2692),o=r(5374),i=r(8522),s=r(2711);t.exports=function t(e,r,a,u){var d=e.children(r),h=e.node(r),c=h?h.borderLeft:void 0,l=h?h.borderRight:void 0,f={};c&&(d=n.filter(d,(function(t){return t!==c&&t!==l})));var g=o(e,d);n.forEach(g,(function(r){if(e.children(r.v).length){var o=t(e,r.v,a,u);f[r.v]=o,n.has(o,"barycenter")&&(i=r,s=o,n.isUndefined(i.barycenter)?(i.barycenter=s.barycenter,i.weight=s.weight):(i.barycenter=(i.barycenter*i.weight+s.barycenter*s.weight)/(i.weight+s.weight),i.weight+=s.weight))}var i,s}));var p=i(g,a);!function(t,e){n.forEach(t,(function(t){t.vs=n.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(p,f);var v=s(p,u);if(c&&(v.vs=n.flatten([c,v.vs,l],!0),e.predecessors(c).length)){var y=e.node(e.predecessors(c)[0]),m=e.node(e.predecessors(l)[0]);n.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+m.order)/(v.weight+2),v.weight+=2}return v}},2711:(t,e,r)=>{var n=r(2692),o=r(345);function i(t,e,r){for(var o;e.length&&(o=n.last(e)).i<=r;)e.pop(),t.push(o.vs),r++;return r}t.exports=function(t,e){var r,s=o.partition(t,(function(t){return n.has(t,"barycenter")})),a=s.lhs,u=n.sortBy(s.rhs,(function(t){return-t.i})),d=[],h=0,c=0,l=0;a.sort((r=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:r?e.i-t.i:t.i-e.i})),l=i(d,u,l),n.forEach(a,(function(t){l+=t.vs.length,d.push(t.vs),h+=t.barycenter*t.weight,c+=t.weight,l=i(d,u,l)}));var f={vs:n.flatten(d,!0)};return c&&(f.barycenter=h/c,f.weight=c),f}},2555:(t,e,r)=>{var n=r(2692);t.exports=function(t){var e=function(t){var e={},r=0;return n.forEach(t.children(),(function o(i){var s=r;n.forEach(t.children(i),o),e[i]={low:s,lim:r++}})),e}(t);n.forEach(t.graph().dummyChains,(function(r){for(var n=t.node(r),o=n.edgeObj,i=function(t,e,r,n){var o,i,s=[],a=[],u=Math.min(e[r].low,e[n].low),d=Math.max(e[r].lim,e[n].lim);o=r;do{o=t.parent(o),s.push(o)}while(o&&(e[o].low>u||d>e[o].lim));for(i=o,o=n;(o=t.parent(o))!==i;)a.push(o);return{path:s.concat(a.reverse()),lca:i}}(t,e,o.v,o.w),s=i.path,a=i.lca,u=0,d=s[u],h=!0;r!==o.w;){if(n=t.node(r),h){for(;(d=s[u])!==a&&t.node(d).maxRank<n.rank;)u++;d===a&&(h=!1)}if(!h){for(;u<s.length-1&&t.node(d=s[u+1]).minRank<=n.rank;)u++;d=s[u]}t.setParent(r,d),r=t.successors(r)[0]}}))}},7828:(t,e,r)=>{"use strict";var n=r(2692),o=r(1943).Graph,i=r(345);function s(t,e){var r={};return n.reduce(e,(function(e,o){var i=0,s=0,a=e.length,d=n.last(o);return n.forEach(o,(function(e,h){var c=function(t,e){if(t.node(e).dummy)return n.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),l=c?t.node(c).order:a;(c||e===d)&&(n.forEach(o.slice(s,h+1),(function(e){n.forEach(t.predecessors(e),(function(n){var o=t.node(n),s=o.order;!(s<i||l<s)||o.dummy&&t.node(e).dummy||u(r,n,e)}))})),s=h+1,i=l)})),o})),r}function a(t,e){var r={};function o(e,o,i,s,a){var d;n.forEach(n.range(o,i),(function(o){d=e[o],t.node(d).dummy&&n.forEach(t.predecessors(d),(function(e){var n=t.node(e);n.dummy&&(n.order<s||n.order>a)&&u(r,e,d)}))}))}return n.reduce(e,(function(e,r){var i,s=-1,a=0;return n.forEach(r,(function(n,u){if("border"===t.node(n).dummy){var d=t.predecessors(n);d.length&&(i=t.node(d[0]).order,o(r,a,u,s,i),a=u,s=i)}o(r,a,r.length,i,e.length)})),r})),r}function u(t,e,r){if(e>r){var n=e;e=r,r=n}var o=t[e];o||(t[e]=o={}),o[r]=!0}function d(t,e,r){if(e>r){var o=e;e=r,r=o}return n.has(t[e],r)}function h(t,e,r,o){var i={},s={},a={};return n.forEach(e,(function(t){n.forEach(t,(function(t,e){i[t]=t,s[t]=t,a[t]=e}))})),n.forEach(e,(function(t){var e=-1;n.forEach(t,(function(t){var u=o(t);if(u.length){u=n.sortBy(u,(function(t){return a[t]}));for(var h=(u.length-1)/2,c=Math.floor(h),l=Math.ceil(h);c<=l;++c){var f=u[c];s[t]===t&&e<a[f]&&!d(r,t,f)&&(s[f]=t,s[t]=i[t]=i[f],e=a[f])}}}))})),{root:i,align:s}}function c(t,e,r,i,s){var a={},u=function(t,e,r,i){var s=new o,a=t.graph(),u=function(t,e,r){return function(o,i,s){var a,u=o.node(i),d=o.node(s),h=0;if(h+=u.width/2,n.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(h+=r?a:-a),a=0,h+=(u.dummy?e:t)/2,h+=(d.dummy?e:t)/2,h+=d.width/2,n.has(d,"labelpos"))switch(d.labelpos.toLowerCase()){case"l":a=d.width/2;break;case"r":a=-d.width/2}return a&&(h+=r?a:-a),a=0,h}}(a.nodesep,a.edgesep,i);return n.forEach(e,(function(e){var o;n.forEach(e,(function(e){var n=r[e];if(s.setNode(n),o){var i=r[o],a=s.edge(i,n);s.setEdge(i,n,Math.max(u(t,e,o),a||0))}o=e}))})),s}(t,e,r,s),d=s?"borderLeft":"borderRight";function h(t,e){for(var r=u.nodes(),n=r.pop(),o={};n;)o[n]?t(n):(o[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()}return h((function(t){a[t]=u.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+u.edge(e))}),0)}),u.predecessors.bind(u)),h((function(e){var r=u.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-u.edge(e))}),Number.POSITIVE_INFINITY),n=t.node(e);r!==Number.POSITIVE_INFINITY&&n.borderType!==d&&(a[e]=Math.max(a[e],r))}),u.successors.bind(u)),n.forEach(i,(function(t){a[t]=a[r[t]]})),a}function l(t,e){return n.minBy(n.values(e),(function(e){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return n.forIn(e,(function(e,n){var i=function(t,e){return t.node(e).width}(t,n)/2;r=Math.max(e+i,r),o=Math.min(e-i,o)})),r-o}))}function f(t,e){var r=n.values(e),o=n.min(r),i=n.max(r);n.forEach(["u","d"],(function(r){n.forEach(["l","r"],(function(s){var a,u=r+s,d=t[u];if(d!==e){var h=n.values(d);(a="l"===s?o-n.min(h):i-n.max(h))&&(t[u]=n.mapValues(d,(function(t){return t+a})))}}))}))}function g(t,e){return n.mapValues(t.ul,(function(r,o){if(e)return t[e.toLowerCase()][o];var i=n.sortBy(n.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,r=i.buildLayerMatrix(t),o=n.merge(s(t,r),a(t,r)),u={};n.forEach(["u","d"],(function(i){e="u"===i?r:n.values(r).reverse(),n.forEach(["l","r"],(function(r){"r"===r&&(e=n.map(e,(function(t){return n.values(t).reverse()})));var s=("u"===i?t.predecessors:t.successors).bind(t),a=h(0,e,o,s),d=c(t,e,a.root,a.align,"r"===r);"r"===r&&(d=n.mapValues(d,(function(t){return-t}))),u[i+r]=d}))}));var d=l(t,u);return f(u,d),g(u,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:u,hasConflict:d,verticalAlignment:h,horizontalCompaction:c,alignCoordinates:f,findSmallestWidthAlignment:l,balance:g}},9533:(t,e,r)=>{"use strict";var n=r(2692),o=r(345),i=r(7828).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),r=t.graph().ranksep,i=0;n.forEach(e,(function(e){var o=n.max(n.map(e,(function(e){return t.node(e).height})));n.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+r}))})(t=o.asNonCompoundGraph(t)),n.forEach(i(t),(function(e,r){t.node(r).x=e}))}},6771:(t,e,r)=>{"use strict";var n=r(2692),o=r(1943).Graph,i=r(3834).slack;function s(t,e){return n.forEach(t.nodes(),(function r(o){n.forEach(e.nodeEdges(o),(function(n){var s=n.v,a=o===s?n.w:s;t.hasNode(a)||i(e,n)||(t.setNode(a,{}),t.setEdge(o,a,{}),r(a))}))})),t.nodeCount()}function a(t,e){return n.minBy(e.edges(),(function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return i(e,r)}))}function u(t,e,r){n.forEach(t.nodes(),(function(t){e.node(t).rank+=r}))}t.exports=function(t){var e,r,n=new o({directed:!1}),d=t.nodes()[0],h=t.nodeCount();for(n.setNode(d,{});s(n,t)<h;)e=a(n,t),r=n.hasNode(e.v)?i(t,e):-i(t,e),u(n,t,r);return n}},8264:(t,e,r)=>{"use strict";var n=r(3834).longestPath,o=r(6771),i=r(3284);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){i(t)}(t);break;case"tight-tree":!function(t){n(t),o(t)}(t);break;case"longest-path":s(t)}};var s=n},3284:(t,e,r)=>{"use strict";var n=r(2692),o=r(6771),i=r(3834).slack,s=r(3834).longestPath,a=r(1943).alg.preorder,u=r(1943).alg.postorder,d=r(345).simplify;function h(t){t=d(t),s(t);var e,r=o(t);for(f(r),c(r,t);e=p(r);)y(r,t,e,v(r,t,e))}function c(t,e){var r=u(t,t.nodes());r=r.slice(0,r.length-1),n.forEach(r,(function(r){!function(t,e,r){var n=t.node(r).parent;t.edge(r,n).cutvalue=l(t,e,r)}(t,e,r)}))}function l(t,e,r){var o=t.node(r).parent,i=!0,s=e.edge(r,o),a=0;return s||(i=!1,s=e.edge(o,r)),a=s.weight,n.forEach(e.nodeEdges(r),(function(n){var s,u,d=n.v===r,h=d?n.w:n.v;if(h!==o){var c=d===i,l=e.edge(n).weight;if(a+=c?l:-l,s=r,u=h,t.hasEdge(s,u)){var f=t.edge(r,h).cutvalue;a+=c?-f:f}}})),a}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),g(t,{},1,e)}function g(t,e,r,o,i){var s=r,a=t.node(o);return e[o]=!0,n.forEach(t.neighbors(o),(function(i){n.has(e,i)||(r=g(t,e,r,i,o))})),a.low=s,a.lim=r++,i?a.parent=i:delete a.parent,r}function p(t){return n.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function v(t,e,r){var o=r.v,s=r.w;e.hasEdge(o,s)||(o=r.w,s=r.v);var a=t.node(o),u=t.node(s),d=a,h=!1;a.lim>u.lim&&(d=u,h=!0);var c=n.filter(e.edges(),(function(e){return h===m(0,t.node(e.v),d)&&h!==m(0,t.node(e.w),d)}));return n.minBy(c,(function(t){return i(e,t)}))}function y(t,e,r,o){var i=r.v,s=r.w;t.removeEdge(i,s),t.setEdge(o.v,o.w,{}),f(t),c(t,e),function(t,e){var r=n.find(t.nodes(),(function(t){return!e.node(t).parent})),o=a(t,r);o=o.slice(1),n.forEach(o,(function(r){var n=t.node(r).parent,o=e.edge(r,n),i=!1;o||(o=e.edge(n,r),i=!0),e.node(r).rank=e.node(n).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function m(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}t.exports=h,h.initLowLimValues=f,h.initCutValues=c,h.calcCutValue=l,h.leaveEdge=p,h.enterEdge=v,h.exchangeEdges=y},3834:(t,e,r)=>{"use strict";var n=r(2692);t.exports={longestPath:function(t){var e={};n.forEach(t.sources(),(function r(o){var i=t.node(o);if(n.has(e,o))return i.rank;e[o]=!0;var s=n.min(n.map(t.outEdges(o),(function(e){return r(e.w)-t.edge(e).minlen})));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),i.rank=s}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},345:(t,e,r)=>{"use strict";var n=r(2692),o=r(1943).Graph;function i(t,e,r,o){var i;do{i=n.uniqueId(o)}while(t.hasNode(i));return r.dummy=e,t.setNode(i,r),i}function s(t){return n.max(n.map(t.nodes(),(function(e){var r=t.node(e).rank;if(!n.isUndefined(r))return r})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return n.forEach(t.nodes(),(function(r){e.setNode(r,t.node(r))})),n.forEach(t.edges(),(function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},o=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return n.forEach(t.nodes(),(function(r){t.children(r).length||e.setNode(r,t.node(r))})),n.forEach(t.edges(),(function(r){e.setEdge(r,t.edge(r))})),e},successorWeights:function(t){var e=n.map(t.nodes(),(function(e){var r={};return n.forEach(t.outEdges(e),(function(e){r[e.w]=(r[e.w]||0)+t.edge(e).weight})),r}));return n.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=n.map(t.nodes(),(function(e){var r={};return n.forEach(t.inEdges(e),(function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return n.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,o=t.x,i=t.y,s=e.x-o,a=e.y-i,u=t.width/2,d=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*u>Math.abs(s)*d?(a<0&&(d=-d),r=d*s/a,n=d):(s<0&&(u=-u),r=u,n=u*a/s),{x:o+r,y:i+n}},buildLayerMatrix:function(t){var e=n.map(n.range(s(t)+1),(function(){return[]}));return n.forEach(t.nodes(),(function(r){var o=t.node(r),i=o.rank;n.isUndefined(i)||(e[i][o.order]=r)})),e},normalizeRanks:function(t){var e=n.min(n.map(t.nodes(),(function(e){return t.node(e).rank})));n.forEach(t.nodes(),(function(r){var o=t.node(r);n.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=n.min(n.map(t.nodes(),(function(e){return t.node(e).rank}))),r=[];n.forEach(t.nodes(),(function(n){var o=t.node(n).rank-e;r[o]||(r[o]=[]),r[o].push(n)}));var o=0,i=t.graph().nodeRankFactor;n.forEach(r,(function(e,r){n.isUndefined(e)&&r%i!=0?--o:o&&n.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,r,n){var o={width:0,height:0};return arguments.length>=4&&(o.rank=r,o.order=n),i(t,"border",o,e)},maxRank:s,partition:function(t,e){var r={lhs:[],rhs:[]};return n.forEach(t,(function(t){e(t)?r.lhs.push(t):r.rhs.push(t)})),r},time:function(t,e){var r=n.now();try{return e()}finally{console.log(t+" time: "+(n.now()-r)+"ms")}},notime:function(t,e){return e()}}},3404:t=>{t.exports="0.8.5"},6960:(t,e,r)=>{var n=r(3150);t.exports={Graph:n.Graph,json:r(1430),alg:r(9757),version:n.version}},9535:(t,e,r)=>{var n=r(4434);t.exports=function(t){var e,r={},o=[];function i(o){n.has(r,o)||(r[o]=!0,e.push(o),n.each(t.successors(o),i),n.each(t.predecessors(o),i))}return n.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},7819:(t,e,r)=>{var n=r(4434);function o(t,e,r,i,s,a){n.has(i,e)||(i[e]=!0,r||a.push(e),n.each(s(e),(function(e){o(t,e,r,i,s,a)})),r&&a.push(e))}t.exports=function(t,e,r){n.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return n.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);o(t,e,"post"===r,a,i,s)})),s}},1353:(t,e,r)=>{var n=r(4245),o=r(4434);t.exports=function(t,e,r){return o.transform(t.nodes(),(function(o,i){o[i]=n(t,i,e,r)}),{})}},4245:(t,e,r)=>{var n=r(4434),o=r(1011);t.exports=function(t,e,r,n){return function(t,e,r,n){var i,s,a={},u=new o,d=function(t){var e=t.v!==i?t.v:t.w,n=a[e],o=r(t),d=s.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);d<n.distance&&(n.distance=d,n.predecessor=i,u.decrease(e,d))};for(t.nodes().forEach((function(t){var r=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:r},u.add(t,r)}));u.size()>0&&(i=u.removeMin(),(s=a[i]).distance!==Number.POSITIVE_INFINITY);)n(i).forEach(d);return a}(t,String(e),r||i,n||function(e){return t.outEdges(e)})};var i=n.constant(1)},937:(t,e,r)=>{var n=r(4434),o=r(9177);t.exports=function(t){return n.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},86:(t,e,r)=>{var n=r(4434);t.exports=function(t,e,r){return function(t,e,r){var n={},o=t.nodes();return o.forEach((function(t){n[t]={},n[t][t]={distance:0},o.forEach((function(e){t!==e&&(n[t][e]={distance:Number.POSITIVE_INFINITY})})),r(t).forEach((function(r){var o=r.v===t?r.w:r.v,i=e(r);n[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=n[t];o.forEach((function(r){var i=n[r];o.forEach((function(r){var n=i[t],o=e[r],s=i[r],a=n.distance+o.distance;a<s.distance&&(s.distance=a,s.predecessor=o.predecessor)}))}))})),n}(t,e||o,r||function(e){return t.outEdges(e)})};var o=n.constant(1)},9757:(t,e,r)=>{t.exports={components:r(9535),dijkstra:r(4245),dijkstraAll:r(1353),findCycles:r(937),floydWarshall:r(86),isAcyclic:r(7772),postorder:r(8494),preorder:r(101),prim:r(3816),tarjan:r(9177),topsort:r(750)}},7772:(t,e,r)=>{var n=r(750);t.exports=function(t){try{n(t)}catch(t){if(t instanceof n.CycleException)return!1;throw t}return!0}},8494:(t,e,r)=>{var n=r(7819);t.exports=function(t,e){return n(t,e,"post")}},101:(t,e,r)=>{var n=r(7819);t.exports=function(t,e){return n(t,e,"pre")}},3816:(t,e,r)=>{var n=r(4434),o=r(9955),i=r(1011);t.exports=function(t,e){var r,s=new o,a={},u=new i;function d(t){var n=t.v===r?t.w:t.v,o=u.priority(n);if(void 0!==o){var i=e(t);i<o&&(a[n]=r,u.decrease(n,i))}}if(0===t.nodeCount())return s;n.each(t.nodes(),(function(t){u.add(t,Number.POSITIVE_INFINITY),s.setNode(t)})),u.decrease(t.nodes()[0],0);for(var h=!1;u.size()>0;){if(r=u.removeMin(),n.has(a,r))s.setEdge(r,a[r]);else{if(h)throw new Error("Input graph is not connected: "+t);h=!0}t.nodeEdges(r).forEach(d)}return s}},9177:(t,e,r)=>{var n=r(4434);t.exports=function(t){var e=0,r=[],o={},i=[];function s(a){var u=o[a]={onStack:!0,lowlink:e,index:e++};if(r.push(a),t.successors(a).forEach((function(t){n.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(s(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))})),u.lowlink===u.index){var d,h=[];do{d=r.pop(),o[d].onStack=!1,h.push(d)}while(a!==d);i.push(h)}}return t.nodes().forEach((function(t){n.has(o,t)||s(t)})),i}},750:(t,e,r)=>{var n=r(4434);function o(t){var e={},r={},o=[];if(n.each(t.sinks(),(function s(a){if(n.has(r,a))throw new i;n.has(e,a)||(r[a]=!0,e[a]=!0,n.each(t.predecessors(a),s),delete r[a],o.push(a))})),n.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},1011:(t,e,r)=>{var n=r(4434);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return n.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!n.has(r,t)){var o=this._arr,i=o.length;return r[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},o.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,o=t;r<e.length&&(o=e[r].priority<e[o].priority?r:o,n<e.length&&(o=e[n].priority<e[o].priority?n:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;0!==t&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,o=r[t],i=r[e];r[t]=i,r[e]=o,n[i.key]=t,n[o.key]=e}},9955:(t,e,r)=>{"use strict";var n=r(4434);t.exports=i;var o="\0";function i(t){this._isDirected=!n.has(t,"directed")||t.directed,this._isMultigraph=!!n.has(t,"multigraph")&&t.multigraph,this._isCompound=!!n.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function u(t,e,r,o){var i=""+e,s=""+r;if(!t&&i>s){var a=i;i=s,s=a}return i+""+s+""+(n.isUndefined(o)?"\0":o)}function d(t,e){return u(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return n.isFunction(t)||(t=n.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return n.keys(this._nodes)},i.prototype.sources=function(){var t=this;return n.filter(this.nodes(),(function(e){return n.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return n.filter(this.nodes(),(function(e){return n.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var r=arguments,o=this;return n.each(t,(function(t){r.length>1?o.setNode(t,e):o.setNode(t)})),this},i.prototype.setNode=function(t,e){return n.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=o,this._children[t]={},this._children[o][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return n.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(n.has(this._nodes,t)){var r=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],n.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),n.each(n.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],n.each(n.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n.isUndefined(e))e=o;else{for(var r=e+="";!n.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==o)return e}},i.prototype.children=function(t){if(n.isUndefined(t)&&(t=o),this._isCompound){var e=this._children[t];if(e)return n.keys(e)}else{if(t===o)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return n.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return n.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return n.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;n.each(this._nodes,(function(r,n){t(n)&&e.setNode(n,r)})),n.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))}));var o={};function i(t){var n=r.parent(t);return void 0===n||e.hasNode(n)?(o[t]=n,n):n in o?o[n]:i(n)}return this._isCompound&&n.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return n.isFunction(t)||(t=n.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return n.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var r=this,o=arguments;return n.reduce(t,(function(t,n){return o.length>1?r.setEdge(t,n,e):r.setEdge(t,n),n})),this},i.prototype.setEdge=function(){var t,e,r,o,i=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,r=a.name,2===arguments.length&&(o=arguments[1],i=!0)):(t=a,e=arguments[1],r=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),t=""+t,e=""+e,n.isUndefined(r)||(r=""+r);var d=u(this._isDirected,t,e,r);if(n.has(this._edgeLabels,d))return i&&(this._edgeLabels[d]=o),this;if(!n.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[d]=i?o:this._defaultEdgeLabelFn(t,e,r);var h=function(t,e,r,n){var o=""+e,i=""+r;if(!t&&o>i){var s=o;o=i,i=s}var a={v:o,w:i};return n&&(a.name=n),a}(this._isDirected,t,e,r);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[d]=h,s(this._preds[e],t),s(this._sucs[t],e),this._in[e][d]=h,this._out[t][d]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,r){var n=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,r);return this._edgeLabels[n]},i.prototype.hasEdge=function(t,e,r){var o=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,r);return n.has(this._edgeLabels,o)},i.prototype.removeEdge=function(t,e,r){var n=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,r),o=this._edgeObjs[n];return o&&(t=o.v,e=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var o=n.values(r);return e?n.filter(o,(function(t){return t.v===e})):o}},i.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var o=n.values(r);return e?n.filter(o,(function(t){return t.w===e})):o}},i.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}},3150:(t,e,r)=>{t.exports={Graph:r(9955),version:r(9127)}},1430:(t,e,r)=>{var n=r(4434),o=r(9955);function i(t){return n.map(t.nodes(),(function(e){var r=t.node(e),o=t.parent(e),i={v:e};return n.isUndefined(r)||(i.value=r),n.isUndefined(o)||(i.parent=o),i}))}function s(t){return n.map(t.edges(),(function(e){var r=t.edge(e),o={v:e.v,w:e.w};return n.isUndefined(e.name)||(o.name=e.name),n.isUndefined(r)||(o.value=r),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:s(t)};return n.isUndefined(t.graph())||(e.value=n.clone(t.graph())),e},read:function(t){var e=new o(t.options).setGraph(t.value);return n.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),n.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},4434:(t,e,r)=>{var n;try{n={clone:r(7953),constant:r(9203),each:r(678),filter:r(4663),has:r(5346),isArray:r(5589),isEmpty:r(9787),isFunction:r(5563),isUndefined:r(6474),keys:r(2096),map:r(9107),reduce:r(7682),size:r(1039),transform:r(3604),union:r(7767),values:r(1682)}}catch(t){}n||(n=window._),t.exports=n},9127:t=>{t.exports="2.1.8"},4466:(t,e,r)=>{var n=r(5234)(r(3250),"DataView");t.exports=n},5208:(t,e,r)=>{var n=r(4440),o=r(4108),i=r(1085),s=r(7706),a=r(8636);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},1998:(t,e,r)=>{var n=r(266),o=r(2875),i=r(5828),s=r(4115),a=r(7690);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},2887:(t,e,r)=>{var n=r(5234)(r(3250),"Map");t.exports=n},5678:(t,e,r)=>{var n=r(9016),o=r(2363),i=r(4348),s=r(3062),a=r(262);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},5747:(t,e,r)=>{var n=r(5234)(r(3250),"Promise");t.exports=n},6616:(t,e,r)=>{var n=r(5234)(r(3250),"Set");t.exports=n},4546:(t,e,r)=>{var n=r(5678),o=r(3937),i=r(5009);function s(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,t.exports=s},9549:(t,e,r)=>{var n=r(1998),o=r(3210),i=r(8603),s=r(8947),a=r(885),u=r(8938);function d(t){var e=this.__data__=new n(t);this.size=e.size}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=s,d.prototype.has=a,d.prototype.set=u,t.exports=d},861:(t,e,r)=>{var n=r(3250).Symbol;t.exports=n},3526:(t,e,r)=>{var n=r(3250).Uint8Array;t.exports=n},8001:(t,e,r)=>{var n=r(5234)(r(3250),"WeakMap");t.exports=n},2274:t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},4004:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},2493:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i}},5436:(t,e,r)=>{var n=r(4365);t.exports=function(t,e){return!(null==t||!t.length)&&n(t,e,0)>-1}},9105:t=>{t.exports=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}},5825:(t,e,r)=>{var n=r(8509),o=r(9312),i=r(5589),s=r(5778),a=r(5023),u=r(922),d=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),h=!r&&o(t),c=!r&&!h&&s(t),l=!r&&!h&&!c&&u(t),f=r||h||c||l,g=f?n(t.length,String):[],p=g.length;for(var v in t)!e&&!d.call(t,v)||f&&("length"==v||c&&("offset"==v||"parent"==v)||l&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,p))||g.push(v);return g}},9233:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},111:t=>{t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},5115:t=>{t.exports=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}},1831:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},7088:(t,e,r)=>{var n=r(6174)("length");t.exports=n},3532:(t,e,r)=>{var n=r(7500),o=r(8260);t.exports=function(t,e,r){(void 0!==r&&!o(t[e],r)||void 0===r&&!(e in t))&&n(t,e,r)}},3192:(t,e,r)=>{var n=r(7500),o=r(8260),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var s=t[e];i.call(t,e)&&o(s,r)&&(void 0!==r||e in t)||n(t,e,r)}},8498:(t,e,r)=>{var n=r(8260);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},4265:(t,e,r)=>{var n=r(8618),o=r(2096);t.exports=function(t,e){return t&&n(e,o(e),t)}},1629:(t,e,r)=>{var n=r(8618),o=r(9882);t.exports=function(t,e){return t&&n(e,o(e),t)}},7500:(t,e,r)=>{var n=r(5595);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},8361:(t,e,r)=>{var n=r(9549),o=r(4004),i=r(3192),s=r(4265),a=r(1629),u=r(6502),d=r(2166),h=r(7272),c=r(2066),l=r(4357),f=r(5713),g=r(7493),p=r(2865),v=r(1908),y=r(4046),m=r(5589),w=r(5778),x=r(7613),b=r(3702),E=r(693),N=r(2096),_=r(9882),M="[object Arguments]",k="[object Function]",A="[object Object]",j={};j[M]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object DataView]"]=j["[object Boolean]"]=j["[object Date]"]=j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Map]"]=j["[object Number]"]=j[A]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object Symbol]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Error]"]=j[k]=j["[object WeakMap]"]=!1,t.exports=function t(e,r,O,S,z,R){var I,P=1&r,C=2&r,D=4&r;if(O&&(I=z?O(e,S,z,R):O(e)),void 0!==I)return I;if(!b(e))return e;var T=m(e);if(T){if(I=p(e),!P)return d(e,I)}else{var L=g(e),F=L==k||"[object GeneratorFunction]"==L;if(w(e))return u(e,P);if(L==A||L==M||F&&!z){if(I=C||F?{}:y(e),!P)return C?c(e,a(I,e)):h(e,s(I,e))}else{if(!j[L])return z?e:{};I=v(e,L,P)}}R||(R=new n);var q=R.get(e);if(q)return q;R.set(e,I),E(e)?e.forEach((function(n){I.add(t(n,r,O,n,e,R))})):x(e)&&e.forEach((function(n,o){I.set(o,t(n,r,O,o,e,R))}));var V=T?void 0:(D?C?f:l:C?_:N)(e);return o(V||e,(function(n,o){V&&(n=e[o=n]),i(I,o,t(n,r,O,o,e,R))})),I}},7890:(t,e,r)=>{var n=r(3702),o=Object.create,i=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},1701:(t,e,r)=>{var n=r(4003),o=r(6313)(n);t.exports=o},5117:(t,e,r)=>{var n=r(2624);t.exports=function(t,e,r){for(var o=-1,i=t.length;++o<i;){var s=t[o],a=e(s);if(null!=a&&(void 0===u?a==a&&!n(a):r(a,u)))var u=a,d=s}return d}},8146:(t,e,r)=>{var n=r(1701);t.exports=function(t,e){var r=[];return n(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}},4770:t=>{t.exports=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},6640:(t,e,r)=>{var n=r(111),o=r(7123);t.exports=function t(e,r,i,s,a){var u=-1,d=e.length;for(i||(i=o),a||(a=[]);++u<d;){var h=e[u];r>0&&i(h)?r>1?t(h,r-1,i,s,a):n(a,h):s||(a[a.length]=h)}return a}},9943:(t,e,r)=>{var n=r(2545)();t.exports=n},4003:(t,e,r)=>{var n=r(9943),o=r(2096);t.exports=function(t,e){return t&&n(t,e,o)}},548:(t,e,r)=>{var n=r(4007),o=r(6040);t.exports=function(t,e){for(var r=0,i=(e=n(e,t)).length;null!=t&&r<i;)t=t[o(e[r++])];return r&&r==i?t:void 0}},4468:(t,e,r)=>{var n=r(111),o=r(5589);t.exports=function(t,e,r){var i=e(t);return o(t)?i:n(i,r(t))}},9823:(t,e,r)=>{var n=r(861),o=r(1339),i=r(5151),s=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?o(t):i(t)}},1669:t=>{t.exports=function(t,e){return t>e}},2586:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,r){return null!=t&&e.call(t,r)}},2902:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},4365:(t,e,r)=>{var n=r(4770),o=r(6963),i=r(5898);t.exports=function(t,e,r){return e==e?i(t,e,r):n(t,o,r)}},3016:(t,e,r)=>{var n=r(9823),o=r(440);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},4662:(t,e,r)=>{var n=r(8968),o=r(440);t.exports=function t(e,r,i,s,a){return e===r||(null==e||null==r||!o(e)&&!o(r)?e!=e&&r!=r:n(e,r,i,s,t,a))}},8968:(t,e,r)=>{var n=r(9549),o=r(4952),i=r(1080),s=r(6524),a=r(7493),u=r(5589),d=r(5778),h=r(922),c="[object Arguments]",l="[object Array]",f="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,p,v,y){var m=u(t),w=u(e),x=m?l:a(t),b=w?l:a(e),E=(x=x==c?f:x)==f,N=(b=b==c?f:b)==f,_=x==b;if(_&&d(t)){if(!d(e))return!1;m=!0,E=!1}if(_&&!E)return y||(y=new n),m||h(t)?o(t,e,r,p,v,y):i(t,e,x,r,p,v,y);if(!(1&r)){var M=E&&g.call(t,"__wrapped__"),k=N&&g.call(e,"__wrapped__");if(M||k){var A=M?t.value():t,j=k?e.value():e;return y||(y=new n),v(A,j,r,p,y)}}return!!_&&(y||(y=new n),s(t,e,r,p,v,y))}},2275:(t,e,r)=>{var n=r(7493),o=r(440);t.exports=function(t){return o(t)&&"[object Map]"==n(t)}},2972:(t,e,r)=>{var n=r(9549),o=r(4662);t.exports=function(t,e,r,i){var s=r.length,a=s,u=!i;if(null==t)return!a;for(t=Object(t);s--;){var d=r[s];if(u&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++s<a;){var h=(d=r[s])[0],c=t[h],l=d[1];if(u&&d[2]){if(void 0===c&&!(h in t))return!1}else{var f=new n;if(i)var g=i(c,l,h,t,e,f);if(!(void 0===g?o(l,c,3,i,f):g))return!1}}return!0}},6963:t=>{t.exports=function(t){return t!=t}},9817:(t,e,r)=>{var n=r(5563),o=r(8597),i=r(3702),s=r(5784),a=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,h=u.toString,c=d.hasOwnProperty,l=RegExp("^"+h.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?l:a).test(s(t))}},7170:(t,e,r)=>{var n=r(7493),o=r(440);t.exports=function(t){return o(t)&&"[object Set]"==n(t)}},2448:(t,e,r)=>{var n=r(9823),o=r(6052),i=r(440),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!s[n(t)]}},5833:(t,e,r)=>{var n=r(5640),o=r(9906),i=r(229),s=r(5589),a=r(4437);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?s(t)?o(t[0],t[1]):n(t):a(t)}},1351:(t,e,r)=>{var n=r(2840),o=r(2825),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},1309:(t,e,r)=>{var n=r(3702),o=r(2840),i=r(4866),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=o(t),r=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&r.push(a);return r}},6718:t=>{t.exports=function(t,e){return t<e}},8068:(t,e,r)=>{var n=r(1701),o=r(568);t.exports=function(t,e){var r=-1,i=o(t)?Array(t.length):[];return n(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}},5640:(t,e,r)=>{var n=r(2972),o=r(2198),i=r(4656);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},9906:(t,e,r)=>{var n=r(4662),o=r(3546),i=r(6708),s=r(5130),a=r(8802),u=r(4656),d=r(6040);t.exports=function(t,e){return s(t)&&a(e)?u(d(t),e):function(r){var s=o(r,t);return void 0===s&&s===e?i(r,t):n(e,s,3)}}},2133:(t,e,r)=>{var n=r(9549),o=r(3532),i=r(9943),s=r(1241),a=r(3702),u=r(9882),d=r(1933);t.exports=function t(e,r,h,c,l){e!==r&&i(r,(function(i,u){if(l||(l=new n),a(i))s(e,r,u,h,t,c,l);else{var f=c?c(d(e,u),i,u+"",e,r,l):void 0;void 0===f&&(f=i),o(e,u,f)}}),u)}},1241:(t,e,r)=>{var n=r(3532),o=r(6502),i=r(1327),s=r(2166),a=r(4046),u=r(9312),d=r(5589),h=r(8268),c=r(5778),l=r(5563),f=r(3702),g=r(4256),p=r(922),v=r(1933),y=r(6222);t.exports=function(t,e,r,m,w,x,b){var E=v(t,r),N=v(e,r),_=b.get(N);if(_)n(t,r,_);else{var M=x?x(E,N,r+"",t,e,b):void 0,k=void 0===M;if(k){var A=d(N),j=!A&&c(N),O=!A&&!j&&p(N);M=N,A||j||O?d(E)?M=E:h(E)?M=s(E):j?(k=!1,M=o(N,!0)):O?(k=!1,M=i(N,!0)):M=[]:g(N)||u(N)?(M=E,u(E)?M=y(E):f(E)&&!l(E)||(M=a(N))):k=!1}k&&(b.set(N,M),w(M,N,m,x,b),b.delete(N)),n(t,r,M)}}},3980:(t,e,r)=>{var n=r(9233),o=r(548),i=r(5833),s=r(8068),a=r(3340),u=r(1525),d=r(315),h=r(229),c=r(5589);t.exports=function(t,e,r){e=e.length?n(e,(function(t){return c(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[h];var l=-1;e=n(e,u(i));var f=s(t,(function(t,r,o){return{criteria:n(e,(function(e){return e(t)})),index:++l,value:t}}));return a(f,(function(t,e){return d(t,e,r)}))}},1785:(t,e,r)=>{var n=r(7121),o=r(6708);t.exports=function(t,e){return n(t,e,(function(e,r){return o(t,r)}))}},7121:(t,e,r)=>{var n=r(548),o=r(2619),i=r(4007);t.exports=function(t,e,r){for(var s=-1,a=e.length,u={};++s<a;){var d=e[s],h=n(t,d);r(h,d)&&o(u,i(d,t),h)}return u}},6174:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},3293:(t,e,r)=>{var n=r(548);t.exports=function(t){return function(e){return n(e,t)}}},4930:t=>{var e=Math.ceil,r=Math.max;t.exports=function(t,n,o,i){for(var s=-1,a=r(e((n-t)/(o||1)),0),u=Array(a);a--;)u[i?a:++s]=t,t+=o;return u}},4306:t=>{t.exports=function(t,e,r,n,o){return o(t,(function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)})),r}},9735:(t,e,r)=>{var n=r(229),o=r(340),i=r(4173);t.exports=function(t,e){return i(o(t,e,n),t+"")}},2619:(t,e,r)=>{var n=r(3192),o=r(4007),i=r(5023),s=r(3702),a=r(6040);t.exports=function(t,e,r,u){if(!s(t))return t;for(var d=-1,h=(e=o(e,t)).length,c=h-1,l=t;null!=l&&++d<h;){var f=a(e[d]),g=r;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(d!=c){var p=l[f];void 0===(g=u?u(p,f,l):void 0)&&(g=s(p)?p:i(e[d+1])?[]:{})}n(l,f,g),l=l[f]}return t}},6739:(t,e,r)=>{var n=r(9203),o=r(5595),i=r(229),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;t.exports=s},3340:t=>{t.exports=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}},8509:t=>{t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},6245:(t,e,r)=>{var n=r(861),o=r(9233),i=r(5589),s=r(2624),a=n?n.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(s(e))return u?u.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},1656:(t,e,r)=>{var n=r(2438),o=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(o,""):t}},1525:t=>{t.exports=function(t){return function(e){return t(e)}}},135:(t,e,r)=>{var n=r(4546),o=r(5436),i=r(9105),s=r(7026),a=r(6262),u=r(7969);t.exports=function(t,e,r){var d=-1,h=o,c=t.length,l=!0,f=[],g=f;if(r)l=!1,h=i;else if(c>=200){var p=e?null:a(t);if(p)return u(p);l=!1,h=s,g=new n}else g=e?[]:f;t:for(;++d<c;){var v=t[d],y=e?e(v):v;if(v=r||0!==v?v:0,l&&y==y){for(var m=g.length;m--;)if(g[m]===y)continue t;e&&g.push(y),f.push(v)}else h(g,y,r)||(g!==f&&g.push(y),f.push(v))}return f}},71:(t,e,r)=>{var n=r(9233);t.exports=function(t,e){return n(e,(function(e){return t[e]}))}},6302:t=>{t.exports=function(t,e,r){for(var n=-1,o=t.length,i=e.length,s={};++n<o;){var a=n<i?e[n]:void 0;r(s,t[n],a)}return s}},7026:t=>{t.exports=function(t,e){return t.has(e)}},4781:(t,e,r)=>{var n=r(229);t.exports=function(t){return"function"==typeof t?t:n}},4007:(t,e,r)=>{var n=r(5589),o=r(5130),i=r(4041),s=r(9835);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:i(s(t))}},2962:(t,e,r)=>{var n=r(3526);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},6502:(t,e,r)=>{t=r.nmd(t);var n=r(3250),o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,s=i&&i.exports===o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}},7037:(t,e,r)=>{var n=r(2962);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},3429:t=>{var e=/\w*$/;t.exports=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}},9349:(t,e,r)=>{var n=r(861),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},1327:(t,e,r)=>{var n=r(2962);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},8899:(t,e,r)=>{var n=r(2624);t.exports=function(t,e){if(t!==e){var r=void 0!==t,o=null===t,i=t==t,s=n(t),a=void 0!==e,u=null===e,d=e==e,h=n(e);if(!u&&!h&&!s&&t>e||s&&a&&d&&!u&&!h||o&&a&&d||!r&&d||!i)return 1;if(!o&&!s&&!h&&t<e||h&&r&&i&&!o&&!s||u&&r&&i||!a&&i||!d)return-1}return 0}},315:(t,e,r)=>{var n=r(8899);t.exports=function(t,e,r){for(var o=-1,i=t.criteria,s=e.criteria,a=i.length,u=r.length;++o<a;){var d=n(i[o],s[o]);if(d)return o>=u?d:d*("desc"==r[o]?-1:1)}return t.index-e.index}},2166:t=>{t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},8618:(t,e,r)=>{var n=r(3192),o=r(7500);t.exports=function(t,e,r,i){var s=!r;r||(r={});for(var a=-1,u=e.length;++a<u;){var d=e[a],h=i?i(r[d],t[d],d,r,t):void 0;void 0===h&&(h=t[d]),s?o(r,d,h):n(r,d,h)}return r}},7272:(t,e,r)=>{var n=r(8618),o=r(4450);t.exports=function(t,e){return n(t,o(t),e)}},2066:(t,e,r)=>{var n=r(8618),o=r(4969);t.exports=function(t,e){return n(t,o(t),e)}},1622:(t,e,r)=>{var n=r(3250)["__core-js_shared__"];t.exports=n},6948:(t,e,r)=>{var n=r(9735),o=r(8132);t.exports=function(t){return n((function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(r[0],r[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var u=r[n];u&&t(e,u,n,s)}return e}))}},6313:(t,e,r)=>{var n=r(568);t.exports=function(t,e){return function(r,o){if(null==r)return r;if(!n(r))return t(r,o);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&!1!==o(a[s],s,a););return r}}},2545:t=>{t.exports=function(t){return function(e,r,n){for(var o=-1,i=Object(e),s=n(e),a=s.length;a--;){var u=s[t?a:++o];if(!1===r(i[u],u,i))break}return e}}},9301:(t,e,r)=>{var n=r(5833),o=r(568),i=r(2096);t.exports=function(t){return function(e,r,s){var a=Object(e);if(!o(e)){var u=n(r,3);e=i(e),r=function(t){return u(a[t],t,a)}}var d=t(e,r,s);return d>-1?a[u?e[d]:d]:void 0}}},1523:(t,e,r)=>{var n=r(4930),o=r(8132),i=r(9558);t.exports=function(t){return function(e,r,s){return s&&"number"!=typeof s&&o(e,r,s)&&(r=s=void 0),e=i(e),void 0===r?(r=e,e=0):r=i(r),s=void 0===s?e<r?1:-1:i(s),n(e,r,s,t)}}},6262:(t,e,r)=>{var n=r(6616),o=r(1607),i=r(7969),s=n&&1/i(new n([,-0]))[1]==1/0?function(t){return new n(t)}:o;t.exports=s},5595:(t,e,r)=>{var n=r(5234),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},4952:(t,e,r)=>{var n=r(4546),o=r(1831),i=r(7026);t.exports=function(t,e,r,s,a,u){var d=1&r,h=t.length,c=e.length;if(h!=c&&!(d&&c>h))return!1;var l=u.get(t),f=u.get(e);if(l&&f)return l==e&&f==t;var g=-1,p=!0,v=2&r?new n:void 0;for(u.set(t,e),u.set(e,t);++g<h;){var y=t[g],m=e[g];if(s)var w=d?s(m,y,g,e,t,u):s(y,m,g,t,e,u);if(void 0!==w){if(w)continue;p=!1;break}if(v){if(!o(e,(function(t,e){if(!i(v,e)&&(y===t||a(y,t,r,s,u)))return v.push(e)}))){p=!1;break}}else if(y!==m&&!a(y,m,r,s,u)){p=!1;break}}return u.delete(t),u.delete(e),p}},1080:(t,e,r)=>{var n=r(861),o=r(3526),i=r(8260),s=r(4952),a=r(1140),u=r(7969),d=n?n.prototype:void 0,h=d?d.valueOf:void 0;t.exports=function(t,e,r,n,d,c,l){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!c(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=a;case"[object Set]":var g=1&n;if(f||(f=u),t.size!=e.size&&!g)return!1;var p=l.get(t);if(p)return p==e;n|=2,l.set(t,e);var v=s(f(t),f(e),n,d,c,l);return l.delete(t),v;case"[object Symbol]":if(h)return h.call(t)==h.call(e)}return!1}},6524:(t,e,r)=>{var n=r(4357),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,i,s,a){var u=1&r,d=n(t),h=d.length;if(h!=n(e).length&&!u)return!1;for(var c=h;c--;){var l=d[c];if(!(u?l in e:o.call(e,l)))return!1}var f=a.get(t),g=a.get(e);if(f&&g)return f==e&&g==t;var p=!0;a.set(t,e),a.set(e,t);for(var v=u;++c<h;){var y=t[l=d[c]],m=e[l];if(i)var w=u?i(m,y,l,e,t,a):i(y,m,l,t,e,a);if(!(void 0===w?y===m||s(y,m,r,i,a):w)){p=!1;break}v||(v="constructor"==l)}if(p&&!v){var x=t.constructor,b=e.constructor;x==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(t),a.delete(e),p}},3273:(t,e,r)=>{var n=r(2923),o=r(340),i=r(4173);t.exports=function(t){return i(o(t,void 0,n),t+"")}},302:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},4357:(t,e,r)=>{var n=r(4468),o=r(4450),i=r(2096);t.exports=function(t){return n(t,i,o)}},5713:(t,e,r)=>{var n=r(4468),o=r(4969),i=r(9882);t.exports=function(t){return n(t,i,o)}},7570:(t,e,r)=>{var n=r(8949);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},2198:(t,e,r)=>{var n=r(8802),o=r(2096);t.exports=function(t){for(var e=o(t),r=e.length;r--;){var i=e[r],s=t[i];e[r]=[i,s,n(s)]}return e}},5234:(t,e,r)=>{var n=r(9817),o=r(7736);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},8490:(t,e,r)=>{var n=r(3540)(Object.getPrototypeOf,Object);t.exports=n},1339:(t,e,r)=>{var n=r(861),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var o=s.call(t);return n&&(e?t[a]=r:delete t[a]),o}},4450:(t,e,r)=>{var n=r(2493),o=r(4506),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),n(s(t),(function(e){return i.call(t,e)})))}:o;t.exports=a},4969:(t,e,r)=>{var n=r(111),o=r(8490),i=r(4450),s=r(4506),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,i(t)),t=o(t);return e}:s;t.exports=a},7493:(t,e,r)=>{var n=r(4466),o=r(2887),i=r(5747),s=r(6616),a=r(8001),u=r(9823),d=r(5784),h="[object Map]",c="[object Promise]",l="[object Set]",f="[object WeakMap]",g="[object DataView]",p=d(n),v=d(o),y=d(i),m=d(s),w=d(a),x=u;(n&&x(new n(new ArrayBuffer(1)))!=g||o&&x(new o)!=h||i&&x(i.resolve())!=c||s&&x(new s)!=l||a&&x(new a)!=f)&&(x=function(t){var e=u(t),r="[object Object]"==e?t.constructor:void 0,n=r?d(r):"";if(n)switch(n){case p:return g;case v:return h;case y:return c;case m:return l;case w:return f}return e}),t.exports=x},7736:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},3544:(t,e,r)=>{var n=r(4007),o=r(9312),i=r(5589),s=r(5023),a=r(6052),u=r(6040);t.exports=function(t,e,r){for(var d=-1,h=(e=n(e,t)).length,c=!1;++d<h;){var l=u(e[d]);if(!(c=null!=t&&r(t,l)))break;t=t[l]}return c||++d!=h?c:!!(h=null==t?0:t.length)&&a(h)&&s(l,h)&&(i(t)||o(t))}},3932:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},4440:(t,e,r)=>{var n=r(4545);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},4108:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},1085:(t,e,r)=>{var n=r(4545),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(e,t)?e[t]:void 0}},7706:(t,e,r)=>{var n=r(4545),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},8636:(t,e,r)=>{var n=r(4545);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},2865:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},1908:(t,e,r)=>{var n=r(2962),o=r(7037),i=r(3429),s=r(9349),a=r(1327);t.exports=function(t,e,r){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return o(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,r);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return i(t);case"[object Symbol]":return s(t)}}},4046:(t,e,r)=>{var n=r(7890),o=r(8490),i=r(2840);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:n(o(t))}},7123:(t,e,r)=>{var n=r(861),o=r(9312),i=r(5589),s=n?n.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(s&&t&&t[s])}},5023:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}},8132:(t,e,r)=>{var n=r(8260),o=r(568),i=r(5023),s=r(3702);t.exports=function(t,e,r){if(!s(r))return!1;var a=typeof e;return!!("number"==a?o(r)&&i(e,r.length):"string"==a&&e in r)&&n(r[e],t)}},5130:(t,e,r)=>{var n=r(5589),o=r(2624),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!o(t))||s.test(t)||!i.test(t)||null!=e&&t in Object(e)}},8949:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},8597:(t,e,r)=>{var n,o=r(1622),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},2840:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},8802:(t,e,r)=>{var n=r(3702);t.exports=function(t){return t==t&&!n(t)}},266:t=>{t.exports=function(){this.__data__=[],this.size=0}},2875:(t,e,r)=>{var n=r(8498),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():o.call(e,r,1),--this.size,0))}},5828:(t,e,r)=>{var n=r(8498);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},4115:(t,e,r)=>{var n=r(8498);t.exports=function(t){return n(this.__data__,t)>-1}},7690:(t,e,r)=>{var n=r(8498);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},9016:(t,e,r)=>{var n=r(5208),o=r(1998),i=r(2887);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},2363:(t,e,r)=>{var n=r(7570);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},4348:(t,e,r)=>{var n=r(7570);t.exports=function(t){return n(this,t).get(t)}},3062:(t,e,r)=>{var n=r(7570);t.exports=function(t){return n(this,t).has(t)}},262:(t,e,r)=>{var n=r(7570);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},1140:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}},4656:t=>{t.exports=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}}},2924:(t,e,r)=>{var n=r(7997);t.exports=function(t){var e=n(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},4545:(t,e,r)=>{var n=r(5234)(Object,"create");t.exports=n},2825:(t,e,r)=>{var n=r(3540)(Object.keys,Object);t.exports=n},4866:t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},8690:(t,e,r)=>{t=r.nmd(t);var n=r(302),o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,s=i&&i.exports===o&&n.process,a=function(){try{return i&&i.require&&i.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},5151:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},3540:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},340:(t,e,r)=>{var n=r(2274),o=Math.max;t.exports=function(t,e,r){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,s=-1,a=o(i.length-e,0),u=Array(a);++s<a;)u[s]=i[e+s];s=-1;for(var d=Array(e+1);++s<e;)d[s]=i[s];return d[e]=r(u),n(t,this,d)}}},3250:(t,e,r)=>{var n=r(302),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},1933:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},3937:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},5009:t=>{t.exports=function(t){return this.__data__.has(t)}},7969:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},4173:(t,e,r)=>{var n=r(6739),o=r(7357)(n);t.exports=o},7357:t=>{var e=Date.now;t.exports=function(t){var r=0,n=0;return function(){var o=e(),i=16-(o-n);if(n=o,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},3210:(t,e,r)=>{var n=r(1998);t.exports=function(){this.__data__=new n,this.size=0}},8603:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},8947:t=>{t.exports=function(t){return this.__data__.get(t)}},885:t=>{t.exports=function(t){return this.__data__.has(t)}},8938:(t,e,r)=>{var n=r(1998),o=r(2887),i=r(5678);t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!o||s.length<199)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(s)}return r.set(t,e),this.size=r.size,this}},5898:t=>{t.exports=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}},1324:(t,e,r)=>{var n=r(7088),o=r(3932),i=r(445);t.exports=function(t){return o(t)?i(t):n(t)}},4041:(t,e,r)=>{var n=r(2924),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)})),e}));t.exports=s},6040:(t,e,r)=>{var n=r(2624);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},5784:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},2438:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},445:t=>{var e="\\ud800-\\udfff",r="["+e+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^"+e+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+o+")?",d="[\\ufe0e\\ufe0f]?",h=d+u+"(?:\\u200d(?:"+[i,s,a].join("|")+")"+d+u+")*",c="(?:"+[i+n+"?",n,s,a,r].join("|")+")",l=RegExp(o+"(?="+o+")|"+c+h,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},7953:(t,e,r)=>{var n=r(8361);t.exports=function(t){return n(t,4)}},7179:(t,e,r)=>{var n=r(8361);t.exports=function(t){return n(t,5)}},9203:t=>{t.exports=function(t){return function(){return t}}},3821:(t,e,r)=>{var n=r(9735),o=r(8260),i=r(8132),s=r(9882),a=Object.prototype,u=a.hasOwnProperty,d=n((function(t,e){t=Object(t);var r=-1,n=e.length,d=n>2?e[2]:void 0;for(d&&i(e[0],e[1],d)&&(n=1);++r<n;)for(var h=e[r],c=s(h),l=-1,f=c.length;++l<f;){var g=c[l],p=t[g];(void 0===p||o(p,a[g])&&!u.call(t,g))&&(t[g]=h[g])}return t}));t.exports=d},678:(t,e,r)=>{t.exports=r(7734)},8260:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},4663:(t,e,r)=>{var n=r(2493),o=r(8146),i=r(5833),s=r(5589);t.exports=function(t,e){return(s(t)?n:o)(t,i(e,3))}},6969:(t,e,r)=>{var n=r(9301)(r(564));t.exports=n},564:(t,e,r)=>{var n=r(4770),o=r(5833),i=r(6843),s=Math.max;t.exports=function(t,e,r){var a=null==t?0:t.length;if(!a)return-1;var u=null==r?0:i(r);return u<0&&(u=s(a+u,0)),n(t,o(e,3),u)}},2923:(t,e,r)=>{var n=r(6640);t.exports=function(t){return null!=t&&t.length?n(t,1):[]}},7734:(t,e,r)=>{var n=r(4004),o=r(1701),i=r(4781),s=r(5589);t.exports=function(t,e){return(s(t)?n:o)(t,i(e))}},7514:(t,e,r)=>{var n=r(9943),o=r(4781),i=r(9882);t.exports=function(t,e){return null==t?t:n(t,o(e),i)}},3546:(t,e,r)=>{var n=r(548);t.exports=function(t,e,r){var o=null==t?void 0:n(t,e);return void 0===o?r:o}},5346:(t,e,r)=>{var n=r(2586),o=r(3544);t.exports=function(t,e){return null!=t&&o(t,e,n)}},6708:(t,e,r)=>{var n=r(2902),o=r(3544);t.exports=function(t,e){return null!=t&&o(t,e,n)}},229:t=>{t.exports=function(t){return t}},9312:(t,e,r)=>{var n=r(3016),o=r(440),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},5589:t=>{var e=Array.isArray;t.exports=e},568:(t,e,r)=>{var n=r(5563),o=r(6052);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},8268:(t,e,r)=>{var n=r(568),o=r(440);t.exports=function(t){return o(t)&&n(t)}},5778:(t,e,r)=>{t=r.nmd(t);var n=r(3250),o=r(7999),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,a=s&&s.exports===i?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;t.exports=u},9787:(t,e,r)=>{var n=r(1351),o=r(7493),i=r(9312),s=r(5589),a=r(568),u=r(5778),d=r(2840),h=r(922),c=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||h(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(d(t))return!n(t).length;for(var r in t)if(c.call(t,r))return!1;return!0}},5563:(t,e,r)=>{var n=r(9823),o=r(3702);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},6052:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},7613:(t,e,r)=>{var n=r(2275),o=r(1525),i=r(8690),s=i&&i.isMap,a=s?o(s):n;t.exports=a},3702:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},440:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},4256:(t,e,r)=>{var n=r(9823),o=r(8490),i=r(440),s=Function.prototype,a=Object.prototype,u=s.toString,d=a.hasOwnProperty,h=u.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=n(t))return!1;var e=o(t);if(null===e)return!0;var r=d.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==h}},693:(t,e,r)=>{var n=r(7170),o=r(1525),i=r(8690),s=i&&i.isSet,a=s?o(s):n;t.exports=a},6705:(t,e,r)=>{var n=r(9823),o=r(5589),i=r(440);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==n(t)}},2624:(t,e,r)=>{var n=r(9823),o=r(440);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},922:(t,e,r)=>{var n=r(2448),o=r(1525),i=r(8690),s=i&&i.isTypedArray,a=s?o(s):n;t.exports=a},6474:t=>{t.exports=function(t){return void 0===t}},2096:(t,e,r)=>{var n=r(5825),o=r(1351),i=r(568);t.exports=function(t){return i(t)?n(t):o(t)}},9882:(t,e,r)=>{var n=r(5825),o=r(1309),i=r(568);t.exports=function(t){return i(t)?n(t,!0):o(t)}},7875:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},9107:(t,e,r)=>{var n=r(9233),o=r(5833),i=r(8068),s=r(5589);t.exports=function(t,e){return(s(t)?n:i)(t,o(e,3))}},1230:(t,e,r)=>{var n=r(7500),o=r(4003),i=r(5833);t.exports=function(t,e){var r={};return e=i(e,3),o(t,(function(t,o,i){n(r,o,e(t,o,i))})),r}},6492:(t,e,r)=>{var n=r(5117),o=r(1669),i=r(229);t.exports=function(t){return t&&t.length?n(t,i,o):void 0}},7997:(t,e,r)=>{var n=r(5678);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(o.Cache||n),r}o.Cache=n,t.exports=o},8469:(t,e,r)=>{var n=r(2133),o=r(6948)((function(t,e,r){n(t,e,r)}));t.exports=o},5071:(t,e,r)=>{var n=r(5117),o=r(6718),i=r(229);t.exports=function(t){return t&&t.length?n(t,i,o):void 0}},6838:(t,e,r)=>{var n=r(5117),o=r(5833),i=r(6718);t.exports=function(t,e){return t&&t.length?n(t,o(e,2),i):void 0}},1607:t=>{t.exports=function(){}},231:(t,e,r)=>{var n=r(3250);t.exports=function(){return n.Date.now()}},9335:(t,e,r)=>{var n=r(1785),o=r(3273)((function(t,e){return null==t?{}:n(t,e)}));t.exports=o},4437:(t,e,r)=>{var n=r(6174),o=r(3293),i=r(5130),s=r(6040);t.exports=function(t){return i(t)?n(s(t)):o(t)}},8569:(t,e,r)=>{var n=r(1523)();t.exports=n},7682:(t,e,r)=>{var n=r(5115),o=r(1701),i=r(5833),s=r(4306),a=r(5589);t.exports=function(t,e,r){var u=a(t)?n:s,d=arguments.length<3;return u(t,i(e,4),r,d,o)}},1039:(t,e,r)=>{var n=r(1351),o=r(7493),i=r(568),s=r(6705),a=r(1324);t.exports=function(t){if(null==t)return 0;if(i(t))return s(t)?a(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:n(t).length}},1635:(t,e,r)=>{var n=r(6640),o=r(3980),i=r(9735),s=r(8132),a=i((function(t,e){if(null==t)return[];var r=e.length;return r>1&&s(t,e[0],e[1])?e=[]:r>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),o(t,n(e,1),[])}));t.exports=a},4506:t=>{t.exports=function(){return[]}},7999:t=>{t.exports=function(){return!1}},9558:(t,e,r)=>{var n=r(9153),o=1/0;t.exports=function(t){return t?(t=n(t))===o||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},6843:(t,e,r)=>{var n=r(9558);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},9153:(t,e,r)=>{var n=r(1656),o=r(3702),i=r(2624),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var r=a.test(t);return r||u.test(t)?d(t.slice(2),r?2:8):s.test(t)?NaN:+t}},6222:(t,e,r)=>{var n=r(8618),o=r(9882);t.exports=function(t){return n(t,o(t))}},9835:(t,e,r)=>{var n=r(6245);t.exports=function(t){return null==t?"":n(t)}},3604:(t,e,r)=>{var n=r(4004),o=r(7890),i=r(4003),s=r(5833),a=r(8490),u=r(5589),d=r(5778),h=r(5563),c=r(3702),l=r(922);t.exports=function(t,e,r){var f=u(t),g=f||d(t)||l(t);if(e=s(e,4),null==r){var p=t&&t.constructor;r=g?f?new p:[]:c(t)&&h(p)?o(a(t)):{}}return(g?n:i)(t,(function(t,n,o){return e(r,t,n,o)})),r}},7767:(t,e,r)=>{var n=r(6640),o=r(9735),i=r(135),s=r(8268),a=o((function(t){return i(n(t,1,s,!0))}));t.exports=a},1422:(t,e,r)=>{var n=r(9835),o=0;t.exports=function(t){var e=++o;return n(t)+e}},1682:(t,e,r)=>{var n=r(71),o=r(2096);t.exports=function(t){return null==t?[]:n(t,o(t))}},4142:(t,e,r)=>{var n=r(3192),o=r(6302);t.exports=function(t,e){return o(t||[],e||[],n)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,r),i.loaded=!0,i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};(()=>{"use strict";function t(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}r.d(n,{calculateLayout:()=>ro,stopLayout:()=>eo}),Object.create,Object.create;const e=function(){function t(){this._events={}}return t.prototype.on=function(t,e,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!r}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this._events[t]||[],i=this._events["*"]||[],s=function(n){for(var o=n.length,i=0;i<o;i++)if(n[i]){var s=n[i],a=s.callback;s.once&&(n.splice(i,1),0===n.length&&delete e._events[t],o--,i--),a.apply(e,r)}};s(o),s(i)},t.prototype.off=function(t,e){if(t)if(e){for(var r=this._events[t]||[],n=r.length,o=0;o<n;o++)r[o].callback===e&&(r.splice(o,1),n--,o--);0===r.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();function o(t,e,r,n){for(;t.length;){const o=t.shift();if(r(o))return!0;e.add(o.id),n(o.id).forEach((r=>{e.has(r.id)||(e.add(r.id),t.push(r))}))}return!1}function i(t,e,r,n){if(r(t))return!0;e.add(t.id);for(const o of n(t.id))if(!e.has(o.id)&&i(o,e,r,n))return!0;return!1}const s=()=>!0;class a{graph;nodeFilter;edgeFilter;cacheEnabled;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;allNodesMap=new Map;allEdgesMap=new Map;constructor(t){this.graph=t.graph;const e=t.nodeFilter||s,r=t.edgeFilter||s;this.nodeFilter=e,this.edgeFilter=t=>{const{source:n,target:o}=this.graph.getEdgeDetail(t.id);return!(!e(n)||!e(o))&&r(t,n,o)},"auto"===t.cache?(this.cacheEnabled=!0,this.startAutoCache()):"manual"===t.cache?this.cacheEnabled=!0:this.cacheEnabled=!1}clearCache=()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()};refreshCache=()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map((t=>t.id)))};updateCache=t=>{const e=new Set;t.forEach((t=>{const r=this.bothEdgesMap.get(t);if(r&&r.forEach((t=>e.add(t.id))),this.hasNode(t)){const r=this.graph.getRelatedEdges(t,"in").filter(this.edgeFilter),n=this.graph.getRelatedEdges(t,"out").filter(this.edgeFilter),o=Array.from(new Set([...r,...n]));o.forEach((t=>e.add(t.id))),this.inEdgesMap.set(t,r),this.outEdgesMap.set(t,n),this.bothEdgesMap.set(t,o),this.allNodesMap.set(t,this.graph.getNode(t))}else this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.bothEdgesMap.delete(t),this.allNodesMap.delete(t)})),e.forEach((t=>{this.hasEdge(t)?this.allEdgesMap.set(t,this.graph.getEdge(t)):this.allEdgesMap.delete(t)}))};startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}handleGraphChanged=t=>{const e=new Set;t.changes.forEach((r=>{switch(r.type){case"NodeAdded":case"NodeRemoved":e.add(r.value.id);break;case"NodeDataUpdated":e.add(r.id);break;case"EdgeAdded":case"EdgeRemoved":e.add(r.value.source),e.add(r.value.target);break;case"EdgeUpdated":"source"!==r.propertyName&&"target"!==r.propertyName||(e.add(r.oldValue),e.add(r.newValue));break;case"EdgeDataUpdated":if(t.graph.hasEdge(r.id)){const n=t.graph.getEdge(r.id);e.add(n.source),e.add(n.target)}}})),this.updateCache(e)};checkNodeExistence(t){this.getNode(t)}hasNode(t){if(!this.graph.hasNode(t))return!1;const e=this.graph.getNode(t);return this.nodeFilter(e)}areNeighbors(t,e){return this.checkNodeExistence(t),this.getNeighbors(e).some((e=>e.id===t))}getNode(t){const e=this.graph.getNode(t);if(!this.nodeFilter(e))throw new Error("Node not found for id: "+t);return e}getRelatedEdges(t,e){return this.checkNodeExistence(t),this.cacheEnabled?"in"===e?this.inEdgesMap.get(t):"out"===e?this.outEdgesMap.get(t):this.bothEdgesMap.get(t):this.graph.getRelatedEdges(t,e).filter(this.edgeFilter)}getDegree(t,e){return this.getRelatedEdges(t,e).length}getSuccessors(t){const e=this.getRelatedEdges(t,"out").map((t=>this.getNode(t.target)));return Array.from(new Set(e))}getPredecessors(t){const e=this.getRelatedEdges(t,"in").map((t=>this.getNode(t.source)));return Array.from(new Set(e))}getNeighbors(t){const e=this.getPredecessors(t),r=this.getSuccessors(t);return Array.from(new Set([...e,...r]))}hasEdge(t){if(!this.graph.hasEdge(t))return!1;const e=this.graph.getEdge(t);return this.edgeFilter(e)}getEdge(t){const e=this.graph.getEdge(t);if(!this.edgeFilter(e))throw new Error("Edge not found for id: "+t);return e}getEdgeDetail(t){const e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}hasTreeStructure(t){return this.graph.hasTreeStructure(t)}getRoots(t){return this.graph.getRoots(t).filter(this.nodeFilter)}getChildren(t,e){return this.checkNodeExistence(t),this.graph.getChildren(t,e).filter(this.nodeFilter)}getParent(t,e){this.checkNodeExistence(t);const r=this.graph.getParent(t,e);return r&&this.nodeFilter(r)?r:null}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(t,e,r="out"){const n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];o([this.getNode(t)],new Set,e,n)}dfs(t,e,r="out"){const n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];i(this.getNode(t),new Set,e,n)}}class u extends e{nodeMap=new Map;edgeMap=new Map;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;treeIndices=new Map;changes=[];batchCount=0;onChanged=()=>{};constructor(t){super(),t&&(t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged))}batch=t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()};commit(){const t=this.changes;this.changes=[];const e={graph:this,changes:t};this.emit("changed",e),this.onChanged(e)}reduceChanges(t){let e=[];return t.forEach((t=>{switch(t.type){case"NodeRemoved":{let r=!1;e=e.filter((e=>{if("NodeAdded"===e.type){const n=e.value.id===t.value.id;return n&&(r=!0),!n}return"NodeDataUpdated"===e.type?e.id!==t.value.id:"TreeStructureChanged"!==e.type||e.nodeId!==t.value.id})),r||e.push(t);break}case"EdgeRemoved":{let r=!1;e=e.filter((e=>{if("EdgeAdded"===e.type){const n=e.value.id===t.value.id;return n&&(r=!0),!n}return"EdgeDataUpdated"!==e.type&&"EdgeUpdated"!==e.type||e.id!==t.value.id})),r||e.push(t);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const r=e.findIndex((e=>e.type===t.type&&e.id===t.id&&(void 0===t.propertyName||e.propertyName===t.propertyName))),n=e[r];n?void 0!==t.propertyName?n.newValue=t.newValue:(e.splice(r,1),e.push(t)):e.push(t);break}case"TreeStructureDetached":e=e.filter((e=>"TreeStructureAttached"===e.type?e.treeKey!==t.treeKey:"TreeStructureChanged"!==e.type||e.treeKey!==t.treeKey)),e.push(t);break;case"TreeStructureChanged":{const r=e.find((e=>"TreeStructureChanged"===e.type&&e.treeKey===t.treeKey&&e.nodeId===t.nodeId));r?r.newParentId=t.newParentId:e.push(t);break}default:e.push(t)}})),e}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,e){return this.getNeighbors(e).some((e=>e.id===t))}getNode(t){const e=this.nodeMap.get(t);if(!e)throw new Error("Node not found for id: "+t);return e}getRelatedEdges(t,e){if(this.checkNodeExistence(t),"in"===e){const e=this.inEdgesMap.get(t);return Array.from(e)}if("out"===e){const e=this.outEdgesMap.get(t);return Array.from(e)}{const e=this.bothEdgesMap.get(t);return Array.from(e)}}getDegree(t,e){return this.getRelatedEdges(t,e).length}getSuccessors(t){const e=this.getRelatedEdges(t,"out").map((t=>this.getNode(t.target)));return Array.from(new Set(e))}getPredecessors(t){const e=this.getRelatedEdges(t,"in").map((t=>this.getNode(t.source)));return Array.from(new Set(e))}getNeighbors(t){const e=this.getPredecessors(t),r=this.getSuccessors(t);return Array.from(new Set([...e,...r]))}doAddNode(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach((e=>{e.childrenMap.set(t.id,new Set)})),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch((()=>{for(const e of t)this.doAddNode(e)}))}addNode(t){this.addNodes([t])}doRemoveNode(t){const e=this.getNode(t),r=this.bothEdgesMap.get(t);r?.forEach((t=>this.doRemoveEdge(t.id))),this.nodeMap.delete(t),this.treeIndices.forEach((r=>{r.childrenMap.get(t)?.forEach((t=>{r.parentMap.delete(t.id)}));const n=r.parentMap.get(t);n&&r.childrenMap.get(n.id)?.delete(e),r.parentMap.delete(t),r.childrenMap.delete(t)})),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:e})}removeNodes(t){this.batch((()=>{t.forEach((t=>this.doRemoveNode(t)))}))}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,e,r){const n=this.getNode(t);this.batch((()=>{const o=n.data[e],i=r;n.data[e]=i,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:e,oldValue:o,newValue:i})}))}mergeNodeData(t,e){this.batch((()=>{Object.entries(e).forEach((([e,r])=>{this.updateNodeDataProperty(t,e,r)}))}))}updateNodeData(...t){const e=t[0],r=this.getNode(e);if("string"==typeof t[1])return void this.updateNodeDataProperty(e,t[1],t[2]);let n;if("function"==typeof t[1]){const e=t[1];n=e(r.data)}else"object"==typeof t[1]&&(n=t[1]);this.batch((()=>{const t=r.data,o=n;r.data=n,this.changes.push({type:"NodeDataUpdated",id:e,oldValue:t,newValue:o})}))}checkEdgeExistence(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){const e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);const e=this.inEdgesMap.get(t.target),r=this.outEdgesMap.get(t.source),n=this.bothEdgesMap.get(t.source),o=this.bothEdgesMap.get(t.target);e.add(t),r.add(t),n.add(t),o.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch((()=>{for(const e of t)this.doAddEdge(e)}))}addEdge(t){this.addEdges([t])}doRemoveEdge(t){const e=this.getEdge(t),r=this.outEdgesMap.get(e.source),n=this.inEdgesMap.get(e.target),o=this.bothEdgesMap.get(e.source),i=this.bothEdgesMap.get(e.target);r.delete(e),n.delete(e),o.delete(e),i.delete(e),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:e})}removeEdges(t){this.batch((()=>{t.forEach((t=>this.doRemoveEdge(t)))}))}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,e){const r=this.getEdge(t);this.checkNodeExistence(e);const n=r.source,o=e;this.outEdgesMap.get(n).delete(r),this.bothEdgesMap.get(n).delete(r),this.outEdgesMap.get(o).add(r),this.bothEdgesMap.get(o).add(r),r.source=e,this.batch((()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:n,newValue:o})}))}updateEdgeTarget(t,e){const r=this.getEdge(t);this.checkNodeExistence(e);const n=r.target,o=e;this.inEdgesMap.get(n).delete(r),this.bothEdgesMap.get(n).delete(r),this.inEdgesMap.get(o).add(r),this.bothEdgesMap.get(o).add(r),r.target=e,this.batch((()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:n,newValue:o})}))}updateEdgeDataProperty(t,e,r){const n=this.getEdge(t);this.batch((()=>{const o=n.data[e],i=r;n.data[e]=i,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:e,oldValue:o,newValue:i})}))}updateEdgeData(...t){const e=t[0],r=this.getEdge(e);if("string"==typeof t[1])return void this.updateEdgeDataProperty(e,t[1],t[2]);let n;if("function"==typeof t[1]){const e=t[1];n=e(r.data)}else"object"==typeof t[1]&&(n=t[1]);this.batch((()=>{const t=r.data,o=n;r.data=n,this.changes.push({type:"EdgeDataUpdated",id:e,oldValue:t,newValue:o})}))}mergeEdgeData(t,e){this.batch((()=>{Object.entries(e).forEach((([e,r])=>{this.updateEdgeDataProperty(t,e,r)}))}))}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch((()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})})))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch((()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})}))}addTree(t,e){this.batch((()=>{this.attachTreeStructure(e);const r=[],n=Array.isArray(t)?t:[t];for(;n.length;){const t=n.shift();r.push(t),t.children&&n.push(...t.children)}this.addNodes(r),r.forEach((t=>{t.children?.forEach((r=>{this.setParent(r.id,t.id,e)}))}))}))}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter((e=>!this.getParent(e.id,t)))}getChildren(t,e){this.checkNodeExistence(t),this.checkTreeExistence(e);const r=this.treeIndices.get(e).childrenMap.get(t);return Array.from(r||[])}getParent(t,e){return this.checkNodeExistence(t),this.checkTreeExistence(e),this.treeIndices.get(e).parentMap.get(t)||null}getAncestors(t,e){const r=[];let n,o=this.getNode(t);for(;n=this.getParent(o.id,e);)r.push(n),o=n;return r}setParent(t,e,r){this.checkTreeExistence(r);const n=this.treeIndices.get(r),o=this.getNode(t),i=n.parentMap.get(t);if(i?.id===e)return;if(void 0===e)return i&&n.childrenMap.get(i.id)?.delete(o),void n.parentMap.delete(t);const s=this.getNode(e);n.parentMap.set(t,s),i&&n.childrenMap.get(i.id)?.delete(o);let a=n.childrenMap.get(s.id);a||(a=new Set,n.childrenMap.set(s.id,a)),a.add(o),this.batch((()=>{this.changes.push({type:"TreeStructureChanged",treeKey:r,nodeId:t,oldParentId:i?.id,newParentId:s.id})}))}dfsTree(t,e,r){return i(this.getNode(t),new Set,e,(t=>this.getChildren(t,r)))}bfsTree(t,e,r){return o([this.getNode(t)],new Set,e,(t=>this.getChildren(t,r)))}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,e,r="out"){const n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];return o([this.getNode(t)],new Set,e,n)}dfs(t,e,r="out"){const n={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];return i(this.getNode(t),new Set,e,n)}clone(){const t=this.getAllNodes().map((t=>({...t,data:{...t.data}}))),e=this.getAllEdges().map((t=>({...t,data:{...t.data}}))),r=new u({nodes:t,edges:e});return this.treeIndices.forEach((({parentMap:t,childrenMap:e},n)=>{const o=new Map;t.forEach(((t,e)=>{o.set(e,r.getNode(t.id))}));const i=new Map;e.forEach(((t,e)=>{i.set(e,new Set(Array.from(t).map((t=>r.getNode(t.id)))))})),r.treeIndices.set(n,{parentMap:o,childrenMap:i})})),r}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new a({graph:this,...t})}}var d={}.toString;const h=function(t,e){return d.call(t)==="[object "+e+"]"},c=function(t){return h(t,"Number")},l=(t,e)=>{if("next"!==t&&"prev"!==t)return e},f=t=>{t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev};class g{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,e=t.prev;if(e&&e!==t)return f(e),e}enqueue(t){const e=this.shortcut;t.prev&&t.next&&f(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e}toString(){const t=[],e=this.shortcut;let r=e.prev;for(;r!==e;)t.push(JSON.stringify(r,l)),r=null==r?void 0:r.prev;return`[${t.join(", ")}]`}}class p extends g{}const v=()=>1,y=(t,e,r,n,o)=>{var i,s;const a=[];return t.hasNode(n.v)&&(null===(i=t.getRelatedEdges(n.v,"in"))||void 0===i||i.forEach((n=>{const i=n.data.weight,s=t.getNode(n.source);o&&a.push({v:n.source,w:n.target,in:0,out:0}),void 0===s.data.out&&(s.data.out=0),s.data.out-=i,m(e,r,Object.assign({v:s.id},s.data))})),null===(s=t.getRelatedEdges(n.v,"out"))||void 0===s||s.forEach((n=>{const o=n.data.weight,i=n.target,s=t.getNode(i);void 0===s.data.in&&(s.data.in=0),s.data.in-=o,m(e,r,Object.assign({v:s.id},s.data))})),t.removeNode(n.v)),o?a:void 0},m=(t,e,r)=>{r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)},w=(t,e)=>{const r="greedy"===e?(t=>{var e;if(t.getAllNodes().length<=1)return[];const r=((t,e)=>{const r=new u;let n=0,o=0;t.getAllNodes().forEach((t=>{r.addNode({id:t.id,data:{v:t.id,in:0,out:0}})})),t.getAllEdges().forEach((t=>{const i=r.getRelatedEdges(t.source,"out").find((e=>e.target===t.target)),s=(null==e?void 0:e(t))||1;i?r.updateEdgeData(null==i?void 0:i.id,Object.assign(Object.assign({},i.data),{weight:i.data.weight+s})):r.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:s}}),o=Math.max(o,r.getNode(t.source).data.out+=s),n=Math.max(n,r.getNode(t.target).data.in+=s)}));const i=[],s=o+n+3;for(let t=0;t<s;t++)i.push(new p);const a=n+1;return r.getAllNodes().forEach((t=>{m(i,a,Object.assign({v:t.id},r.getNode(t.id).data))})),{buckets:i,zeroIdx:a,graph:r}})(t,(t=>t.data.weight||1)||v);return null===(e=((t,e,r)=>{let n=[];const o=e[e.length-1],i=e[0];let s;for(;t.getAllNodes().length;){for(;s=i.dequeue();)y(t,e,r,s);for(;s=o.dequeue();)y(t,e,r,s);if(t.getAllNodes().length)for(let o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){n=n.concat(y(t,e,r,s,!0));break}}return n})(r.graph,r.buckets,r.zeroIdx).map((e=>t.getRelatedEdges(e.v,"out").filter((({target:t})=>t===e.w)))))||void 0===e?void 0:e.flat()})(t):x(t);null==r||r.forEach((e=>{const r=e.data;t.removeEdge(e.id),r.forwardName=e.data.name,r.reversed=!0,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign({},r)})}))},x=t=>{const e=[],r={},n={},o=i=>{n[i]||(n[i]=!0,r[i]=!0,t.getRelatedEdges(i,"out").forEach((t=>{r[t.target]?e.push(t):o(t.target)})),delete r[i])};return t.getAllNodes().forEach((t=>o(t.id))),e},b=(t,e,r,n)=>{let o;do{o=`${n}${Math.random()}`}while(t.hasNode(o));return r.dummy=e,t.addNode({id:o,data:r}),o},E=t=>{const e=new u;return t.getAllNodes().forEach((r=>{t.getChildren(r.id).length||e.addNode(Object.assign({},r))})),t.getAllEdges().forEach((t=>{e.addEdge(t)})),e},N=(t,e)=>{const r=Number(t.x),n=Number(t.y),o=Number(e.x)-r,i=Number(e.y)-n;let s,a,u=Number(t.width)/2,d=Number(t.height)/2;return o||i?(Math.abs(i)*u>Math.abs(o)*d?(i<0&&(d=-d),s=d*o/i,a=d):(o<0&&(u=-u),s=u,a=u*i/o),{x:r+s,y:n+a}):{x:0,y:0}},_=t=>{const e=[],r=k(t)+1;for(let t=0;t<r;t++)e.push([]);t.getAllNodes().forEach((t=>{const r=t.data.rank;void 0!==r&&e[r]&&e[r].push(t.id)}));for(let n=0;n<r;n++)e[n]=e[n].sort(((e,r)=>{return n=t.getNode(e).data.order,o=t.getNode(r).data.order,Number(n)-Number(o);var n,o}));return e},M=(t,e,r,n)=>{const o={width:0,height:0};return c(r)&&c(n)&&(o.rank=r,o.order=n),b(t,"border",o,e)},k=t=>{let e;return t.getAllNodes().forEach((t=>{const r=t.data.rank;void 0!==r&&(void 0===e||r>e)&&(e=r)})),e||(e=0),e},A=(t,e)=>t.reduce(((t,r)=>e(t)>e(r)?r:t)),j=(t,e,r,n,o,i)=>{n.includes(e.id)||(n.push(e.id),r||i.push(e.id),o(e.id).forEach((e=>j(t,e,r,n,o,i))),r&&i.push(e.id))},O=(t,e,r,n)=>{const o=Array.isArray(e)?e:[e],i=e=>n?t.getSuccessors(e):t.getNeighbors(e),s=[],a=[];return o.forEach((e=>{if(!t.hasNode(e.id))throw new Error(`Graph does not have node: ${e}`);j(t,e,"post"===r,a,i,s)})),s},S=(t,e,r,n,o,i)=>{const s={rank:i,borderType:e,width:0,height:0},a=o.data[e][i-1],u=b(t,"border",s,r);o.data[e][i]=u,t.setParent(u,n),a&&t.addEdge({id:`e${Math.random()}`,source:a,target:u,data:{weight:1}})},z=t=>{t.getAllNodes().forEach((t=>{R(t)})),t.getAllEdges().forEach((t=>{R(t)}))},R=t=>{const e=t.data.width;t.data.width=t.data.height,t.data.height=e},I=t=>{(null==t?void 0:t.y)&&(t.y=-t.y)},P=t=>{const e=t.x;t.x=t.y,t.y=e},C=(t,e,r,n,o,i,s)=>{const a=t.getChildren(s);if(!(null==a?void 0:a.length))return void(s!==e&&t.addEdge({id:`e${Math.random()}`,source:e,target:s,data:{weight:0,minlen:r}}));const u=M(t,"_bt"),d=M(t,"_bb"),h=t.getNode(s);t.setParent(u,s),h.data.borderTop=u,t.setParent(d,s),h.data.borderBottom=d,null==a||a.forEach((a=>{C(t,e,r,n,o,i,a.id);const h=a.data.borderTop?a.data.borderTop:a.id,c=a.data.borderBottom?a.data.borderBottom:a.id,l=a.data.borderTop?n:2*n,f=h!==c?1:o-i[s]+1;t.addEdge({id:`e${Math.random()}`,source:u,target:h,data:{minlen:f,weight:l,nestingEdge:!0}}),t.addEdge({id:`e${Math.random()}`,source:c,target:d,data:{minlen:f,weight:l,nestingEdge:!0}})})),t.getParent(s)||t.addEdge({id:`e${Math.random()}`,source:e,target:u,data:{weight:0,minlen:o+i[s]}})},D="edge-label",T=function(t){return Array.isArray?Array.isArray(t):h(t,"Array")};var L=function(t){if("object"!=typeof t||null===t)return t;var e;if(T(t)){e=[];for(var r=0,n=t.length;r<n;r++)"object"==typeof t[r]&&null!=t[r]?e[r]=L(t[r]):e[r]=t[r]}else for(var o in e={},t)"object"==typeof t[o]&&null!=t[o]?e[o]=L(t[o]):e[o]=t[o];return e};const F=L,q=(t,e,r)=>{const n=(i=r,s=r.map(((t,e)=>e)),null==i?void 0:i.reduce(((t,e,r)=>(t[e]=s[r],t)),{})),o=e.map((e=>{const r=t.getRelatedEdges(e,"out").map((t=>({pos:n[t.target]||0,weight:t.data.weight})));return null==r?void 0:r.sort(((t,e)=>t.pos-e.pos))})).flat().filter((t=>void 0!==t));var i,s;let a=1;for(;a<r.length;)a<<=1;const u=2*a-1;a-=1;const d=Array(u).fill(0,0,u);let h=0;return null==o||o.forEach((t=>{if(t){let e=t.pos+a;d[e]+=t.weight;let r=0;for(;e>0;)e%2&&(r+=d[e+1]),e=e-1>>1,d[e]+=t.weight;h+=t.weight*r}})),h},V=(t,e)=>{let r=0;for(let n=1;n<(null==e?void 0:e.length);n+=1)r+=q(t,e[n-1],e[n]);return r},B=t=>{const e={},r=t.getAllNodes(),n=r.map((t=>{var e;return null!==(e=t.data.rank)&&void 0!==e?e:-1/0})),o=Math.max(...n),i=[];for(let t=0;t<o+1;t++)i.push([]);const s=r.sort(((e,r)=>t.getNode(e.id).data.rank-t.getNode(r.id).data.rank)),a=s.filter((e=>void 0!==t.getNode(e.id).data.fixorder)).sort(((e,r)=>t.getNode(e.id).data.fixorder-t.getNode(r.id).data.fixorder));return null==a||a.forEach((r=>{isNaN(t.getNode(r.id).data.rank)||i[t.getNode(r.id).data.rank].push(r.id),e[r.id]=!0})),null==s||s.forEach((r=>t.dfsTree(r.id,(t=>{if(e.hasOwnProperty(t.id))return!0;e[t.id]=!0,isNaN(t.data.rank)||i[t.data.rank].push(t.id)})))),i},$=(t,e)=>{var r;let n=0,o=0;t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.vs=null===(r=e.vs)||void 0===r?void 0:r.concat(t.vs),t.barycenter=n/o,t.weight=o,t.i=Math.min(e.i,t.i),e.merged=!0},G=(t,e)=>{var r,n,o;const i={};null==t||t.forEach(((t,e)=>{i[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};const r=i[t.v];void 0!==t.barycenter&&(r.barycenter=t.barycenter,r.weight=t.weight)})),null===(r=e.getAllEdges())||void 0===r||r.forEach((t=>{const e=i[t.source],r=i[t.target];void 0!==e&&void 0!==r&&(r.indegree++,e.out.push(i[t.target]))}));return(t=>{var e,r;const n=[];for(;null==t?void 0:t.length;){const o=t.pop();n.push(o),null===(e=o.in.reverse())||void 0===e||e.forEach((t=>{return(e=o,t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&$(e,t)})(t);var e})),null===(r=o.out)||void 0===r||r.forEach((e=>{return(r=o,e=>{e.in.push(r),0==--e.indegree&&t.push(e)})(e);var r}))}const o=n.filter((t=>!t.merged)),i=["vs","i","barycenter","weight"];return o.map((t=>{const e={};return null==i||i.forEach((r=>{void 0!==t[r]&&(e[r]=t[r])})),e}))})(null===(o=(n=Object.values(i)).filter)||void 0===o?void 0:o.call(n,(t=>!t.indegree)))},U=(t,e,r)=>{let n,o=r;for(;e.length&&(n=e[e.length-1]).i<=o;)e.pop(),null==t||t.push(n.vs),o++;return o},W=(t,e,r,n,o,i)=>{var s,a,u,d;let h=t.getChildren(e).map((t=>t.id));const c=t.getNode(e),l=c?c.data.borderLeft:void 0,f=c?c.data.borderRight:void 0,g={};l&&(h=null==h?void 0:h.filter((t=>t!==l&&t!==f)));const p=((t,e)=>e.map((e=>{const r=t.getRelatedEdges(e,"in");if(!(null==r?void 0:r.length))return{v:e};const n={sum:0,weight:0};return null==r||r.forEach((e=>{const r=t.getNode(e.source);n.sum+=e.data.weight*r.data.order,n.weight+=e.data.weight})),{v:e,barycenter:n.sum/n.weight,weight:n.weight}})))(t,h||[]);null==p||p.forEach((e=>{var o;if(null===(o=t.getChildren(e.v))||void 0===o?void 0:o.length){const o=W(t,e.v,r,n,i);g[e.v]=o,o.hasOwnProperty("barycenter")&&H(e,o)}}));const v=G(p,r);Y(v,g),null===(s=v.filter((t=>t.vs.length>0)))||void 0===s||s.forEach((e=>{const r=t.getNode(e.vs[0]);r&&(e.fixorder=r.data.fixorder,e.order=r.data.order)}));const y=((t,e,r,n)=>{const o=(t=>{const e={lhs:[],rhs:[]};return null==t||t.forEach((t=>{(t=>{const e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return n?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")})(t)?e.lhs.push(t):e.rhs.push(t)})),e})(t),i=o.lhs,s=o.rhs.sort(((t,e)=>-t.i- -e.i)),a=[];let u=0,d=0,h=0;null==i||i.sort(((t,e)=>(r,n)=>{if(void 0!==r.fixorder&&void 0!==n.fixorder)return r.fixorder-n.fixorder;if(r.barycenter<n.barycenter)return-1;if(r.barycenter>n.barycenter)return 1;if(e&&void 0!==r.order&&void 0!==n.order){if(r.order<n.order)return-1;if(r.order>n.order)return 1}return t?n.i-r.i:r.i-n.i})(!!e,!!r)),h=U(a,s,h),null==i||i.forEach((t=>{var e;h+=null===(e=t.vs)||void 0===e?void 0:e.length,a.push(t.vs),u+=t.barycenter*t.weight,d+=t.weight,h=U(a,s,h)}));const c={vs:a.flat()};return d&&(c.barycenter=u/d,c.weight=d),c})(v,n,o,i);if(l&&(y.vs=[l,y.vs,f].flat(),null===(a=t.getPredecessors(l))||void 0===a?void 0:a.length)){const e=t.getNode((null===(u=t.getPredecessors(l))||void 0===u?void 0:u[0].id)||""),r=t.getNode((null===(d=t.getPredecessors(f))||void 0===d?void 0:d[0].id)||"");y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+e.data.order+r.data.order)/(y.weight+2),y.weight+=2}return y},Y=(t,e)=>{null==t||t.forEach((t=>{var r;const n=null===(r=t.vs)||void 0===r?void 0:r.map((t=>e[t]?e[t].vs:t));t.vs=n.flat()}))},H=(t,e)=>{void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},K=(t,e,r)=>e.map((e=>((t,e,r)=>{const n=(t=>{let e;for(;t.hasNode(e=`_root${Math.random()}`););return e})(t),o=new u({tree:[{id:n,children:[],data:{}}]});return t.getAllNodes().forEach((i=>{const s=t.getParent(i.id);(i.data.rank===e||i.data.minRank<=e&&e<=i.data.maxRank)&&(o.hasNode(i.id)||o.addNode(Object.assign({},i)),(null==s?void 0:s.id)&&!o.hasNode(null==s?void 0:s.id)&&o.addNode(Object.assign({},s)),o.setParent(i.id,(null==s?void 0:s.id)||n),t.getRelatedEdges(i.id,r).forEach((e=>{const r=e.source===i.id?e.target:e.source;o.hasNode(r)||o.addNode(Object.assign({},t.getNode(r)));const n=o.getRelatedEdges(r,"out").find((({target:t})=>t===i.id)),s=void 0!==n?n.data.weight:0;n?o.updateEdgeData(n.id,Object.assign(Object.assign({},n.data),{weight:e.data.weight+s})):o.addEdge({id:e.id,source:r,target:i.id,data:{weight:e.data.weight+s}})})),i.data.hasOwnProperty("minRank")&&o.updateNodeData(i.id,Object.assign(Object.assign({},i.data),{borderLeft:i.data.borderLeft[e],borderRight:i.data.borderRight[e]})))})),o})(t,e,r))),J=(t,e,r,n)=>{const o=new u;null==t||t.forEach((t=>{var i;const s=t.getRoots()[0].id,a=W(t,s,o,e,r,n);for(let e=0;e<(null===(i=a.vs)||void 0===i?void 0:i.length);e++){const r=t.getNode(a.vs[e]);r&&(r.data.order=e)}((t,e,r)=>{const n={};let o;null==r||r.forEach((r=>{let i,s,a=t.getParent(r);for(;a;){if(i=t.getParent(a.id),i?(s=n[i.id],n[i.id]=a.id):(s=o,o=a.id),s&&s!==a.id)return e.hasNode(s)||e.addNode({id:s,data:{}}),e.hasNode(a.id)||e.addNode({id:a.id,data:{}}),void(e.hasEdge(`e${s}-${a.id}`)||e.addEdge({id:`e${s}-${a.id}`,source:s,target:a.id,data:{}}));a=i}}))})(t,o,a.vs)}))},X=(t,e)=>{null==e||e.forEach((e=>{null==e||e.forEach(((e,r)=>{t.getNode(e).data.order=r}))}))},Q=(t,e)=>{var r,n;if(null===(r=t.getNode(e))||void 0===r?void 0:r.data.dummy)return null===(n=t.getPredecessors(e))||void 0===n?void 0:n.find((e=>t.getNode(e.id).data.dummy))},Z=(t,e,r)=>{let n=e,o=r;if(n>o){const t=n;n=o,o=t}let i=t[n];i||(t[n]=i={}),i[o]=!0},tt=(t,e,r)=>{let n=e,o=r;return n>r&&(n=r,o=e),!!t[n]},et=(t,e,r,n,o,i)=>{const s=new u,a=rt(n,o,i);return null==e||e.forEach((e=>{let n;null==e||e.forEach((e=>{const o=r[e];if(s.hasNode(o)||s.addNode({id:o,data:{}}),n){const i=r[n],u=s.getRelatedEdges(i,"out").find((t=>t.target===o));u?s.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:Math.max(a(t,e,n),u.data.weight||0)})):s.addEdge({id:`e${Math.random()}`,source:i,target:o,data:{weight:Math.max(a(t,e,n),0)}})}n=e}))})),s};const rt=(t,e,r)=>(n,o,i)=>{const s=n.getNode(o),a=n.getNode(i);let u=0,d=0;if(u+=s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":d=-s.data.width/2;break;case"r":d=s.data.width/2}if(d&&(u+=r?d:-d),d=0,u+=(s.data.dummy?e:t)/2,u+=(a.data.dummy?e:t)/2,u+=a.data.width/2,a.data.labelpos)switch((a.data.labelpos||"").toLowerCase()){case"l":d=a.data.width/2;break;case"r":d=-a.data.width/2}return d&&(u+=r?d:-d),d=0,u},nt=(t,e)=>t.getNode(e).data.width||0,ot=(t,e)=>{var r;const n=E(t);((t,e)=>{const{ranksep:r=0}=e||{},n=_(t);let o=0;null==n||n.forEach((e=>{const n=e.map((e=>t.getNode(e).data.height)),i=Math.max(...n,0);null==e||e.forEach((e=>{t.getNode(e).data.y=o+i/2})),o+=i+r}))})(n,e);const o=((t,e)=>{const{align:r,nodesep:n=0,edgesep:o=0}=e||{},i=_(t),s=Object.assign(((t,e)=>{const r={};return(null==e?void 0:e.length)&&e.reduce(((e,n)=>{let o=0,i=0;const s=e.length,a=null==n?void 0:n[(null==n?void 0:n.length)-1];return null==n||n.forEach(((e,u)=>{var d;const h=Q(t,e),c=h?t.getNode(h.id).data.order:s;(h||e===a)&&(null===(d=n.slice(i,u+1))||void 0===d||d.forEach((e=>{var n;null===(n=t.getPredecessors(e))||void 0===n||n.forEach((n=>{var i;const s=t.getNode(n.id),a=s.data.order;!(a<o||c<a)||s.data.dummy&&(null===(i=t.getNode(e))||void 0===i?void 0:i.data.dummy)||Z(r,n.id,e)}))})),i=u+1,o=c)})),n})),r})(t,i),((t,e)=>{const r={};function n(e,n){const o=function(t){return JSON.stringify(t.slice(1))}(e);n.get(o)||(function(e,n,o,i,s){var a,u;let d;for(let h=n;h<o;h++)d=e[h],(null===(a=t.getNode(d))||void 0===a?void 0:a.data.dummy)&&(null===(u=t.getPredecessors(d))||void 0===u||u.forEach((e=>{const n=t.getNode(e.id);n.data.dummy&&(n.data.order<i||n.data.order>s)&&Z(r,e.id,d)})))}(...e),n.set(o,!0))}return(null==e?void 0:e.length)&&e.reduce(((e,r)=>{let o,i=-1,s=0;const a=new Map;return null==r||r.forEach(((u,d)=>{var h;if("border"===(null===(h=t.getNode(u))||void 0===h?void 0:h.data.dummy)){const e=t.getPredecessors(u)||[];e.length&&(o=t.getNode(e[0].id).data.order,n([r,s,d,i,o],a),s=d,i=o)}n([r,s,r.length,o,e.length],a)})),r})),r})(t,i)),a={};let u=[];["u","d"].forEach((e=>{u="u"===e?i:Object.values(i).reverse(),["l","r"].forEach((r=>{"r"===r&&(u=u.map((t=>Object.values(t).reverse())));const i=("u"===e?t.getPredecessors:t.getSuccessors).bind(t),d=((t,e,r,n)=>{const o={},i={},s={};return null==e||e.forEach((t=>{null==t||t.forEach(((t,e)=>{o[t]=t,i[t]=t,s[t]=e}))})),null==e||e.forEach((t=>{let e=-1;null==t||t.forEach((t=>{let a=n(t).map((t=>t.id));if(a.length){a=a.sort(((t,e)=>s[t]-s[e]));const n=(a.length-1)/2;for(let u=Math.floor(n),d=Math.ceil(n);u<=d;++u){const n=a[u];i[t]===t&&e<s[n]&&!tt(r,t,n)&&(i[n]=t,i[t]=o[t]=o[n],e=s[n])}}}))})),{root:o,align:i}})(0,u,s,i),h=((t,e,r,n,o,i,s)=>{var a;const u={},d=et(t,e,r,o,i,s),h=s?"borderLeft":"borderRight",c=(t,e)=>{let r=d.getAllNodes(),n=r.pop();const o={};for(;n;)o[n.id]?t(n.id):(o[n.id]=!0,r.push(n),r=r.concat(e(n.id))),n=r.pop()};return c((t=>{u[t]=(d.getRelatedEdges(t,"in")||[]).reduce(((t,e)=>Math.max(t,(u[e.source]||0)+e.data.weight)),0)}),d.getPredecessors.bind(d)),c((e=>{const r=(d.getRelatedEdges(e,"out")||[]).reduce(((t,e)=>Math.min(t,(u[e.target]||0)-e.data.weight)),Number.POSITIVE_INFINITY),n=t.getNode(e);r!==Number.POSITIVE_INFINITY&&n.data.borderType!==h&&(u[e]=Math.max(u[e],r))}),d.getSuccessors.bind(d)),null===(a=Object.values(n))||void 0===a||a.forEach((t=>{u[t]=u[r[t]]})),u})(t,u,d.root,d.align,n,o,"r"===r);"r"===r&&Object.keys(h).forEach((t=>h[t]=-h[t])),a[e+r]=h}))}));const d=((t,e)=>A(Object.values(e),(e=>{var r;let n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null===(r=Object.keys(e))||void 0===r||r.forEach((r=>{const i=e[r],s=nt(t,r)/2;n=Math.max(i+s,n),o=Math.min(i-s,o)})),n-o})))(t,a);return d&&function(t,e){const r=Object.values(e),n=Math.min(...r),o=Math.max(...r);["u","d"].forEach((r=>{["l","r"].forEach((i=>{const s=r+i,a=t[s];let u;if(a===e)return;const d=Object.values(a);u="l"===i?n-Math.min(...d):o-Math.max(...d),u&&(t[s]={},Object.keys(a).forEach((e=>{t[s][e]=a[e]+u})))}))}))}(a,d),((t,e)=>{const r={};return Object.keys(t.ul).forEach((n=>{if(e)r[n]=t[e.toLowerCase()][n];else{const e=Object.values(t).map((t=>t[n]));r[n]=(e[0]+e[1])/2}})),r})(a,r)})(n,e);null===(r=Object.keys(o))||void 0===r||r.forEach((t=>{n.getNode(t).data.x=o[t]}))},it=t=>{const e={},r=n=>{var o;const i=t.getNode(n);if(!i)return 0;if(e[n])return i.data.rank;let s;return e[n]=!0,null===(o=t.getRelatedEdges(n,"out"))||void 0===o||o.forEach((t=>{const e=r(t.target)-t.data.minlen;e&&(void 0===s||e<s)&&(s=e)})),s||(s=0),i.data.rank=s,s};t.getAllNodes().filter((e=>0===t.getRelatedEdges(e.id,"in").length)).forEach((t=>r(t.id)))},st=(t,e)=>t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen,at=(t,e)=>{const r=n=>{e.getRelatedEdges(n,"both").forEach((o=>{const i=o.source,s=n===i?o.target:i;t.hasNode(s)||st(e,o)||(t.addNode({id:s,data:{}}),t.addEdge({id:o.id,source:n,target:s,data:{}}),r(s))}))};return t.getAllNodes().forEach((t=>r(t.id))),t.getAllNodes().length},ut=(t,e)=>{const r=n=>{var o;null===(o=e.getRelatedEdges(n,"both"))||void 0===o||o.forEach((o=>{const i=o.source,s=n===i?o.target:i;t.hasNode(s)||void 0===e.getNode(s).data.layer&&st(e,o)||(t.addNode({id:s,data:{}}),t.addEdge({id:o.id,source:n,target:s,data:{}}),r(s))}))};return t.getAllNodes().forEach((t=>r(t.id))),t.getAllNodes().length},dt=(t,e)=>A(e.getAllEdges(),(r=>t.hasNode(r.source)!==t.hasNode(r.target)?st(e,r):1/0)),ht=(t,e,r)=>{t.getAllNodes().forEach((t=>{const n=e.getNode(t.id);n.data.rank||(n.data.rank=0),n.data.rank+=r}))},ct=(t,e)=>{let r=O(t,t.getAllNodes(),"post",!1);r=r.slice(0,(null==r?void 0:r.length)-1),r.forEach((r=>{lt(t,e,r)}))},lt=(t,e,r)=>{const n=t.getNode(r).data.parent;t.getRelatedEdges(r,"both").find((t=>t.target===n||t.source===n)).data.cutvalue=ft(t,e,r)},ft=(t,e,r)=>{const n=t.getNode(r).data.parent;let o=!0,i=e.getRelatedEdges(r,"out").find((t=>t.target===n)),s=0;return i||(o=!1,i=e.getRelatedEdges(n,"out").find((t=>t.target===r))),s=i.data.weight,e.getRelatedEdges(r,"both").forEach((e=>{const i=e.source===r,a=i?e.target:e.source;if(a!==n){const n=i===o,u=e.data.weight;if(s+=n?u:-u,xt(t,r,a)){const e=t.getRelatedEdges(r,"both").find((t=>t.source===a||t.target===a)).data.cutvalue;s+=n?-e:e}}})),s},gt=(t,e=t.getAllNodes()[0].id)=>{pt(t,{},1,e)},pt=(t,e,r,n,o)=>{var i;const s=r;let a=r;const u=t.getNode(n);return e[n]=!0,null===(i=t.getNeighbors(n))||void 0===i||i.forEach((r=>{e[r.id]||(a=pt(t,e,a,r.id,n))})),u.data.low=s,u.data.lim=a++,o?u.data.parent=o:delete u.data.parent,a},vt=t=>t.getAllEdges().find((t=>t.data.cutvalue<0)),yt=(t,e,r)=>{let n=r.source,o=r.target;e.getRelatedEdges(n,"out").find((t=>t.target===o))||(n=r.target,o=r.source);const i=t.getNode(n),s=t.getNode(o);let a=i,u=!1;i.data.lim>s.data.lim&&(a=s,u=!0);const d=e.getAllEdges().filter((e=>u===bt(t.getNode(e.source),a)&&u!==bt(t.getNode(e.target),a)));return A(d,(t=>st(e,t)))},mt=(t,e,r,n)=>{const o=t.getRelatedEdges(r.source,"both").find((t=>t.source===r.target||t.target===r.target));o&&t.removeEdge(o.id),t.addEdge({id:`e${Math.random()}`,source:n.source,target:n.target,data:{}}),gt(t),ct(t,e),wt(t,e)},wt=(t,e)=>{const r=t.getAllNodes().find((t=>!t.data.parent));let n=O(t,r,"pre",!1);n=n.slice(1),n.forEach((r=>{const n=t.getNode(r).data.parent;let o=e.getRelatedEdges(r,"out").find((t=>t.target===n)),i=!1;!o&&e.hasNode(n)&&(o=e.getRelatedEdges(n,"out").find((t=>t.target===r)),i=!0),e.getNode(r).data.rank=(e.hasNode(n)&&e.getNode(n).data.rank||0)+(i?null==o?void 0:o.data.minlen:-(null==o?void 0:o.data.minlen))}))},xt=(t,e,r)=>t.getRelatedEdges(e,"both").find((t=>t.source===r||t.target===r)),bt=(t,e)=>e.data.low<=t.data.lim&&t.data.lim<=e.data.lim,Et=it,Nt=t=>{(t=>{const e=(t=>{const e=new u;return t.getAllNodes().forEach((t=>{e.addNode(Object.assign({},t))})),t.getAllEdges().forEach((t=>{const r=e.getRelatedEdges(t.source,"out").find((e=>e.target===t.target));r?e.updateEdgeData(null==r?void 0:r.id,Object.assign(Object.assign({},r.data),{weight:r.data.weight+t.data.weight||0,minlen:Math.max(r.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})})),e})(t);it(e);const r=(t=>{const e=new u({tree:[]}),r=t.getAllNodes()[0],n=t.getAllNodes().length;let o,i;for(e.addNode(r);at(e,t)<n;)o=dt(e,t),i=e.hasNode(o.source)?st(t,o):-st(t,o),ht(e,t,i);return e})(e);let n,o;for(gt(r),ct(r,e);n=vt(r);)o=yt(r,e,n),mt(r,e,n,o)})(t)},_t=(t,e)=>{const{acyclicer:r,ranker:n,rankdir:o="tb",nodeOrder:i,keepNodeOrder:s,align:a,nodesep:d=50,edgesep:h=20,ranksep:c=50}=e;Lt(t),w(t,r);const{nestingRoot:l,nodeRankFactor:f}=(t=>{const e=b(t,"root",{},"_root"),r=(t=>{const e={},r=(n,o)=>{const i=t.getChildren(n);null==i||i.forEach((t=>r(t.id,o+1))),e[n]=o};return t.getRoots().forEach((t=>r(t.id,1))),e})(t);let n=Math.max(...Object.values(r));Math.abs(n)===1/0&&(n=1);const o=n-1,i=2*o+1;t.getAllEdges().forEach((t=>{t.data.minlen*=i}));const s=(t=>{let e=0;return t.getAllEdges().forEach((t=>{e+=t.data.weight})),e})(t)+1;return t.getRoots().forEach((n=>{C(t,e,i,s,o,r,n.id)})),{nestingRoot:e,nodeRankFactor:i}})(t);((t,e)=>{switch(e){case"network-simplex":Nt(t);break;case"tight-tree":default:(t=>{(t=>{const e={};let r;const n=o=>{var i;const s=t.getNode(o);if(!s)return 0;if(e[o])return s.data.rank;let a;return e[o]=!0,null===(i=t.getRelatedEdges(o,"out"))||void 0===i||i.forEach((t=>{const e=n(t.target)-t.data.minlen;e&&(void 0===a||e<a)&&(a=e)})),a||(a=0),(void 0===r||a<r)&&(r=a),s.data.rank=a,a};t.getAllNodes().filter((e=>0===t.getRelatedEdges(e.id,"in").length)).forEach((t=>{t&&n(t.id)})),void 0===r&&(r=0);const o={},i=(e,r)=>{var n;const s=t.getNode(e),a=isNaN(s.data.layer)?r:s.data.layer;(void 0===s.data.rank||s.data.rank<a)&&(s.data.rank=a),o[e]||(o[e]=!0,null===(n=t.getRelatedEdges(e,"out"))||void 0===n||n.forEach((t=>{i(t.target,a+t.data.minlen)})))};t.getAllNodes().forEach((t=>{const e=t.data;e&&(isNaN(e.layer)?e.rank-=r:i(t.id,e.layer))}))})(t),(t=>{const e=new u({tree:[]}),r=t.getAllNodes()[0],n=t.getAllNodes().length;let o,i;for(e.addNode(r);ut(e,t)<n;)o=dt(e,t),i=e.hasNode(o.source)?st(t,o):-st(t,o),ht(e,t,i)})(t)})(t);break;case"longest-path":Et(t)}})(E(t),n),St(t),((t,e=0)=>{const r=t.getAllNodes(),n=r.filter((t=>void 0!==t.data.rank)).map((t=>t.data.rank)),o=Math.min(...n),i=[];r.forEach((t=>{const e=(t.data.rank||0)-o;i[e]||(i[e]=[]),i[e].push(t.id)}));let s=0;for(let r=0;r<i.length;r++){const n=i[r];void 0===n?r%e!=0&&(s-=1):s&&(null==n||n.forEach((e=>{const r=t.getNode(e);r&&(r.data.rank=r.data.rank||0,r.data.rank+=s)})))}})(t,f),((t,e)=>{e&&t.removeNode(e),t.getAllEdges().forEach((e=>{e.data.nestingEdge&&t.removeEdge(e.id)}))})(t,l),(t=>{const e=t.getAllNodes().filter((t=>void 0!==t.data.rank)).map((t=>t.data.rank)),r=Math.min(...e);t.getAllNodes().forEach((t=>{t.data.hasOwnProperty("rank")&&r!==1/0&&(t.data.rank-=r)}))})(t),zt(t),Rt(t);const g=[];((t,e)=>{t.getAllEdges().forEach((r=>((t,e,r)=>{let n=e.source,o=t.getNode(n).data.rank;const i=e.target,s=t.getNode(i).data.rank,a=e.data.labelRank;if(s===o+1)return;let u,d,h;for(t.removeEdge(e.id),h=0,++o;o<s;++h,++o)e.data.points=[],d={originalEdge:e,width:0,height:0,rank:o},u=b(t,"edge",d,"_d"),o===a&&(d.width=e.data.width,d.height=e.data.height,d.dummy=D,d.labelpos=e.data.labelpos),t.addEdge({id:`e${Math.random()}`,source:n,target:u,data:{weight:e.data.weight}}),0===h&&r.push(u),n=u;t.addEdge({id:`e${Math.random()}`,source:n,target:i,data:{weight:e.data.weight}})})(t,r,e)))})(t,g),((t,e)=>{const r=(t=>{const e={};let r=0;const n=o=>{const i=r;t.getChildren(o).forEach((t=>n(t.id))),e[o]={low:i,lim:r++}};return t.getRoots().forEach((t=>n(t.id))),e})(t);e.forEach((e=>{var n,o;let i=e,s=t.getNode(i);const a=s.data.originalEdge;if(!a)return;const u=((t,e,r,n)=>{var o,i;const s=[],a=[],u=Math.min(e[r].low,e[n].low),d=Math.max(e[r].lim,e[n].lim);let h,c;h=r;do{h=null===(o=t.getParent(h))||void 0===o?void 0:o.id,s.push(h)}while(h&&(e[h].low>u||d>e[h].lim));for(c=h,h=n;h&&h!==c;)a.push(h),h=null===(i=t.getParent(h))||void 0===i?void 0:i.id;return{lca:c,path:s.concat(a.reverse())}})(t,r,a.source,a.target),d=u.path,h=u.lca;let c=0,l=d[c],f=!0;for(;i!==a.target;){if(s=t.getNode(i),f){for(;l!==h&&(null===(n=t.getNode(l))||void 0===n?void 0:n.data.maxRank)<s.data.rank;)c++,l=d[c];l===h&&(f=!1)}if(!f){for(;c<d.length-1&&(null===(o=t.getNode(d[c+1]))||void 0===o?void 0:o.data.minRank)<=s.data.rank;)c++;l=d[c]}t.hasNode(l)&&t.setParent(i,l),i=t.getSuccessors(i)[0].id}}))})(t,g),(t=>{const e=r=>{const n=t.getChildren(r),o=t.getNode(r);if((null==n?void 0:n.length)&&n.forEach((t=>e(t.id))),o.data.hasOwnProperty("minRank")){o.data.borderLeft=[],o.data.borderRight=[];for(let e=o.data.minRank,n=o.data.maxRank+1;e<n;e+=1)S(t,"borderLeft","_bl",r,o,e),S(t,"borderRight","_br",r,o,e)}};t.getRoots().forEach((t=>e(t.id)))})(t),s&&((t,e)=>{const r=t.getAllNodes().filter((e=>{var r;return!(null===(r=t.getChildren(e.id))||void 0===r?void 0:r.length)})).map((t=>t.data.rank)),n=Math.max(...r),o=[];for(let t=0;t<n+1;t++)o[t]=[];null==e||e.forEach((e=>{const r=t.getNode(e);r&&!r.data.dummy&&(isNaN(r.data.rank)||(r.data.fixorder=o[r.data.rank].length,o[r.data.rank].push(e)))}))})(t,i),((t,e)=>{const r=k(t),n=[],o=[];for(let t=1;t<r+1;t++)n.push(t);for(let t=r-1;t>-1;t--)o.push(t);const i=K(t,n,"in"),s=K(t,o,"out");let a=B(t);X(t,a);let u,d=Number.POSITIVE_INFINITY;for(let r=0,n=0;n<4;++r,++n){J(r%2?i:s,r%4>=2,!1,e),a=_(t);const o=V(t,a);o<d&&(n=0,u=F(a),d=o)}a=B(t),X(t,a);for(let r=0,n=0;n<4;++r,++n){J(r%2?i:s,r%4>=2,!0,e),a=_(t);const o=V(t,a);o<d&&(n=0,u=F(a),d=o)}X(t,u)})(t,s),Ft(t),((t,e)=>{const r=e.toLowerCase();"lr"!==r&&"rl"!==r||z(t)})(t,o),ot(t,{align:a,nodesep:d,edgesep:h,ranksep:c}),qt(t),Tt(t),((t,e)=>{e.forEach((e=>{let r=t.getNode(e);const{data:n}=r,o=n.originalEdge;let i;o&&t.addEdge(o);let s=e;for(;r.data.dummy;)i=t.getSuccessors(s)[0],t.removeNode(s),o.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===D&&(o.data.x=r.data.x,o.data.y=r.data.y,o.data.width=r.data.width,o.data.height=r.data.height),s=i.id,r=t.getNode(s)}))})(t,g),Ct(t),((t,e)=>{const r=e.toLowerCase();"bt"!==r&&"rl"!==r||(t=>{t.getAllNodes().forEach((t=>{I(t.data)})),t.getAllEdges().forEach((t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach((t=>I(t))),t.data.hasOwnProperty("y")&&I(t.data)}))})(t),"lr"!==r&&"rl"!==r||((t=>{t.getAllNodes().forEach((t=>{P(t.data)})),t.getAllEdges().forEach((t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach((t=>P(t))),t.data.hasOwnProperty("x")&&P(t.data)}))})(t),z(t))})(t,o);const{width:p,height:v}=It(t);return Pt(t),Dt(t),(t=>{t.getAllEdges().forEach((e=>{const r=e.data;if(r.reversed){t.removeEdge(e.id);const n=r.forwardName;delete r.reversed,delete r.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},r),{forwardName:n})})}}))})(t),{width:p,height:v}},Mt=["width","height","layer","fixorder"],kt={width:0,height:0},At=["minlen","weight","width","height","labeloffset"],jt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ot=["labelpos"],St=t=>{t.getAllEdges().forEach((e=>{if(e.data.width&&e.data.height){const r=t.getNode(e.source),n={e,rank:(t.getNode(e.target).data.rank-r.data.rank)/2+r.data.rank};b(t,"edge-proxy",n,"_ep")}}))},zt=t=>{let e=0;return t.getAllNodes().forEach((r=>{var n,o;r.data.borderTop&&(r.data.minRank=null===(n=t.getNode(r.data.borderTop))||void 0===n?void 0:n.data.rank,r.data.maxRank=null===(o=t.getNode(r.data.borderBottom))||void 0===o?void 0:o.data.rank,e=Math.max(e,r.data.maxRank||-1/0))})),e},Rt=t=>{t.getAllNodes().forEach((e=>{"edge-proxy"===e.data.dummy&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))}))},It=(t,e)=>{let r,n,o=0,i=0;const{marginx:s=0,marginy:a=0}=e||{},u=t=>{if(!t.data)return;const e=t.data.x,s=t.data.y,a=t.data.width,u=t.data.height;isNaN(e)||isNaN(a)||(void 0===r&&(r=e-a/2),r=Math.min(r,e-a/2),o=Math.max(o,e+a/2)),isNaN(s)||isNaN(u)||(void 0===n&&(n=s-u/2),n=Math.min(n,s-u/2),i=Math.max(i,s+u/2))};return t.getAllNodes().forEach((t=>{u(t)})),t.getAllEdges().forEach((t=>{(null==t?void 0:t.data.hasOwnProperty("x"))&&u(t)})),r-=s,n-=a,t.getAllNodes().forEach((t=>{t.data.x-=r,t.data.y-=n})),t.getAllEdges().forEach((t=>{var e;null===(e=t.data.points)||void 0===e||e.forEach((t=>{t.x-=r,t.y-=n})),t.data.hasOwnProperty("x")&&(t.data.x-=r),t.data.hasOwnProperty("y")&&(t.data.y-=n)})),{width:o-r+s,height:i-n+a}},Pt=t=>{t.getAllEdges().forEach((e=>{const r=t.getNode(e.source),n=t.getNode(e.target);let o,i;e.data.points?(o=e.data.points[0],i=e.data.points[e.data.points.length-1]):(e.data.points=[],o={x:n.data.x,y:n.data.y},i={x:r.data.x,y:r.data.y}),e.data.points.unshift(N(r.data,o)),e.data.points.push(N(n.data,i))}))},Ct=t=>{t.getAllEdges().forEach((t=>{if(t.data.hasOwnProperty("x"))switch("l"!==t.data.labelpos&&"r"!==t.data.labelpos||(t.data.width-=t.data.labeloffset),t.data.labelpos){case"l":t.data.x-=t.data.width/2+t.data.labeloffset;break;case"r":t.data.x+=t.data.width/2+t.data.labeloffset}}))},Dt=t=>{t.getAllEdges().forEach((t=>{var e;t.data.reversed&&(null===(e=t.data.points)||void 0===e||e.reverse())}))},Tt=t=>{t.getAllNodes().forEach((e=>{var r,n,o;if(null===(r=t.getChildren(e.id))||void 0===r?void 0:r.length){const r=t.getNode(e.id),i=t.getNode(r.data.borderTop),s=t.getNode(r.data.borderBottom),a=t.getNode(r.data.borderLeft[(null===(n=r.data.borderLeft)||void 0===n?void 0:n.length)-1]),u=t.getNode(r.data.borderRight[(null===(o=r.data.borderRight)||void 0===o?void 0:o.length)-1]);r.data.width=Math.abs((null==u?void 0:u.data.x)-(null==a?void 0:a.data.x))||10,r.data.height=Math.abs((null==s?void 0:s.data.y)-(null==i?void 0:i.data.y))||10,r.data.x=((null==a?void 0:a.data.x)||0)+r.data.width/2,r.data.y=((null==i?void 0:i.data.y)||0)+r.data.height/2}})),t.getAllNodes().forEach((e=>{"border"===e.data.dummy&&t.removeNode(e.id)}))},Lt=t=>{t.getAllEdges().forEach((e=>{if(e.source===e.target){const r=t.getNode(e.source);r.data.selfEdges||(r.data.selfEdges=[]),r.data.selfEdges.push(e),t.removeEdge(e.id)}}))},Ft=t=>{const e=_(t);null==e||e.forEach((e=>{let r=0;null==e||e.forEach(((e,n)=>{var o;const i=t.getNode(e);i.data.order=n+r,null===(o=i.data.selfEdges)||void 0===o||o.forEach((e=>{b(t,"selfedge",{width:e.data.width,height:e.data.height,rank:i.data.rank,order:n+ ++r,e},"_se")})),delete i.data.selfEdges}))}))},qt=t=>{t.getAllNodes().forEach((e=>{const r=t.getNode(e.id);if("selfedge"===r.data.dummy){const n=t.getNode(r.data.e.source),o=n.data.x+n.data.width/2,i=n.data.y,s=r.data.x-o,a=n.data.height/2;t.hasEdge(r.data.e.id)?t.updateEdgeData(r.data.e.id,r.data.e.data):t.addEdge({id:r.data.e.id,source:r.data.e.source,target:r.data.e.target,data:r.data.e.data}),t.removeNode(e.id),r.data.e.data.points=[{x:o+2*s/3,y:i-a},{x:o+5*s/6,y:i-a},{y:i,x:o+s},{x:o+5*s/6,y:i+a},{x:o+2*s/3,y:i+a}],r.data.e.data.x=r.data.x,r.data.e.data.y=r.data.y}}))},Vt=(t,e)=>{const r={};return null==e||e.forEach((e=>{void 0!==t[e]&&(r[e]=+t[e])})),r},Bt=(t={})=>{const e={};return Object.keys(t).forEach((r=>{e[r.toLowerCase()]=t[r]})),e},$t=function(t){return"function"==typeof t},Gt=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function Ut(t){if(!t)return[0,0,0];if(c(t))return[t,t,t];if(0===t.length)return[0,0,0];const[e,r=e,n=e]=t;return[e,r,n]}function Wt(t,e){let r;return r=$t(e)?e:c(e)?()=>e:()=>t,r}function Yt(t,e,r=!0){return e||0===e?$t(e)?e:c(e)?()=>e:Array.isArray(e)?()=>r?Math.max(...e)||t:e:Gt(e)&&e.width&&e.height?()=>r?Math.max(e.width,e.height)||t:[e.width,e.height]:()=>t:e=>{const{size:n}=e.data||{};return n?Array.isArray(n)?r?Math.max(...n)||t:n:Gt(n)&&n.width&&n.height?r?Math.max(n.width,n.height)||t:[n.width,n.height]:n:t}}const Ht=(t,e,r=10)=>{let n;const o="function"==typeof e?e:()=>e||0;return n=t?Array.isArray(t)?e=>t:$t(t)?t:e=>t:t=>{var e,n,o;if(null===(e=t.data)||void 0===e?void 0:e.bboxSize)return null===(n=t.data)||void 0===n?void 0:n.bboxSize;if(null===(o=t.data)||void 0===o?void 0:o.size){const e=t.data.size;return Array.isArray(e)?e:Gt(e)?[e.width,e.height]:e}return r},t=>{const e=n(t),r=o(t);return Math.max(...Ut(e))+r}},Kt=t=>{if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){const e=[];return t.forEach((t=>{e.push(t)})),e.map((t=>Kt(t)))}if("object"==typeof t){const e={};return Object.keys(t).forEach((r=>{e[r]=Kt(t[r])})),e}return t},Jt=(t,e)=>{const r=Kt(t);return r.data=r.data||{},e&&(c(r.data.x)||(r.data.x=Math.random()*e[0]),c(r.data.y)||(r.data.y=Math.random()*e[1])),r},Xt={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null},Qt=(t,e,r)=>{const n=t.getAllNodes(),o=t.getAllEdges();return(null==n?void 0:n.length)?1===n.length?(e&&t.mergeNodeData(n[0].id,{x:r[0],y:r[1]}),{nodes:[Object.assign(Object.assign({},n[0]),{data:Object.assign(Object.assign({},n[0].data),{x:r[0],y:r[1]})})],edges:o}):void 0:{nodes:[],edges:o}},Zt={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1},te=(t,e,r=!1)=>{const n=[Jt(e[0])],o={},i=e.length;o[e[0].id]=!0;let s=0;return e.forEach(((a,u)=>{if(0!==u)if(u!==i-1&&t.getDegree(a.id,"both")===t.getDegree(e[u+1].id,"both")&&!t.areNeighbors(n[s].id,a.id)||o[a.id]){const u=r?t.getSuccessors(n[s].id):t.getNeighbors(n[s].id);let d=!1;for(let e=0;e<u.length;e++){const r=u[e];if(t.getDegree(r.id)===t.getDegree(a.id)&&!o[r.id]){n.push(Jt(r)),o[r.id]=!0,d=!0;break}}let h=0;for(;!d&&(o[e[h].id]||(n.push(Jt(e[h])),o[e[h].id]=!0,d=!0),h++,h!==i););}else n.push(Jt(a)),o[a.id]=!0,s++})),n},ee=function(t){return h(t,"String")},re=Array.isArray,ne={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class oe{constructor(t={}){this.options=t,this.id="concentric",this.options=Object.assign(Object.assign({},ne),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericConcentricLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericConcentricLayout(!0,e,r)}))}genericConcentricLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{center:o,width:i,height:s,sortBy:a,maxLevelDiff:u,sweep:d,clockwise:h,equidistant:l,preventOverlap:f,startAngle:g=1.5*Math.PI,nodeSize:p,nodeSpacing:v}=t,y=r.getAllNodes(),m=r.getAllEdges(),w=i||"undefined"==typeof window?i:window.innerWidth,x=s||"undefined"==typeof window?s:window.innerHeight,b=o||[w/2,x/2];if(!(null==y?void 0:y.length)||1===y.length)return Qt(r,e,b);const E=[];let N,_=0;re(p)?N=Math.max(p[0],p[1]):$t(p)?(N=-1/0,y.forEach((t=>{const e=Math.max(...Ut(p(t)));e>N&&(N=e)}))):N=p,re(v)?_=Math.max(v[0],v[1]):c(v)&&(_=v),y.forEach((t=>{const e=Jt(t);E.push(e);let r=N;const{data:n}=e;re(n.size)?r=Math.max(n.size[0],n.size[1]):c(n.size)?r=n.size:Gt(n.size)&&(r=Math.max(n.size.width,n.size.height)),N=Math.max(N,r),$t(v)&&(_=Math.max(v(t),_))}));const M={};E.forEach(((t,e)=>{M[t.id]=e}));let k=a;ee(k)&&void 0!==E[0].data[k]||(k="degree"),"degree"===k?E.sort(((t,e)=>r.getDegree(e.id,"both")-r.getDegree(t.id,"both"))):E.sort(((t,e)=>e.data[k]-t.data[k]));const A=E[0],j=(u||("degree"===k?r.getDegree(A.id,"both"):A.data[k]))/4,O=[{nodes:[]}];let S=O[0];E.forEach((t=>{if(S.nodes.length>0){const e="degree"===k?Math.abs(r.getDegree(S.nodes[0].id,"both")-r.getDegree(t.id,"both")):Math.abs(S.nodes[0].data[k]-t.data[k]);j&&e>=j&&(S={nodes:[]},O.push(S))}S.nodes.push(t)}));let z=N+_;if(!f){const t=O.length>0&&O[0].nodes.length>1,e=(Math.min(w,x)/2-z)/(O.length+(t?1:0));z=Math.min(z,e)}let R=0;if(O.forEach((t=>{const e=void 0===d?2*Math.PI-2*Math.PI/t.nodes.length:d;if(t.dTheta=e/Math.max(1,t.nodes.length-1),t.nodes.length>1&&f){const e=Math.cos(t.dTheta)-Math.cos(0),r=Math.sin(t.dTheta)-Math.sin(0),n=Math.sqrt(z*z/(e*e+r*r));R=Math.max(n,R)}t.r=R,R+=z})),l){let t=0,e=0;for(let r=0;r<O.length;r++){const n=(O[r].r||0)-e;t=Math.max(t,n)}e=0,O.forEach(((r,n)=>{0===n&&(e=r.r||0),r.r=e,e+=t}))}return O.forEach((t=>{const e=t.dTheta||0,r=t.r||0;t.nodes.forEach(((t,n)=>{const o=g+(h?1:-1)*e*n;t.data.x=b[0]+r*Math.cos(o),t.data.y=b[1]+r*Math.sin(o)}))})),e&&E.forEach((t=>r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y}))),{nodes:E,edges:m}}))}}function ie(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var o,i,s,a,u,d,h,c,l,f=t._root,g={data:n},p=t._x0,v=t._y0,y=t._x1,m=t._y1;if(!f)return t._root=g,t;for(;f.length;)if((d=e>=(i=(p+y)/2))?p=i:y=i,(h=r>=(s=(v+m)/2))?v=s:m=s,o=f,!(f=f[c=h<<1|d]))return o[c]=g,t;if(a=+t._x.call(null,f.data),u=+t._y.call(null,f.data),e===a&&r===u)return g.next=f,o?o[c]=g:t._root=g,t;do{o=o?o[c]=new Array(4):t._root=new Array(4),(d=e>=(i=(p+y)/2))?p=i:y=i,(h=r>=(s=(v+m)/2))?v=s:m=s}while((c=h<<1|d)==(l=(u>=s)<<1|a>=i));return o[l]=f,o[c]=g,t}function se(t,e,r,n,o){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=o}function ae(t){return t[0]}function ue(t){return t[1]}function de(t,e,r){var n=new he(null==e?ae:e,null==r?ue:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function he(t,e,r,n,o,i){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=o,this._y1=i,this._root=void 0}function ce(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var le=de.prototype=he.prototype;function fe(t,e,r,n,o){if(isNaN(e)||isNaN(r)||isNaN(n))return t;var i,s,a,u,d,h,c,l,f,g,p,v,y=t._root,m={data:o},w=t._x0,x=t._y0,b=t._z0,E=t._x1,N=t._y1,_=t._z1;if(!y)return t._root=m,t;for(;y.length;)if((l=e>=(s=(w+E)/2))?w=s:E=s,(f=r>=(a=(x+N)/2))?x=a:N=a,(g=n>=(u=(b+_)/2))?b=u:_=u,i=y,!(y=y[p=g<<2|f<<1|l]))return i[p]=m,t;if(d=+t._x.call(null,y.data),h=+t._y.call(null,y.data),c=+t._z.call(null,y.data),e===d&&r===h&&n===c)return m.next=y,i?i[p]=m:t._root=m,t;do{i=i?i[p]=new Array(8):t._root=new Array(8),(l=e>=(s=(w+E)/2))?w=s:E=s,(f=r>=(a=(x+N)/2))?x=a:N=a,(g=n>=(u=(b+_)/2))?b=u:_=u}while((p=g<<2|f<<1|l)==(v=(c>=u)<<2|(h>=a)<<1|d>=s));return i[v]=y,i[p]=m,t}function ge(t,e,r,n,o,i,s){this.node=t,this.x0=e,this.y0=r,this.z0=n,this.x1=o,this.y1=i,this.z1=s}function pe(t){return t[0]}function ve(t){return t[1]}function ye(t){return t[2]}function me(t,e,r,n){var o=new we(null==e?pe:e,null==r?ve:r,null==n?ye:n,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function we(t,e,r,n,o,i,s,a,u){this._x=t,this._y=e,this._z=r,this._x0=n,this._y0=o,this._z0=i,this._x1=s,this._y1=a,this._z1=u,this._root=void 0}function xe(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}le.copy=function(){var t,e,r=new he(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=ce(n),r;for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(4)}):n.target[o]=ce(e));return r},le.add=function(t){const e=+this._x.call(null,t),r=+this._y.call(null,t);return ie(this.cover(e,r),e,r,t)},le.addAll=function(t){var e,r,n,o,i=t.length,s=new Array(i),a=new Array(i),u=1/0,d=1/0,h=-1/0,c=-1/0;for(r=0;r<i;++r)isNaN(n=+this._x.call(null,e=t[r]))||isNaN(o=+this._y.call(null,e))||(s[r]=n,a[r]=o,n<u&&(u=n),n>h&&(h=n),o<d&&(d=o),o>c&&(c=o));if(u>h||d>c)return this;for(this.cover(u,d).cover(h,c),r=0;r<i;++r)ie(this,s[r],a[r],t[r]);return this},le.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,o=this._x1,i=this._y1;if(isNaN(r))o=(r=Math.floor(t))+1,i=(n=Math.floor(e))+1;else{for(var s,a,u=o-r||1,d=this._root;r>t||t>=o||n>e||e>=i;)switch(a=(e<n)<<1|t<r,(s=new Array(4))[a]=d,d=s,u*=2,a){case 0:o=r+u,i=n+u;break;case 1:r=o-u,i=n+u;break;case 2:o=r+u,n=i-u;break;case 3:r=o-u,n=i-u}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=n,this._x1=o,this._y1=i,this},le.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},le.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},le.find=function(t,e,r){var n,o,i,s,a,u,d,h=this._x0,c=this._y0,l=this._x1,f=this._y1,g=[],p=this._root;for(p&&g.push(new se(p,h,c,l,f)),null==r?r=1/0:(h=t-r,c=e-r,l=t+r,f=e+r,r*=r);u=g.pop();)if(!(!(p=u.node)||(o=u.x0)>l||(i=u.y0)>f||(s=u.x1)<h||(a=u.y1)<c))if(p.length){var v=(o+s)/2,y=(i+a)/2;g.push(new se(p[3],v,y,s,a),new se(p[2],o,y,v,a),new se(p[1],v,i,s,y),new se(p[0],o,i,v,y)),(d=(e>=y)<<1|t>=v)&&(u=g[g.length-1],g[g.length-1]=g[g.length-1-d],g[g.length-1-d]=u)}else{var m=t-+this._x.call(null,p.data),w=e-+this._y.call(null,p.data),x=m*m+w*w;if(x<r){var b=Math.sqrt(r=x);h=t-b,c=e-b,l=t+b,f=e+b,n=p.data}}return n},le.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,r,n,o,i,s,a,u,d,h,c,l,f=this._root,g=this._x0,p=this._y0,v=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((d=i>=(a=(g+v)/2))?g=a:v=a,(h=s>=(u=(p+y)/2))?p=u:y=u,e=f,!(f=f[c=h<<1|d]))return this;if(!f.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(r=e,l=c)}for(;f.data!==t;)if(n=f,!(f=f.next))return this;return(o=f.next)&&delete f.next,n?(o?n.next=o:delete n.next,this):e?(o?e[c]=o:delete e[c],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(r?r[l]=f:this._root=f),this):(this._root=o,this)},le.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},le.root=function(){return this._root},le.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},le.visit=function(t){var e,r,n,o,i,s,a=[],u=this._root;for(u&&a.push(new se(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,n=e.x0,o=e.y0,i=e.x1,s=e.y1)&&u.length){var d=(n+i)/2,h=(o+s)/2;(r=u[3])&&a.push(new se(r,d,h,i,s)),(r=u[2])&&a.push(new se(r,n,h,d,s)),(r=u[1])&&a.push(new se(r,d,o,i,h)),(r=u[0])&&a.push(new se(r,n,o,d,h))}return this},le.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new se(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var o=e.node;if(o.length){var i,s=e.x0,a=e.y0,u=e.x1,d=e.y1,h=(s+u)/2,c=(a+d)/2;(i=o[0])&&r.push(new se(i,s,a,h,c)),(i=o[1])&&r.push(new se(i,h,a,u,c)),(i=o[2])&&r.push(new se(i,s,c,h,d)),(i=o[3])&&r.push(new se(i,h,c,u,d))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},le.x=function(t){return arguments.length?(this._x=t,this):this._x},le.y=function(t){return arguments.length?(this._y=t,this):this._y};var be=me.prototype=we.prototype;function Ee(t){let e=0,r=0,n=0,o=0,i=0;const s=t.length;if(s){for(let a=0;a<s;a++){const s=t[a];s&&s.weight&&(e+=s.weight,r+=s.x*s.weight,n+=s.y*s.weight,o+=s.z*s.weight,i+=s.size*s.weight)}t.x=r/e,t.y=n/e,t.z=o/e,t.size=i/e,t.weight=e}else{const e=t;t.x=e.data.x,t.y=e.data.y,t.z=e.data.z,t.size=e.data.size,t.weight=e.data.weight}}be.copy=function(){var t,e,r=new we(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root;if(!n)return r;if(!n.length)return r._root=xe(n),r;for(t=[{source:n,target:r._root=new Array(8)}];n=t.pop();)for(var o=0;o<8;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(8)}):n.target[o]=xe(e));return r},be.add=function(t){const e=+this._x.call(null,t),r=+this._y.call(null,t),n=+this._z.call(null,t);return fe(this.cover(e,r,n),e,r,n,t)},be.addAll=function(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,r=new Float64Array(e),n=new Float64Array(e),o=new Float64Array(e);let i=1/0,s=1/0,a=1/0,u=-1/0,d=-1/0,h=-1/0;for(let c,l,f,g,p=0;p<e;++p)isNaN(l=+this._x.call(null,c=t[p]))||isNaN(f=+this._y.call(null,c))||isNaN(g=+this._z.call(null,c))||(r[p]=l,n[p]=f,o[p]=g,l<i&&(i=l),l>u&&(u=l),f<s&&(s=f),f>d&&(d=f),g<a&&(a=g),g>h&&(h=g));if(i>u||s>d||a>h)return this;this.cover(i,s,a).cover(u,d,h);for(let i=0;i<e;++i)fe(this,r[i],n[i],o[i],t[i]);return this},be.cover=function(t,e,r){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(r=+r))return this;var n=this._x0,o=this._y0,i=this._z0,s=this._x1,a=this._y1,u=this._z1;if(isNaN(n))s=(n=Math.floor(t))+1,a=(o=Math.floor(e))+1,u=(i=Math.floor(r))+1;else{for(var d,h,c=s-n||1,l=this._root;n>t||t>=s||o>e||e>=a||i>r||r>=u;)switch(h=(r<i)<<2|(e<o)<<1|t<n,(d=new Array(8))[h]=l,l=d,c*=2,h){case 0:s=n+c,a=o+c,u=i+c;break;case 1:n=s-c,a=o+c,u=i+c;break;case 2:s=n+c,o=a-c,u=i+c;break;case 3:n=s-c,o=a-c,u=i+c;break;case 4:s=n+c,a=o+c,i=u-c;break;case 5:n=s-c,a=o+c,i=u-c;break;case 6:s=n+c,o=a-c,i=u-c;break;case 7:n=s-c,o=a-c,i=u-c}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=o,this._z0=i,this._x1=s,this._y1=a,this._z1=u,this},be.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},be.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},be.find=function(t,e,r,n){var o,i,s,a,u,d,h,c,l,f=this._x0,g=this._y0,p=this._z0,v=this._x1,y=this._y1,m=this._z1,w=[],x=this._root;for(x&&w.push(new ge(x,f,g,p,v,y,m)),null==n?n=1/0:(f=t-n,g=e-n,p=r-n,v=t+n,y=e+n,m=r+n,n*=n);c=w.pop();)if(!(!(x=c.node)||(i=c.x0)>v||(s=c.y0)>y||(a=c.z0)>m||(u=c.x1)<f||(d=c.y1)<g||(h=c.z1)<p))if(x.length){var b=(i+u)/2,E=(s+d)/2,N=(a+h)/2;w.push(new ge(x[7],b,E,N,u,d,h),new ge(x[6],i,E,N,b,d,h),new ge(x[5],b,s,N,u,E,h),new ge(x[4],i,s,N,b,E,h),new ge(x[3],b,E,a,u,d,N),new ge(x[2],i,E,a,b,d,N),new ge(x[1],b,s,a,u,E,N),new ge(x[0],i,s,a,b,E,N)),(l=(r>=N)<<2|(e>=E)<<1|t>=b)&&(c=w[w.length-1],w[w.length-1]=w[w.length-1-l],w[w.length-1-l]=c)}else{var _=t-+this._x.call(null,x.data),M=e-+this._y.call(null,x.data),k=r-+this._z.call(null,x.data),A=_*_+M*M+k*k;if(A<n){var j=Math.sqrt(n=A);f=t-j,g=e-j,p=r-j,v=t+j,y=e+j,m=r+j,o=x.data}}return o},be.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t))||isNaN(a=+this._z.call(null,t)))return this;var e,r,n,o,i,s,a,u,d,h,c,l,f,g,p,v=this._root,y=this._x0,m=this._y0,w=this._z0,x=this._x1,b=this._y1,E=this._z1;if(!v)return this;if(v.length)for(;;){if((c=i>=(u=(y+x)/2))?y=u:x=u,(l=s>=(d=(m+b)/2))?m=d:b=d,(f=a>=(h=(w+E)/2))?w=h:E=h,e=v,!(v=v[g=f<<2|l<<1|c]))return this;if(!v.length)break;(e[g+1&7]||e[g+2&7]||e[g+3&7]||e[g+4&7]||e[g+5&7]||e[g+6&7]||e[g+7&7])&&(r=e,p=g)}for(;v.data!==t;)if(n=v,!(v=v.next))return this;return(o=v.next)&&delete v.next,n?(o?n.next=o:delete n.next,this):e?(o?e[g]=o:delete e[g],(v=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&v===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!v.length&&(r?r[p]=v:this._root=v),this):(this._root=o,this)},be.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},be.root=function(){return this._root},be.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},be.visit=function(t){var e,r,n,o,i,s,a,u,d=[],h=this._root;for(h&&d.push(new ge(h,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=d.pop();)if(!t(h=e.node,n=e.x0,o=e.y0,i=e.z0,s=e.x1,a=e.y1,u=e.z1)&&h.length){var c=(n+s)/2,l=(o+a)/2,f=(i+u)/2;(r=h[7])&&d.push(new ge(r,c,l,f,s,a,u)),(r=h[6])&&d.push(new ge(r,n,l,f,c,a,u)),(r=h[5])&&d.push(new ge(r,c,o,f,s,l,u)),(r=h[4])&&d.push(new ge(r,n,o,f,c,l,u)),(r=h[3])&&d.push(new ge(r,c,l,i,s,a,f)),(r=h[2])&&d.push(new ge(r,n,l,i,c,a,f)),(r=h[1])&&d.push(new ge(r,c,o,i,s,l,f)),(r=h[0])&&d.push(new ge(r,n,o,i,c,l,f))}return this},be.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new ge(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=r.pop();){var o=e.node;if(o.length){var i,s=e.x0,a=e.y0,u=e.z0,d=e.x1,h=e.y1,c=e.z1,l=(s+d)/2,f=(a+h)/2,g=(u+c)/2;(i=o[0])&&r.push(new ge(i,s,a,u,l,f,g)),(i=o[1])&&r.push(new ge(i,l,a,u,d,f,g)),(i=o[2])&&r.push(new ge(i,s,f,u,l,h,g)),(i=o[3])&&r.push(new ge(i,l,f,u,d,h,g)),(i=o[4])&&r.push(new ge(i,s,a,g,l,f,c)),(i=o[5])&&r.push(new ge(i,l,a,g,d,f,c)),(i=o[6])&&r.push(new ge(i,s,f,g,l,h,c)),(i=o[7])&&r.push(new ge(i,l,f,g,d,h,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},be.x=function(t){return arguments.length?(this._x=t,this):this._x},be.y=function(t){return arguments.length?(this._y=t,this):this._y},be.z=function(t){return arguments.length?(this._z=t,this):this._z};const Ne=(t,e,r,n,o,i,s)=>{var a;if((null===(a=t.data)||void 0===a?void 0:a.id)===i.id)return;const u=[r,n,o][s-1],d=i.x-t.x||.1,h=i.y-t.y||.1,c=i.z-t.z||.1,l=[d,h,c],f=u-e;let g=0;for(let t=0;t<s;t++)g+=l[t]*l[t];const p=Math.sqrt(g)*g;if(f*f*.81<g){const e=t.weight/p;return i.vx+=d*e,i.vy+=h*e,i.vz+=c*e,!0}if(t.length)return!1;if(t.data!==i){const e=t.data.weight/p;i.vx+=d*e,i.vy+=h*e,i.vz+=c*e}},_e={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class Me{constructor(t={}){this.options=t,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},_e),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericForceLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericForceLayout(!0,e,r)}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}tick(t=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let e=0;(this.judgingDistance>this.lastOptions.minMovement||e<1)&&e<t;e++)this.runOneStep(this.lastCalcGraph,this.lastGraph,e,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const e={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&e.nodes.forEach((t=>this.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===this.options.dimensions?t.data.z:void 0}))),e}genericForceLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),o=r.getAllNodes(),i=r.getAllEdges(),s=this.formatOptions(t,r),{dimensions:a,width:d,height:h,nodeSize:l,getMass:f,nodeStrength:g,edgeStrength:p,linkDistance:v}=s,y=o.map(((t,e)=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{x:c(t.data.x)?t.data.x:Math.random()*d,y:c(t.data.y)?t.data.y:Math.random()*h,z:c(t.data.z)?t.data.z:Math.random()*Math.sqrt(d*h),size:l(t)||30,mass:f(t),nodeStrength:g(t)})}))),m=i.map((t=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{edgeStrength:p(t),linkDistance:v(t,r.getNode(t.source),r.getNode(t.target))})})));if(!(null==o?void 0:o.length))return this.lastResult={nodes:[],edges:i},{nodes:[],edges:i};const w={};o.forEach(((t,e)=>{w[t.id]={x:0,y:0,z:0}}));const x=new u({nodes:y,edges:m});this.formatCentripetal(s,x);const{maxIteration:b,minMovement:E,onTick:N}=s;if(this.lastLayoutNodes=y,this.lastLayoutEdges=m,this.lastAssign=e,this.lastGraph=r,this.lastCalcGraph=x,this.lastOptions=s,this.lastVelMap=w,"undefined"==typeof window)return;let _=0;return new Promise((t=>{this.timeInterval=window.setInterval((()=>{o&&this.running||t({nodes:Se(r,y),edges:i}),this.runOneStep(x,r,_,w,s),this.updatePosition(r,x,w,s),e&&y.forEach((t=>r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===a?t.data.z:void 0}))),null==N||N({nodes:Se(r,y),edges:i}),_++,(_>=b||this.judgingDistance<E)&&(window.clearInterval(this.timeInterval),t({nodes:Se(r,y),edges:i}))}),0),this.running=!0}))}))}formatOptions(t,e){const r=Object.assign({},t),{width:n,height:o,getMass:i}=t;r.width=n||"undefined"==typeof window?n:window.innerWidth,r.height=o||"undefined"==typeof window?o:window.innerHeight,t.center||(r.center=[r.width/2,r.height/2]),i||(r.getMass=t=>{let r=1;c(null==t?void 0:t.data.mass)&&(r=null==t?void 0:t.data.mass);const n=e.getDegree(t.id,"both");return!n||n<5?r:5*n*r}),r.nodeSize=Ht(t.nodeSize,t.nodeSpacing);const s=t.linkDistance?Wt(1,t.linkDistance):t=>1+r.nodeSize(e.getNode(t.source))+r.nodeSize(e.getNode(t.target));return r.linkDistance=s,r.nodeStrength=Wt(1,t.nodeStrength),r.edgeStrength=Wt(1,t.edgeStrength),r}formatCentripetal(t,e){const{dimensions:r,centripetalOptions:n,center:o,clusterNodeStrength:i,leafCluster:s,clustering:a,nodeClusterBy:u}=t,d=e.getAllNodes(),h=n||{leaf:2,single:2,others:1,center:t=>({x:o[0],y:o[1],z:3===r?o[2]:void 0})};let c,l;if("function"!=typeof i&&(t.clusterNodeStrength=t=>i),s&&u&&(c=ke(e,u),l=Array.from(new Set(null==d?void 0:d.map((t=>t.data[u]))))||[],t.centripetalOptions=Object.assign(h,{single:100,leaf:e=>{const{siblingLeaves:r,sameTypeLeaves:n}=c[e.id]||{};return(null==n?void 0:n.length)===(null==r?void 0:r.length)||1===(null==l?void 0:l.length)?1:t.clusterNodeStrength(e)},others:1,center:t=>{const r=e.getDegree(t.id,"both");if(!r)return{x:100,y:100,z:0};let n;if(1===r){const{sameTypeLeaves:e=[]}=c[t.id]||{};1===e.length?n=void 0:e.length>1&&(n=Oe(e))}else n=void 0;return{x:null==n?void 0:n.x,y:null==n?void 0:n.y,z:null==n?void 0:n.z}}})),a&&u){c||(c=ke(e,u)),l||(l=Array.from(new Set(d.map((t=>t.data[u]))))),l=l.filter((t=>void 0!==t));const r={};l.forEach((t=>{const n=d.filter((e=>e.data[u]===t)).map((t=>e.getNode(t.id)));r[t]=Oe(n)})),t.centripetalOptions=Object.assign(h,{single:e=>t.clusterNodeStrength(e),leaf:e=>t.clusterNodeStrength(e),others:e=>t.clusterNodeStrength(e),center:t=>{const e=r[t.data[u]];return{x:null==e?void 0:e.x,y:null==e?void 0:e.y,z:null==e?void 0:e.z}}})}const{leaf:f,single:g,others:p}=t.centripetalOptions||{};f&&"function"!=typeof f&&(t.centripetalOptions.leaf=()=>f),g&&"function"!=typeof g&&(t.centripetalOptions.single=()=>g),p&&"function"!=typeof p&&(t.centripetalOptions.others=()=>p)}runOneStep(t,e,r,n,o){const i={},s=t.getAllNodes(),a=t.getAllEdges();if(!(null==s?void 0:s.length))return;const{monitor:u}=o;this.calRepulsive(t,i,o),a&&this.calAttractive(t,i,o),this.calGravity(t,e,i,o),this.updateVelocity(t,i,n,o),u&&u({energy:this.calTotalEnergy(i,s),nodes:e.getAllNodes(),edges:e.getAllEdges(),iterations:r})}calTotalEnergy(t,e){if(!(null==e?void 0:e.length))return 0;let r=0;return e.forEach(((e,n)=>{const o=t[e.id].x,i=t[e.id].y,s=3===this.options.dimensions?t[e.id].z:0,a=o*o+i*i+s*s,{mass:u=1}=e.data;r+=u*a*.5})),r}calRepulsive(t,e,r){const{dimensions:n,factor:o,coulombDisScale:i}=r;!function(t,e,r,n,o=2){const i=e/r,s=t.getAllNodes(),a=s.map(((t,e)=>{const{nodeStrength:r,x:n,y:o,z:s,size:a}=t.data;return{x:n,y:o,z:s,size:a,index:e,id:t.id,vx:0,vy:0,vz:0,weight:i*r}})),u=(2===o?de(a,(t=>t.x),(t=>t.y)):me(a,(t=>t.x),(t=>t.y),(t=>t.z))).visitAfter(Ee),d=new Map;a.forEach((t=>{d.set(t.id,t),function(t,e,r){e.visit(((e,n,o,i,s)=>Ne(e,n,o,i,s,t,r)))}(t,u,o)})),a.map(((t,e)=>{const{id:r,data:o}=s[e],{mass:i=1}=o;n[r]={x:t.vx/i,y:t.vy/i,z:t.vz/i}}))}(t,o,i*i,e,n)}calAttractive(t,e,r){const{dimensions:n,nodeSize:o}=r;t.getAllEdges().forEach(((r,i)=>{const{source:s,target:a}=r,u=t.getNode(s),d=t.getNode(a);if(!u||!d)return;let h=d.data.x-u.data.x,c=d.data.y-u.data.y,l=3===n?d.data.z-u.data.z:0;h||c||(h=.01*Math.random(),c=.01*Math.random(),3!==n||l||(l=.01*Math.random()));const f=Math.sqrt(h*h+c*c+l*l);if(f<o(u)+o(d))return;const g=h/f,p=c/f,v=l/f,{linkDistance:y=200,edgeStrength:m=200}=r.data||{},w=(y-f)*m,x=1/(u.data.mass||1),b=1/(d.data.mass||1),E=g*w,N=p*w,_=v*w;e[s].x-=E*x,e[s].y-=N*x,e[s].z-=_*x,e[a].x+=E*b,e[a].y+=N*b,e[a].z+=_*b}))}calGravity(t,e,r,n){const{getCenter:o}=n,i=t.getAllNodes(),s=e.getAllNodes(),a=e.getAllEdges(),{width:u,height:d,center:h,gravity:l,centripetalOptions:f}=n;i&&i.forEach((n=>{const{id:i,data:g}=n,{mass:p,x:v,y,z:m}=g,w=e.getNode(i);let x=0,b=0,E=0,N=l;const _=t.getDegree(i,"in"),M=t.getDegree(i,"out"),k=t.getDegree(i,"both"),A=null==o?void 0:o(w,k);if(A){const[t,e,r]=A;x=v-t,b=y-e,N=r}else x=v-h[0],b=y-h[1],E=m-h[2];if(N&&(r[i].x-=N*x/p,r[i].y-=N*b/p,r[i].z-=N*E/p),f){const{leaf:t,single:e,others:n,center:o}=f,{x:h,y:l,z:g,centerStrength:x}=(null==o?void 0:o(w,s,a,u,d))||{x:0,y:0,z:0,centerStrength:0};if(!c(h)||!c(l))return;const b=(v-h)/p,E=(y-l)/p,N=(m-g)/p;if(x&&(r[i].x-=x*b,r[i].y-=x*E,r[i].z-=x*N),0===k){const t=e(w);if(!t)return;return r[i].x-=t*b,r[i].y-=t*E,void(r[i].z-=t*N)}if(0===_||0===M){const e=t(w,s,a);if(!e)return;return r[i].x-=e*b,r[i].y-=e*E,void(r[i].z-=e*N)}const A=n(w);if(!A)return;r[i].x-=A*b,r[i].y-=A*E,r[i].z-=A*N}}))}updateVelocity(t,e,r,n){const{damping:o,maxSpeed:i,interval:s,dimensions:a}=n,u=t.getAllNodes();(null==u?void 0:u.length)&&u.forEach((t=>{const{id:n}=t;let u=(r[n].x+e[n].x*s)*o||.01,d=(r[n].y+e[n].y*s)*o||.01,h=3===a?(r[n].z+e[n].z*s)*o||.01:0;const c=Math.sqrt(u*u+d*d+h*h);if(c>i){const t=i/c;u*=t,d*=t,h*=t}r[n]={x:u,y:d,z:h}}))}updatePosition(t,e,r,n){const{distanceThresholdMode:o,interval:i,dimensions:s}=n,a=e.getAllNodes();if(!(null==a?void 0:a.length))return void(this.judgingDistance=0);let u=0;"max"===o?this.judgingDistance=-1/0:"min"===o&&(this.judgingDistance=1/0),a.forEach((n=>{const{id:a}=n,d=t.getNode(a);if(c(d.data.fx)&&c(d.data.fy))return void e.mergeNodeData(a,{x:d.data.fx,y:d.data.fy,z:3===s?d.data.fz:void 0});const h=r[a].x*i,l=r[a].y*i,f=3===s?r[a].z*i:0;e.mergeNodeData(a,{x:n.data.x+h,y:n.data.y+l,z:n.data.z+f});const g=Math.sqrt(h*h+l*l+f*f);switch(o){case"max":this.judgingDistance<g&&(this.judgingDistance=g);break;case"min":this.judgingDistance>g&&(this.judgingDistance=g);break;default:u+=g}})),o&&"mean"!==o||(this.judgingDistance=u/a.length)}}const ke=(t,e)=>{const r=t.getAllNodes();if(!(null==r?void 0:r.length))return{};const n={};return r.forEach(((r,o)=>{1===t.getDegree(r.id,"both")&&(n[r.id]=Ae(t,"leaf",r,e))})),n},Ae=(t,e,r,n)=>{const o=t.getDegree(r.id,"in"),i=t.getDegree(r.id,"out");let s=r,a=[];return 0===o?(s=t.getSuccessors(r.id)[0],a=t.getNeighbors(s.id)):0===i&&(s=t.getPredecessors(r.id)[0],a=t.getNeighbors(s.id)),a=a.filter((e=>0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out"))),{coreNode:s,siblingLeaves:a,sameTypeLeaves:je(t,e,n,r,a)}},je=(t,e,r,n,o)=>{const i=n.data[r]||"";let s=(null==o?void 0:o.filter((t=>t.data[r]===i)))||[];return"leaf"===e&&(s=s.filter((e=>0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")))),s},Oe=t=>{const e={x:0,y:0};t.forEach((t=>{const{x:r,y:n}=t.data;e.x+=r||0,e.y+=n||0}));const r=t.length||1;return{x:e.x/r,y:e.y/r}},Se=(t,e)=>e.map((e=>{const{id:r,data:n}=e,o=t.getNode(r);return Object.assign(Object.assign({},o),{data:Object.assign(Object.assign({},o.data),{x:n.x,y:n.y,z:n.z})})})),ze=Object.prototype.toString;function Re(t){const e=ze.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function Ie(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Re(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!Re(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Re(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,o=e.toIndex,i=void 0===o?t.length:o;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[n],a=n+1;a<i;a++)t[a]<s&&(s=t[a]);return s}(t),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Re(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,o=e.toIndex,i=void 0===o?t.length:o;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[n],a=n+1;a<i;a++)t[a]>s&&(s=t[a]);return s}(t);if(n===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=r.min,s=void 0===i?r.autoMinMax?n:0:i,a=r.max,u=void 0===a?r.autoMinMax?o:1:a;if(s>=u)throw new RangeError("min option must be smaller than max option");for(var d=(u-s)/(o-n),h=0;h<t.length;h++)e[h]=(t[h]-n)*d+s;return e}const Pe=" ".repeat(2),Ce=" ".repeat(4);function De(t,e={}){const{maxRows:r=15,maxColumns:n=10,maxNumSize:o=8,padMinus:i="auto"}=e;return`${t.constructor.name} {\n${Pe}[\n${Ce}${function(t,e,r,n,o){const{rows:i,columns:s}=t,a=Math.min(i,e),u=Math.min(s,r),d=[];if("auto"===o){o=!1;t:for(let e=0;e<a;e++)for(let r=0;r<u;r++)if(t.get(e,r)<0){o=!0;break t}}for(let e=0;e<a;e++){let r=[];for(let i=0;i<u;i++)r.push(Te(t.get(e,i),n,o));d.push(`${r.join(" ")}`)}return u!==s&&(d[d.length-1]+=` ... ${s-r} more columns`),a!==i&&d.push(`... ${i-e} more rows`),d.join(`\n${Ce}`)}(t,r,n,o,i)}\n${Pe}]\n${Pe}rows: ${t.rows}\n${Pe}columns: ${t.columns}\n}`}function Te(t,e,r){return(t>=0&&r?` ${Le(t,e-1)}`:Le(t,e)).padEnd(e)}function Le(t,e){let r=t.toString();if(r.length<=e)return r;let n=t.toFixed(e);if(n.length>e&&(n=t.toFixed(Math.max(0,e-(n.length-e)))),n.length<=e&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let o=t.toExponential(e);return o.length>e&&(o=t.toExponential(Math.max(0,e-(o.length-e)))),o.slice(0)}function Fe(t,e,r){let n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function qe(t,e,r){let n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function Ve(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Be(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function $e(t,e,r,n,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Ue("startRow",e),Ue("endRow",r),Ue("startColumn",n),Ue("endColumn",o),e>r||n>o||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Ge(t,e=0){let r=[];for(let n=0;n<t;n++)r.push(e);return r}function Ue(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function We(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class Ye{static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");let n=new Ke(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)n.set(o,t,r[o*e+t]);return n}static rowVector(t){let e=new Ke(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new Ke(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new Ke(t,e)}static ones(t,e){return new Ke(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{random:n=Math.random}=r;let o=new Ke(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)o.set(r,t,n());return o}static randInt(t,e,r={}){if("object"!=typeof r)throw new TypeError("options must be an object");const{min:n=0,max:o=1e3,random:i=Math.random}=r;if(!Number.isInteger(n))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(n>=o)throw new RangeError("min must be smaller than max");let s=o-n,a=new Ke(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=n+Math.round(i()*s);a.set(r,t,e)}return a}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let n=Math.min(t,e),o=this.zeros(t,e);for(let t=0;t<n;t++)o.set(t,t,r);return o}static diag(t,e,r){let n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);let o=Math.min(n,e,r),i=this.zeros(e,r);for(let e=0;e<o;e++)i.set(e,e,t[e]);return i}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,o=new Ke(r,n);for(let i=0;i<r;i++)for(let r=0;r<n;r++)o.set(i,r,Math.min(t.get(i,r),e.get(i,r)));return o}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,n=t.columns,o=new this(r,n);for(let i=0;i<r;i++)for(let r=0;r<n;r++)o.set(i,r,Math.max(t.get(i,r),e.get(i,r)));return o}static checkMatrix(t){return Ye.isMatrix(t)?t:new Ke(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,n=!0,o=!1;for(;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,o=!1;for(;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let n=e;for(let o=e;o<t.rows;o++)t.get(o,r)>t.get(n,r)&&(n=o);if(0===t.get(n,r))r++;else{t.swapRows(e,n);let o=t.get(e,r);for(let n=r;n<t.columns;n++)t.set(e,n,t.get(e,n)/o);for(let n=e+1;n<t.rows;n++){let o=t.get(n,r)/t.get(e,r);t.set(n,r,0);for(let i=r+1;i<t.columns;i++)t.set(n,i,t.get(n,i)-t.get(e,i)*o)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;for(;n>=0;)if(0===t.maxRow(n))n--;else{let o=0,i=!1;for(;o<r&&!1===i;)1===t.get(n,o)?i=!0:o++;for(let r=0;r<n;r++){let i=t.get(r,o);for(let s=o;s<e;s++){let e=t.get(r,s)-i*t.get(n,s);t.set(r,s,e)}}n--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let n=new Ke(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)n.setSubMatrix(this,this.rows*t,this.columns*e);return n}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){Fe(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return Ke.rowVector(this.getRow(t))}setRow(t,e){Fe(this,t),e=Ve(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){Fe(this,t),Fe(this,e);for(let r=0;r<this.columns;r++){let n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){qe(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return Ke.columnVector(this.getColumn(t))}setColumn(t,e){qe(this,t),e=Be(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){qe(this,t),qe(this,e);for(let r=0;r<this.rows;r++){let n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=Ve(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=Ve(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=Ve(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=Ve(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=Be(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=Be(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=Be(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=Be(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){Fe(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){qe(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[e]&&(t[e]=this.get(e,r));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){We(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[e]&&(t[e]=this.get(e,r));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}default:throw new Error(`invalid option: ${t}`)}}minIndex(){We(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){if(Fe(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){Fe(this,t),We(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){if(Fe(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){Fe(this,t),We(this);let e=this.get(t,0),r=[t,0];for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){if(qe(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){qe(this,t),We(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){if(qe(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){qe(this,t),We(this);let e=this.get(0,t),r=[0,t];for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e+=this.get(t,r)*this.get(t,r);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){Ye.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}mmul(t){t=Ke.checkMatrix(t);let e=this.rows,r=this.columns,n=t.columns,o=new Ke(e,n),i=new Float64Array(r);for(let s=0;s<n;s++){for(let e=0;e<r;e++)i[e]=t.get(e,s);for(let t=0;t<e;t++){let e=0;for(let n=0;n<r;n++)e+=this.get(t,n)*i[n];o.set(t,s,e)}}return o}strassen2x2(t){t=Ke.checkMatrix(t);let e=new Ke(2,2);const r=this.get(0,0),n=t.get(0,0),o=this.get(0,1),i=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),d=t.get(1,1),h=(r+u)*(n+d),c=(s+u)*n,l=r*(i-d),f=u*(a-n),g=(r+o)*d,p=h+f-g+(o-u)*(a+d),v=l+g,y=c+f,m=h-c+l+(s-r)*(n+i);return e.set(0,0,p),e.set(0,1,v),e.set(1,0,y),e.set(1,1,m),e}strassen3x3(t){t=Ke.checkMatrix(t);let e=new Ke(3,3);const r=this.get(0,0),n=this.get(0,1),o=this.get(0,2),i=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),d=this.get(2,1),h=this.get(2,2),c=t.get(0,0),l=t.get(0,1),f=t.get(0,2),g=t.get(1,0),p=t.get(1,1),v=t.get(1,2),y=t.get(2,0),m=t.get(2,1),w=t.get(2,2),x=(r-i)*(-l+p),b=(-r+i+s)*(c-l+p),E=(i+s)*(-c+l),N=r*c,_=(-r+u+d)*(c-f+v),M=(-r+u)*(f-v),k=(u+d)*(-c+f),A=(-o+d+h)*(p+y-m),j=(o-h)*(p-m),O=o*y,S=(d+h)*(-y+m),z=(-o+s+a)*(v+y-w),R=(o-a)*(v-w),I=(s+a)*(-y+w),P=N+O+n*g,C=(r+n+o-i-s-d-h)*p+b+E+N+A+O+S,D=N+_+k+(r+n+o-s-a-u-d)*v+O+z+I,T=x+s*(-c+l+g-p-v-y+w)+b+N+O+z+R,L=x+b+E+N+a*m,F=O+z+R+I+i*f,q=N+_+M+d*(-c+f+g-p-v-y+m)+A+j+O,V=A+j+O+S+u*l,B=N+_+M+k+h*w;return e.set(0,0,P),e.set(0,1,C),e.set(0,2,D),e.set(1,0,T),e.set(1,1,L),e.set(1,2,F),e.set(2,0,q),e.set(2,1,V),e.set(2,2,B),e}mmulStrassen(t){t=Ke.checkMatrix(t);let e=this.clone(),r=e.rows,n=e.columns,o=t.rows,i=t.columns;function s(t,e,r){let n=t.rows,o=t.columns;if(n===e&&o===r)return t;{let n=Ye.zeros(e,r);return n=n.setSubMatrix(t,0,0),n}}n!==o&&console.warn(`Multiplying ${r} x ${n} and ${o} x ${i} matrix: dimensions do not match.`);let a=Math.max(r,o),u=Math.max(n,i);return e=s(e,a,u),function t(e,r,n,o){if(n<=512||o<=512)return e.mmul(r);n%2==1&&o%2==1?(e=s(e,n+1,o+1),r=s(r,n+1,o+1)):n%2==1?(e=s(e,n+1,o),r=s(r,n+1,o)):o%2==1&&(e=s(e,n,o+1),r=s(r,n,o+1));let i=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),u=e.subMatrix(0,i-1,0,a-1),d=r.subMatrix(0,i-1,0,a-1),h=e.subMatrix(0,i-1,a,e.columns-1),c=r.subMatrix(0,i-1,a,r.columns-1),l=e.subMatrix(i,e.rows-1,0,a-1),f=r.subMatrix(i,r.rows-1,0,a-1),g=e.subMatrix(i,e.rows-1,a,e.columns-1),p=r.subMatrix(i,r.rows-1,a,r.columns-1),v=t(Ye.add(u,g),Ye.add(d,p),i,a),y=t(Ye.add(l,g),d,i,a),m=t(u,Ye.sub(c,p),i,a),w=t(g,Ye.sub(f,d),i,a),x=t(Ye.add(u,h),p,i,a),b=t(Ye.sub(l,u),Ye.add(d,c),i,a),E=t(Ye.sub(h,g),Ye.add(f,p),i,a),N=Ye.add(v,w);N.sub(x),N.add(E);let _=Ye.add(m,x),M=Ye.add(y,w),k=Ye.sub(v,y);k.add(m),k.add(b);let A=Ye.zeros(2*N.rows,2*N.columns);return A=A.setSubMatrix(N,0,0),A=A.setSubMatrix(_,N.rows,0),A=A.setSubMatrix(M,0,N.columns),A=A.setSubMatrix(k,N.rows,N.columns),A.subMatrix(0,n-1,0,o-1)}(e,t=s(t,a,u),a,u)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new Ke(this.rows,this.columns);for(let t=0;t<this.rows;t++){const o=this.getRow(t);o.length>0&&Ie(o,{min:e,max:r,output:o}),n.setRow(t,o)}return n}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(e>=r)throw new RangeError("min must be smaller than max");let n=new Ke(this.rows,this.columns);for(let t=0;t<this.columns;t++){const o=this.getColumn(t);o.length&&Ie(o,{min:e,max:r,output:o}),n.setColumn(t,o)}return n}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),n=this.get(e,this.columns-1-r);this.set(e,r,n),this.set(e,this.columns-1-r,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),n=this.get(this.rows-1-r,e);this.set(r,e,n),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=Ke.checkMatrix(t);let e=this.rows,r=this.columns,n=t.rows,o=t.columns,i=new Ke(e*n,r*o);for(let s=0;s<e;s++)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let a=0;a<o;a++)i.set(n*s+r,o*e+a,this.get(s,e)*t.get(r,a));return i}kroneckerSum(t){if(t=Ke.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,n=this.kroneckerProduct(Ke.eye(r,r)),o=Ke.eye(e,e).kroneckerProduct(t);return n.add(o)}transpose(){let t=new Ke(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=He){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=He){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){$e(this,t,e,r,n);let o=new Ke(e-t+1,n-r+1);for(let i=t;i<=e;i++)for(let e=r;e<=n;e++)o.set(i-t,e-r,this.get(i,e));return o}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let n=new Ke(t.length,r-e+1);for(let o=0;o<t.length;o++)for(let i=e;i<=r;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError(`Row index out of range: ${t[o]}`);n.set(o,i-e,this.get(t[o],i))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let n=new Ke(r-e+1,t.length);for(let o=0;o<t.length;o++)for(let i=e;i<=r;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError(`Column index out of range: ${t[o]}`);n.set(i-e,o,this.get(i,t[o]))}return n}setSubMatrix(t,e,r){if((t=Ke.checkMatrix(t)).isEmpty())return this;$e(this,e,e+t.rows-1,r,r+t.columns-1);for(let n=0;n<t.rows;n++)for(let o=0;o<t.columns;o++)this.set(e+n,r+o,t.get(n,o));return this}selection(t,e){!function(t,e){if(!Re(e))throw new TypeError("row indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.rows)throw new RangeError("row indices are out of range")}(this,t),function(t,e){if(!Re(e))throw new TypeError("column indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.columns)throw new RangeError("column indices are out of range")}(this,e);let r=new Ke(t.length,e.length);for(let n=0;n<t.length;n++){let o=t[n];for(let t=0;t<e.length;t++){let i=e[t];r.set(n,t,this.get(o,i))}}return r}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){let t=new Ke(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}sum(t){switch(t){case"row":return function(t){let e=Ge(t.rows);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){let e=Ge(t.columns);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=Ge(t.rows,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){let e=Ge(t.columns,1);for(let r=0;r<t.rows;++r)for(let n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:r=!0,mean:n=this.mean(t)}=e;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Re(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,o=t.columns,i=[];for(let s=0;s<n;s++){let n=0,a=0,u=0;for(let e=0;e<o;e++)u=t.get(s,e)-r[s],n+=u,a+=u*u;e?i.push((a-n*n/o)/(o-1)):i.push((a-n*n/o)/o)}return i}(this,r,n);case"column":if(!Re(n))throw new TypeError("mean must be an array");return function(t,e,r){const n=t.rows,o=t.columns,i=[];for(let s=0;s<o;s++){let o=0,a=0,u=0;for(let e=0;e<n;e++)u=t.get(e,s)-r[s],o+=u,a+=u*u;e?i.push((a-o*o/n)/(n-1)):i.push((a-o*o/n)/n)}return i}(this,r,n);case void 0:if("number"!=typeof n)throw new TypeError("mean must be a number");return function(t,e,r){const n=t.rows,o=t.columns,i=n*o;let s=0,a=0,u=0;for(let e=0;e<n;e++)for(let n=0;n<o;n++)u=t.get(e,n)-r,s+=u,a+=u*u;return e?(a-s*s/i)/(i-1):(a-s*s/i)/i}(this,r,n);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:r=this.mean(t)}=e;switch(t){case"row":if(!Re(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,r),this;case"column":if(!Re(r))throw new TypeError("center must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.rows;r++){let n=0;for(let e=0;e<t.columns;e++)n+=Math.pow(t.get(r,e),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!Re(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){const e=[];for(let r=0;r<t.columns;r++){let n=0;for(let e=0;e<t.rows;e++)n+=Math.pow(t.get(e,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!Re(r))throw new TypeError("scale must be an array");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){const e=t.size-1;let r=0;for(let n=0;n<t.columns;n++)for(let o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return De(this,t)}}function He(t,e){return t-e}Ye.prototype.klass="Matrix","undefined"!=typeof Symbol&&(Ye.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return De(this)}),Ye.random=Ye.rand,Ye.randomInt=Ye.randInt,Ye.diagonal=Ye.diag,Ye.prototype.diagonal=Ye.prototype.diag,Ye.identity=Ye.eye,Ye.prototype.negate=Ye.prototype.neg,Ye.prototype.tensorProduct=Ye.prototype.kroneckerProduct;class Ke extends Ye{constructor(t,e){if(super(),Ke.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let r=0;r<t;r++)this.data.push(new Float64Array(e))}else{if(!Re(t))throw new TypeError("First argument must be a positive number or an array");{const r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<t;n++){if(r[n].length!==e)throw new RangeError("Inconsistent array dimensions");if(!r[n].every((t=>"number"==typeof t)))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[n]))}}}this.rows=t,this.columns=e}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return Fe(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),Fe(this,t,!0),e=Float64Array.from(Ve(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){qe(this,t);for(let e=0;e<this.rows;e++){const r=new Float64Array(this.columns-1);for(let n=0;n<t;n++)r[n]=this.data[e][n];for(let n=t+1;n<this.columns;n++)r[n-1]=this.data[e][n];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),qe(this,t,!0),e=Be(this,e);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns+1);let o=0;for(;o<t;o++)n[o]=this.data[r][o];for(n[o++]=e[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this}}(Ye,Ke);class Je extends Ye{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}function Xe(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class Qe{constructor(t,e={}){if((t=Je.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let r=t.rows,n=t.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:i=!0,autoTranspose:s=!1}=e;let a,u=Boolean(o),d=Boolean(i),h=!1;if(r<n)if(s){a=t.transpose(),r=a.rows,n=a.columns,h=!0;let e=u;u=d,d=e}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();let c=Math.min(r,n),l=Math.min(r+1,n),f=new Float64Array(l),g=new Ke(r,c),p=new Ke(n,n),v=new Float64Array(n),y=new Float64Array(r),m=new Float64Array(l);for(let t=0;t<l;t++)m[t]=t;let w=Math.min(r-1,n),x=Math.max(0,Math.min(n-2,r)),b=Math.max(w,x);for(let t=0;t<b;t++){if(t<w){f[t]=0;for(let e=t;e<r;e++)f[t]=Xe(f[t],a.get(e,t));if(0!==f[t]){a.get(t,t)<0&&(f[t]=-f[t]);for(let e=t;e<r;e++)a.set(e,t,a.get(e,t)/f[t]);a.set(t,t,a.get(t,t)+1)}f[t]=-f[t]}for(let e=t+1;e<n;e++){if(t<w&&0!==f[t]){let n=0;for(let o=t;o<r;o++)n+=a.get(o,t)*a.get(o,e);n=-n/a.get(t,t);for(let o=t;o<r;o++)a.set(o,e,a.get(o,e)+n*a.get(o,t))}v[e]=a.get(t,e)}if(u&&t<w)for(let e=t;e<r;e++)g.set(e,t,a.get(e,t));if(t<x){v[t]=0;for(let e=t+1;e<n;e++)v[t]=Xe(v[t],v[e]);if(0!==v[t]){v[t+1]<0&&(v[t]=0-v[t]);for(let e=t+1;e<n;e++)v[e]/=v[t];v[t+1]+=1}if(v[t]=-v[t],t+1<r&&0!==v[t]){for(let e=t+1;e<r;e++)y[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<n;r++)y[e]+=v[r]*a.get(e,r);for(let e=t+1;e<n;e++){let n=-v[e]/v[t+1];for(let o=t+1;o<r;o++)a.set(o,e,a.get(o,e)+n*y[o])}}if(d)for(let e=t+1;e<n;e++)p.set(e,t,v[e])}}let E=Math.min(n,r+1);if(w<n&&(f[w]=a.get(w,w)),r<E&&(f[E-1]=0),x+1<E&&(v[x]=a.get(x,E-1)),v[E-1]=0,u){for(let t=w;t<c;t++){for(let e=0;e<r;e++)g.set(e,t,0);g.set(t,t,1)}for(let t=w-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<c;e++){let n=0;for(let o=t;o<r;o++)n+=g.get(o,t)*g.get(o,e);n=-n/g.get(t,t);for(let o=t;o<r;o++)g.set(o,e,g.get(o,e)+n*g.get(o,t))}for(let e=t;e<r;e++)g.set(e,t,-g.get(e,t));g.set(t,t,1+g.get(t,t));for(let e=0;e<t-1;e++)g.set(e,t,0)}else{for(let e=0;e<r;e++)g.set(e,t,0);g.set(t,t,1)}}if(d)for(let t=n-1;t>=0;t--){if(t<x&&0!==v[t])for(let e=t+1;e<n;e++){let r=0;for(let o=t+1;o<n;o++)r+=p.get(o,t)*p.get(o,e);r=-r/p.get(t+1,t);for(let o=t+1;o<n;o++)p.set(o,e,p.get(o,e)+r*p.get(o,t))}for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}let N=E-1,_=0,M=Number.EPSILON;for(;E>0;){let t,e;for(t=E-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+M*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(v[t])<=e||Number.isNaN(v[t])){v[t]=0;break}}if(t===E-2)e=4;else{let r;for(r=E-1;r>=t&&r!==t;r--){let e=(r!==E?Math.abs(v[r]):0)+(r!==t+1?Math.abs(v[r-1]):0);if(Math.abs(f[r])<=M*e){f[r]=0;break}}r===t?e=3:r===E-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=v[E-2];v[E-2]=0;for(let r=E-2;r>=t;r--){let o=Xe(f[r],e),i=f[r]/o,s=e/o;if(f[r]=o,r!==t&&(e=-s*v[r-1],v[r-1]=i*v[r-1]),d)for(let t=0;t<n;t++)o=i*p.get(t,r)+s*p.get(t,E-1),p.set(t,E-1,-s*p.get(t,r)+i*p.get(t,E-1)),p.set(t,r,o)}break}case 2:{let e=v[t-1];v[t-1]=0;for(let n=t;n<E;n++){let o=Xe(f[n],e),i=f[n]/o,s=e/o;if(f[n]=o,e=-s*v[n],v[n]=i*v[n],u)for(let e=0;e<r;e++)o=i*g.get(e,n)+s*g.get(e,t-1),g.set(e,t-1,-s*g.get(e,n)+i*g.get(e,t-1)),g.set(e,n,o)}break}case 3:{const e=Math.max(Math.abs(f[E-1]),Math.abs(f[E-2]),Math.abs(v[E-2]),Math.abs(f[t]),Math.abs(v[t])),o=f[E-1]/e,i=f[E-2]/e,s=v[E-2]/e,a=f[t]/e,h=v[t]/e,c=((i+o)*(i-o)+s*s)/2,l=o*s*(o*s);let y=0;0===c&&0===l||(y=c<0?0-Math.sqrt(c*c+l):Math.sqrt(c*c+l),y=l/(c+y));let m=(a+o)*(a-o)+y,w=a*h;for(let e=t;e<E-1;e++){let o=Xe(m,w);0===o&&(o=Number.MIN_VALUE);let i=m/o,s=w/o;if(e!==t&&(v[e-1]=o),m=i*f[e]+s*v[e],v[e]=i*v[e]-s*f[e],w=s*f[e+1],f[e+1]=i*f[e+1],d)for(let t=0;t<n;t++)o=i*p.get(t,e)+s*p.get(t,e+1),p.set(t,e+1,-s*p.get(t,e)+i*p.get(t,e+1)),p.set(t,e,o);if(o=Xe(m,w),0===o&&(o=Number.MIN_VALUE),i=m/o,s=w/o,f[e]=o,m=i*v[e]+s*f[e+1],f[e+1]=-s*v[e]+i*f[e+1],w=s*v[e+1],v[e+1]=i*v[e+1],u&&e<r-1)for(let t=0;t<r;t++)o=i*g.get(t,e)+s*g.get(t,e+1),g.set(t,e+1,-s*g.get(t,e)+i*g.get(t,e+1)),g.set(t,e,o)}v[E-2]=m,_+=1;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,d))for(let e=0;e<=N;e++)p.set(e,t,-p.get(e,t));for(;t<N&&!(f[t]>=f[t+1]);){let e=f[t];if(f[t]=f[t+1],f[t+1]=e,d&&t<n-1)for(let r=0;r<n;r++)e=p.get(r,t+1),p.set(r,t+1,p.get(r,t)),p.set(r,t,e);if(u&&t<r-1)for(let n=0;n<r;n++)e=g.get(n,t+1),g.set(n,t+1,g.get(n,t)),g.set(n,t,e);t++}_=0,E--}}if(h){let t=p;p=g,g=t}this.m=r,this.n=n,this.s=f,this.U=g,this.V=p}solve(t){let e=t,r=this.threshold,n=this.s.length,o=Ke.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=r?o.set(t,t,0):o.set(t,t,1/this.s[t]);let i=this.U,s=this.rightSingularVectors,a=s.mmul(o),u=s.rows,d=i.rows,h=Ke.zeros(u,d);for(let t=0;t<u;t++)for(let e=0;e<d;e++){let r=0;for(let o=0;o<n;o++)r+=a.get(t,o)*i.get(e,o);h.set(t,e,r)}return h.mmul(e)}solveForDiagonal(t){return this.solve(Ke.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,n=t.columns,o=new Ke(r,this.s.length);for(let i=0;i<r;i++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e&&o.set(i,r,t.get(i,r)/this.s[r]);let i=this.U,s=i.rows,a=i.columns,u=new Ke(r,s);for(let t=0;t<r;t++)for(let e=0;e<s;e++){let r=0;for(let n=0;n<a;n++)r+=o.get(t,n)*i.get(e,n);u.set(t,e,r)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let n=0,o=r.length;n<o;n++)r[n]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Ke.diag(this.s)}}const Ze=t=>{const e=[],r=t.length;for(let n=0;n<r;n+=1){e[n]=[];for(let o=0;o<r;o+=1)n===o?e[n][o]=0:0!==t[n][o]&&t[n][o]?e[n][o]=t[n][o]:e[n][o]=1/0}for(let t=0;t<r;t+=1)for(let n=0;n<r;n+=1)for(let o=0;o<r;o+=1)e[n][o]>e[n][t]+e[t][o]&&(e[n][o]=e[n][t]+e[t][o]);return e},tr=(t,e)=>{const{nodes:r,edges:n}=t,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(((t,e)=>{i[t.id]=e,o.push([])})),null==n||n.forEach((t=>{const{source:r,target:n}=t,s=i[r],a=i[n];void 0!==s&&void 0!==a&&(o[s][a]=1,e||(o[a][s]=1))})),o},er=(t,e)=>Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),rr=(t,e,r,n="TB",o,i={})=>{if(!(null==e?void 0:e.length))return;const{stopBranchFn:s,stopAllFn:a}=i;for(let u=0;u<e.length;u++){const d=e[u];if(t.hasNode(d.id)&&!(null==s?void 0:s(d))){if(null==a?void 0:a(d))return;"TB"===n&&r(d),rr(t,t.getChildren(d.id,o),r,n,o,i),"TB"!==n&&r(d)}}},nr={center:[0,0],linkDistance:50};class or{constructor(t={}){this.options=t,this.id="mds",this.options=Object.assign(Object.assign({},nr),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericMDSLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericMDSLayout(!0,e,r)}))}genericMDSLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{center:o=[0,0],linkDistance:i=50}=t,s=r.getAllNodes(),a=r.getAllEdges();if(!(null==s?void 0:s.length)||1===s.length)return Qt(r,e,o);const u=tr({nodes:s,edges:a},!1),d=Ze(u);ir(d);const h=((t,e)=>{const r=[];return t.forEach((t=>{const n=[];t.forEach((t=>{n.push(t*e)})),r.push(n)})),r})(d,i),c=sr(h),l=[];return c.forEach(((t,e)=>{const r=Jt(s[e]);r.data.x=t[0]+o[0],r.data.y=t[1]+o[1],l.push(r)})),e&&l.forEach((t=>r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y}))),{nodes:l,edges:a}}))}}const ir=t=>{let e=-999999;t.forEach((t=>{t.forEach((t=>{t!==1/0&&e<t&&(e=t)}))})),t.forEach(((r,n)=>{r.forEach(((r,o)=>{r===1/0&&(t[n][o]=e)}))}))},sr=t=>{const e=Ke.mul(Ke.pow(t,2),-.5),r=e.mean("row"),n=e.mean("column"),o=e.mean();e.add(o).subRowVector(r).subColumnVector(n);const i=new Qe(e),s=Ke.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((t=>Ke.mul([t],[s]).toJSON()[0].splice(0,2)))};function ar(t){return!!t.tick&&!!t.stop}const ur={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},dr={center:[0,0],comboPadding:10,treeKey:"combo"};function hr(e,r,n,o){var i;return t(this,void 0,void 0,(function*(){return ar(e)?(e.execute(r,n),e.stop(),e.tick(null!==(i=n.iterations)&&void 0!==i?i:300)):o?yield e.assign(r,n):yield e.execute(r,n)}))}const cr=function(t){if(!function(t){return"object"==typeof t&&null!==t}(t)||!h(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function lr(t,e,r,n){for(var o in r=r||0,n=n||5,e)if(e.hasOwnProperty(o)){var i=e[o];null!==i&&cr(i)?(cr(t[o])||(t[o]={}),r<n?lr(t[o],i,r+1,n):t[o]=e[o]):T(i)?(t[o]=[],t[o]=t[o].concat(i)):void 0!==i&&(t[o]=i)}}const fr=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)lr(t,e[n]);return t};var gr=Object.prototype.hasOwnProperty;const pr=function(t,e){if(null===t||!cr(t))return{};var r={};return function(t,e){if(t)if(T(t))for(var r=0,n=t.length;r<n&&!1!==e(t[r],r);r++);else if(Gt(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}(e,(function(e){gr.call(t,e)&&(r[e]=t[e])})),r};function vr(t){return function(){return t}}function yr(t){return 1e-6*(t()-.5)}function mr(t){return t.index}function wr(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function xr(t){var e,r,n,o,i,s,a=mr,u=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},d=vr(30),h=1;function c(n){for(var o=0,a=t.length;o<h;++o)for(var u,d,c,l,f,g,p,v=0;v<a;++v)d=(u=t[v]).source,l=(c=u.target).x+c.vx-d.x-d.vx||yr(s),f=c.y+c.vy-d.y-d.vy||yr(s),l*=g=((g=Math.sqrt(l*l+f*f))-r[v])/g*n*e[v],f*=g,c.vx-=l*(p=i[v]),c.vy-=f*p,d.vx+=l*(p=1-p),d.vy+=f*p}function l(){if(n){var s,u,d=n.length,h=t.length,c=new Map(n.map(((t,e)=>[a(t,e,n),t])));for(s=0,o=new Array(d);s<h;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=wr(c,u.source)),"object"!=typeof u.target&&(u.target=wr(c,u.target)),o[u.source.index]=(o[u.source.index]||0)+1,o[u.target.index]=(o[u.target.index]||0)+1;for(s=0,i=new Array(h);s<h;++s)u=t[s],i[s]=o[u.source.index]/(o[u.source.index]+o[u.target.index]);e=new Array(h),f(),r=new Array(h),g()}}function f(){if(n)for(var r=0,o=t.length;r<o;++r)e[r]=+u(t[r],r,t)}function g(){if(n)for(var e=0,o=t.length;e<o;++e)r[e]=+d(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){n=t,s=e,l()},c.links=function(e){return arguments.length?(t=e,l(),c):t},c.id=function(t){return arguments.length?(a=t,c):a},c.iterations=function(t){return arguments.length?(h=+t,c):h},c.strength=function(t){return arguments.length?(u="function"==typeof t?t:vr(+t),f(),c):u},c.distance=function(t){return arguments.length?(d="function"==typeof t?t:vr(+t),g(),c):d},c}var br={value:()=>{}};function Er(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Nr(n)}function Nr(t){this._=t}function _r(t,e){for(var r,n=0,o=t.length;n<o;++n)if((r=t[n]).name===e)return r.value}function Mr(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=br,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}Nr.prototype=Er.prototype={constructor:Nr,on:function(t,e){var r,n,o=this._,i=(n=o,(t+"").trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)o[r]=Mr(o[r],t.name,e);else if(null==e)for(r in o)o[r]=Mr(o[r],t.name,null);return this}for(;++s<a;)if((r=(t=i[s]).type)&&(r=_r(o[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Nr(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,o=new Array(r),i=0;i<r;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,r=(n=this._[t]).length;i<r;++i)n[i].value.apply(e,o)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};const kr=Er;var Ar,jr,Or=0,Sr=0,zr=0,Rr=0,Ir=0,Pr=0,Cr="object"==typeof performance&&performance.now?performance:Date,Dr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tr(){return Ir||(Dr(Lr),Ir=Cr.now()+Pr)}function Lr(){Ir=0}function Fr(){this._call=this._time=this._next=null}function qr(t,e,r){var n=new Fr;return n.restart(t,e,r),n}function Vr(){Ir=(Rr=Cr.now())+Pr,Or=Sr=0;try{!function(){Tr(),++Or;for(var t,e=Ar;e;)(t=Ir-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Or}()}finally{Or=0,function(){for(var t,e,r=Ar,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:Ar=e);jr=t,$r(n)}(),Ir=0}}function Br(){var t=Cr.now(),e=t-Rr;e>1e3&&(Pr-=e,Rr=t)}function $r(t){Or||(Sr&&(Sr=clearTimeout(Sr)),t-Ir>24?(t<1/0&&(Sr=setTimeout(Vr,t-Cr.now()-Pr)),zr&&(zr=clearInterval(zr))):(zr||(Rr=Cr.now(),zr=setInterval(Br,1e3)),Or=1,Dr(Vr)))}Fr.prototype=qr.prototype={constructor:Fr,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?Tr():+r)+(null==e?0:+e),this._next||jr===this||(jr?jr._next=this:Ar=this,jr=this),this._call=t,this._time=r,$r()},stop:function(){this._call&&(this._call=null,this._time=1/0,$r())}};const Gr=4294967296;function Ur(t){return t.x}function Wr(t){return t.y}var Yr=Math.PI*(3-Math.sqrt(5));function Hr(){var t,e,r,n,o,i=vr(-30),s=1,a=1/0,u=.81;function d(r){var o,i=t.length,s=de(t,Ur,Wr).visitAfter(c);for(n=r,o=0;o<i;++o)e=t[o],s.visit(l)}function h(){if(t){var e,r,n=t.length;for(o=new Array(n),e=0;e<n;++e)r=t[e],o[r.index]=+i(r,e,t)}}function c(t){var e,r,n,i,s,a=0,u=0;if(t.length){for(n=i=s=0;s<4;++s)(e=t[s])&&(r=Math.abs(e.value))&&(a+=e.value,u+=r,n+=r*e.x,i+=r*e.y);t.x=n/u,t.y=i/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=o[e.data.index]}while(e=e.next)}t.value=a}function l(t,i,d,h){if(!t.value)return!0;var c=t.x-e.x,l=t.y-e.y,f=h-i,g=c*c+l*l;if(f*f/u<g)return g<a&&(0===c&&(g+=(c=yr(r))*c),0===l&&(g+=(l=yr(r))*l),g<s&&(g=Math.sqrt(s*g)),e.vx+=c*t.value*n/g,e.vy+=l*t.value*n/g),!0;if(!(t.length||g>=a)){(t.data!==e||t.next)&&(0===c&&(g+=(c=yr(r))*c),0===l&&(g+=(l=yr(r))*l),g<s&&(g=Math.sqrt(s*g)));do{t.data!==e&&(f=o[t.data.index]*n/g,e.vx+=c*f,e.vy+=l*f)}while(t=t.next)}}return d.initialize=function(e,n){t=e,r=n,h()},d.strength=function(t){return arguments.length?(i="function"==typeof t?t:vr(+t),h(),d):i},d.distanceMin=function(t){return arguments.length?(s=t*t,d):Math.sqrt(s)},d.distanceMax=function(t){return arguments.length?(a=t*t,d):Math.sqrt(a)},d.theta=function(t){return arguments.length?(u=t*t,d):Math.sqrt(u)},d}function Kr(t,e){var r,n=1;function o(){var o,i,s=r.length,a=0,u=0;for(o=0;o<s;++o)a+=(i=r[o]).x,u+=i.y;for(a=(a/s-t)*n,u=(u/s-e)*n,o=0;o<s;++o)(i=r[o]).x-=a,i.y-=u}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(n=+t,o):n},o}function Jr(t){return t.x+t.vx}function Xr(t){return t.y+t.vy}function Qr(t){var e,r,n,o=1,i=1;function s(){for(var t,s,u,d,h,c,l,f=e.length,g=0;g<i;++g)for(s=de(e,Jr,Xr).visitAfter(a),t=0;t<f;++t)u=e[t],c=r[u.index],l=c*c,d=u.x+u.vx,h=u.y+u.vy,s.visit(p);function p(t,e,r,i,s){var a=t.data,f=t.r,g=c+f;if(!a)return e>d+g||i<d-g||r>h+g||s<h-g;if(a.index>u.index){var p=d-a.x-a.vx,v=h-a.y-a.vy,y=p*p+v*v;y<g*g&&(0===p&&(y+=(p=yr(n))*p),0===v&&(y+=(v=yr(n))*v),y=(g-(y=Math.sqrt(y)))/y*o,u.vx+=(p*=y)*(g=(f*=f)/(l+f)),u.vy+=(v*=y)*g,a.vx-=p*(g=1-g),a.vy-=v*g)}}}function a(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var n,o,i=e.length;for(r=new Array(i),n=0;n<i;++n)o=e[n],r[o.index]=+t(o,n,e)}}return"function"!=typeof t&&(t=vr(null==t?1:+t)),s.initialize=function(t,r){e=t,n=r,u()},s.iterations=function(t){return arguments.length?(i=+t,s):i},s.strength=function(t){return arguments.length?(o=+t,s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:vr(+e),u(),s):t},s}function Zr(t,e,r){var n,o,i,s=vr(.1);function a(t){for(var s=0,a=n.length;s<a;++s){var u=n[s],d=u.x-e||1e-6,h=u.y-r||1e-6,c=Math.sqrt(d*d+h*h),l=(i[s]-c)*o[s]*t/c;u.vx+=d*l,u.vy+=h*l}}function u(){if(n){var e,r=n.length;for(o=new Array(r),i=new Array(r),e=0;e<r;++e)i[e]=+t(n[e],e,n),o[e]=isNaN(i[e])?0:+s(n[e],e,n)}}return"function"!=typeof t&&(t=vr(+t)),null==e&&(e=0),null==r&&(r=0),a.initialize=function(t){n=t,u()},a.strength=function(t){return arguments.length?(s="function"==typeof t?t:vr(+t),u(),a):s},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:vr(+e),u(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(r=+t,a):r},a}function tn(t){var e,r,n,o=vr(.1);function i(t){for(var o,i=0,s=e.length;i<s;++i)(o=e[i]).vx+=(n[i]-o.x)*r[i]*t}function s(){if(e){var i,s=e.length;for(r=new Array(s),n=new Array(s),i=0;i<s;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=vr(null==t?0:+t)),i.initialize=function(t){e=t,s()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:vr(+t),s(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:vr(+e),s(),i):t},i}function en(t){var e,r,n,o=vr(.1);function i(t){for(var o,i=0,s=e.length;i<s;++i)(o=e[i]).vy+=(n[i]-o.y)*r[i]*t}function s(){if(e){var i,s=e.length;for(r=new Array(s),n=new Array(s),i=0;i<s;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=vr(null==t?0:+t)),i.initialize=function(t){e=t,s()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:vr(+t),s(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:vr(+e),s(),i):t},i}class rn{constructor(t){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:xr,manyBody:Hr,center:Kr,collide:Qr,radial:Zr,x:tn,y:en},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},fr(this.options,t),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericLayout(!0,e,r)}))}stop(){this.simulation.stop()}tick(t){return this.simulation.tick(t),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(t,e){const r=this.context.nodes.find((e=>e.id===t));r&&e.forEach(((t,e)=>{"number"!=typeof t&&null!==t||(r[["fx","fy","fz"][e]]=t)}))}getOptions(t){var e,r;const n=fr({},this.options,t);return n.collide&&void 0===(null===(e=n.collide)||void 0===e?void 0:e.radius)&&(n.collide=n.collide||{},n.collide.radius=null!==(r=n.nodeSize)&&void 0!==r?r:10),void 0===n.iterations&&(n.link&&void 0===n.link.iterations&&(n.iterations=n.link.iterations),n.collide&&void 0===n.collide.iterations&&(n.iterations=n.collide.iterations)),this.context.options=n,n}genericLayout(e,r,n){var o;return t(this,void 0,void 0,(function*(){const t=this.getOptions(n),i=r.getAllNodes().map((({id:t,data:e})=>Object.assign(Object.assign({id:t},e),pr(e.data,this.config.inputNodeAttrs)))),s=r.getAllEdges().map((t=>Object.assign({},t)));Object.assign(this.context,{assign:e,nodes:i,edges:s,graph:r});const a=new Promise((t=>{this.resolver=t})),u=this.setSimulation(t);return u.nodes(i),null===(o=u.force("link"))||void 0===o||o.links(s),a}))}getResult(){const{assign:t,nodes:e,edges:r,graph:n}=this.context,o=e.map((t=>({id:t.id,data:Object.assign(Object.assign({},t.data),pr(t,this.config.outputNodeAttrs))}))),i=r.map((({id:t,source:e,target:r,data:n})=>({id:t,source:"object"==typeof e?e.id:e,target:"object"==typeof r?r.id:r,data:n})));return t&&o.forEach((t=>n.mergeNodeData(t.id,t.data))),{nodes:o,edges:i}}initSimulation(){return function(t){var e,r=1,n=.001,o=1-Math.pow(n,1/300),i=0,s=.6,a=new Map,u=qr(c),d=kr("tick","end"),h=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Gr)/Gr}();function c(){l(),d.call("tick",e),r<n&&(u.stop(),d.call("end",e))}function l(n){var u,d,h=t.length;void 0===n&&(n=1);for(var c=0;c<n;++c)for(r+=(i-r)*o,a.forEach((function(t){t(r)})),u=0;u<h;++u)null==(d=t[u]).fx?d.x+=d.vx*=s:(d.x=d.fx,d.vx=0),null==d.fy?d.y+=d.vy*=s:(d.y=d.fy,d.vy=0);return e}function f(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+r),i=r*Yr;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function g(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),f(),e={tick:l,restart:function(){return u.restart(c),e},stop:function(){return u.stop(),e},nodes:function(r){return arguments.length?(t=r,f(),a.forEach(g),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(n=+t,e):n},alphaDecay:function(t){return arguments.length?(o=+t,e):+o},alphaTarget:function(t){return arguments.length?(i=+t,e):i},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(h=t,a.forEach(g),e):h},force:function(t,r){return arguments.length>1?(null==r?a.delete(t):a.set(t,g(r)),e):a.get(t)},find:function(e,r,n){var o,i,s,a,u,d=0,h=t.length;for(null==n?n=1/0:n*=n,d=0;d<h;++d)(s=(o=e-(a=t[d]).x)*o+(i=r-a.y)*i)<n&&(u=a,n=s);return u},on:function(t,r){return arguments.length>1?(d.on(t,r),e):d.on(t)}}}()}setSimulation(t){const e=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=e.on("tick",(()=>{var e;return null===(e=t.onTick)||void 0===e?void 0:e.call(t,this.getResult())})).on("end",(()=>{var t;return null===(t=this.resolver)||void 0===t?void 0:t.call(this,this.getResult())}))),nn(e,this.config.simulationAttrs.map((e=>[e,t[e]]))),Object.entries(this.forceMap).forEach((([r,n])=>{const o=r;if(t[r]){let r=e.force(o);r||(r=n(),e.force(o,r)),nn(r,Object.entries(t[o]))}else e.force(o,null)})),e}}const nn=(t,e)=>e.reduce(((e,[r,n])=>e[r]&&void 0!==n?e[r].call(t,n):e),t);function on(t){return function(){return t}}function sn(t){return 1e-6*(t()-.5)}function an(t){return t.index}function un(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function dn(t){var e,r,n,o,i,s,a,u=an,d=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},h=on(30),c=1;function l(n){for(var i=0,u=t.length;i<c;++i)for(var d,h,l,f,g,p=0,v=0,y=0,m=0;p<u;++p)h=(d=t[p]).source,v=(l=d.target).x+l.vx-h.x-h.vx||sn(a),o>1&&(y=l.y+l.vy-h.y-h.vy||sn(a)),o>2&&(m=l.z+l.vz-h.z-h.vz||sn(a)),v*=f=((f=Math.sqrt(v*v+y*y+m*m))-r[p])/f*n*e[p],y*=f,m*=f,l.vx-=v*(g=s[p]),o>1&&(l.vy-=y*g),o>2&&(l.vz-=m*g),h.vx+=v*(g=1-g),o>1&&(h.vy+=y*g),o>2&&(h.vz+=m*g)}function f(){if(n){var o,a,d=n.length,h=t.length,c=new Map(n.map(((t,e)=>[u(t,e,n),t])));for(o=0,i=new Array(d);o<h;++o)(a=t[o]).index=o,"object"!=typeof a.source&&(a.source=un(c,a.source)),"object"!=typeof a.target&&(a.target=un(c,a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1;for(o=0,s=new Array(h);o<h;++o)a=t[o],s[o]=i[a.source.index]/(i[a.source.index]+i[a.target.index]);e=new Array(h),g(),r=new Array(h),p()}}function g(){if(n)for(var r=0,o=t.length;r<o;++r)e[r]=+d(t[r],r,t)}function p(){if(n)for(var e=0,o=t.length;e<o;++e)r[e]=+h(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t,...e){n=t,a=e.find((t=>"function"==typeof t))||Math.random,o=e.find((t=>[1,2,3].includes(t)))||2,f()},l.links=function(e){return arguments.length?(t=e,f(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(d="function"==typeof t?t:on(+t),g(),l):d},l.distance=function(t){return arguments.length?(h="function"==typeof t?t:on(+t),p(),l):h},l}function hn(t,e,r){if(isNaN(e))return t;var n,o,i,s,a,u,d=t._root,h={data:r},c=t._x0,l=t._x1;if(!d)return t._root=h,t;for(;d.length;)if((s=e>=(o=(c+l)/2))?c=o:l=o,n=d,!(d=d[a=+s]))return n[a]=h,t;if(e===(i=+t._x.call(null,d.data)))return h.next=d,n?n[a]=h:t._root=h,t;do{n=n?n[a]=new Array(2):t._root=new Array(2),(s=e>=(o=(c+l)/2))?c=o:l=o}while((a=+s)==(u=+(i>=o)));return n[u]=d,n[a]=h,t}function cn(t,e,r){this.node=t,this.x0=e,this.x1=r}function ln(t){return t[0]}function fn(t,e){var r=new gn(null==e?ln:e,NaN,NaN);return null==t?r:r.addAll(t)}function gn(t,e,r){this._x=t,this._x0=e,this._x1=r,this._root=void 0}function pn(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var vn=fn.prototype=gn.prototype;vn.copy=function(){var t,e,r=new gn(this._x,this._x0,this._x1),n=this._root;if(!n)return r;if(!n.length)return r._root=pn(n),r;for(t=[{source:n,target:r._root=new Array(2)}];n=t.pop();)for(var o=0;o<2;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(2)}):n.target[o]=pn(e));return r},vn.add=function(t){const e=+this._x.call(null,t);return hn(this.cover(e),e,t)},vn.addAll=function(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,r=new Float64Array(e);let n=1/0,o=-1/0;for(let i,s=0;s<e;++s)isNaN(i=+this._x.call(null,t[s]))||(r[s]=i,i<n&&(n=i),i>o&&(o=i));if(n>o)return this;this.cover(n).cover(o);for(let n=0;n<e;++n)hn(this,r[n],t[n]);return this},vn.cover=function(t){if(isNaN(t=+t))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(t))+1;else{for(var n,o,i=r-e||1,s=this._root;e>t||t>=r;)switch(o=+(t<e),(n=new Array(2))[o]=s,s=n,i*=2,o){case 0:r=e+i;break;case 1:e=r-i}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this},vn.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},vn.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},vn.find=function(t,e){var r,n,o,i,s,a=this._x0,u=this._x1,d=[],h=this._root;for(h&&d.push(new cn(h,a,u)),null==e?e=1/0:(a=t-e,u=t+e);i=d.pop();)if(!(!(h=i.node)||(n=i.x0)>u||(o=i.x1)<a))if(h.length){var c=(n+o)/2;d.push(new cn(h[1],c,o),new cn(h[0],n,c)),(s=+(t>=c))&&(i=d[d.length-1],d[d.length-1]=d[d.length-1-s],d[d.length-1-s]=i)}else{var l=Math.abs(t-+this._x.call(null,h.data));l<e&&(e=l,a=t-l,u=t+l,r=h.data)}return r},vn.remove=function(t){if(isNaN(i=+this._x.call(null,t)))return this;var e,r,n,o,i,s,a,u,d,h=this._root,c=this._x0,l=this._x1;if(!h)return this;if(h.length)for(;;){if((a=i>=(s=(c+l)/2))?c=s:l=s,e=h,!(h=h[u=+a]))return this;if(!h.length)break;e[u+1&1]&&(r=e,d=u)}for(;h.data!==t;)if(n=h,!(h=h.next))return this;return(o=h.next)&&delete h.next,n?(o?n.next=o:delete n.next,this):e?(o?e[u]=o:delete e[u],(h=e[0]||e[1])&&h===(e[1]||e[0])&&!h.length&&(r?r[d]=h:this._root=h),this):(this._root=o,this)},vn.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},vn.root=function(){return this._root},vn.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},vn.visit=function(t){var e,r,n,o,i=[],s=this._root;for(s&&i.push(new cn(s,this._x0,this._x1));e=i.pop();)if(!t(s=e.node,n=e.x0,o=e.x1)&&s.length){var a=(n+o)/2;(r=s[1])&&i.push(new cn(r,a,o)),(r=s[0])&&i.push(new cn(r,n,a))}return this},vn.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new cn(this._root,this._x0,this._x1));e=r.pop();){var o=e.node;if(o.length){var i,s=e.x0,a=e.x1,u=(s+a)/2;(i=o[0])&&r.push(new cn(i,s,u)),(i=o[1])&&r.push(new cn(i,u,a))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.x1);return this},vn.x=function(t){return arguments.length?(this._x=t,this):this._x};const yn=4294967296;function mn(t){return t.x}function wn(t){return t.y}function xn(t){return t.z}var bn=Math.PI*(3-Math.sqrt(5)),En=20*Math.PI/(9+Math.sqrt(221));function Nn(){var t,e,r,n,o,i,s=on(-30),a=1,u=1/0,d=.81;function h(n){var i,s=t.length,a=(1===e?fn(t,mn):2===e?de(t,mn,wn):3===e?me(t,mn,wn,xn):null).visitAfter(l);for(o=n,i=0;i<s;++i)r=t[i],a.visit(f)}function c(){if(t){var e,r,n=t.length;for(i=new Array(n),e=0;e<n;++e)r=t[e],i[r.index]=+s(r,e,t)}}function l(t){var r,n,o,s,a,u,d=0,h=0,c=t.length;if(c){for(o=s=a=u=0;u<c;++u)(r=t[u])&&(n=Math.abs(r.value))&&(d+=r.value,h+=n,o+=n*(r.x||0),s+=n*(r.y||0),a+=n*(r.z||0));d*=Math.sqrt(4/c),t.x=o/h,e>1&&(t.y=s/h),e>2&&(t.z=a/h)}else{(r=t).x=r.data.x,e>1&&(r.y=r.data.y),e>2&&(r.z=r.data.z);do{d+=i[r.data.index]}while(r=r.next)}t.value=d}function f(t,s,h,c,l){if(!t.value)return!0;var f=[h,c,l][e-1],g=t.x-r.x,p=e>1?t.y-r.y:0,v=e>2?t.z-r.z:0,y=f-s,m=g*g+p*p+v*v;if(y*y/d<m)return m<u&&(0===g&&(m+=(g=sn(n))*g),e>1&&0===p&&(m+=(p=sn(n))*p),e>2&&0===v&&(m+=(v=sn(n))*v),m<a&&(m=Math.sqrt(a*m)),r.vx+=g*t.value*o/m,e>1&&(r.vy+=p*t.value*o/m),e>2&&(r.vz+=v*t.value*o/m)),!0;if(!(t.length||m>=u)){(t.data!==r||t.next)&&(0===g&&(m+=(g=sn(n))*g),e>1&&0===p&&(m+=(p=sn(n))*p),e>2&&0===v&&(m+=(v=sn(n))*v),m<a&&(m=Math.sqrt(a*m)));do{t.data!==r&&(y=i[t.data.index]*o/m,r.vx+=g*y,e>1&&(r.vy+=p*y),e>2&&(r.vz+=v*y))}while(t=t.next)}}return h.initialize=function(r,...o){t=r,n=o.find((t=>"function"==typeof t))||Math.random,e=o.find((t=>[1,2,3].includes(t)))||2,c()},h.strength=function(t){return arguments.length?(s="function"==typeof t?t:on(+t),c(),h):s},h.distanceMin=function(t){return arguments.length?(a=t*t,h):Math.sqrt(a)},h.distanceMax=function(t){return arguments.length?(u=t*t,h):Math.sqrt(u)},h.theta=function(t){return arguments.length?(d=t*t,h):Math.sqrt(d)},h}function _n(t,e,r){var n,o=1;function i(){var i,s,a=n.length,u=0,d=0,h=0;for(i=0;i<a;++i)u+=(s=n[i]).x||0,d+=s.y||0,h+=s.z||0;for(u=(u/a-t)*o,d=(d/a-e)*o,h=(h/a-r)*o,i=0;i<a;++i)s=n[i],u&&(s.x-=u),d&&(s.y-=d),h&&(s.z-=h)}return null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.z=function(t){return arguments.length?(r=+t,i):r},i.strength=function(t){return arguments.length?(o=+t,i):o},i}function Mn(t){return t.x+t.vx}function kn(t){return t.y+t.vy}function An(t){return t.z+t.vz}function jn(t){var e,r,n,o,i=1,s=1;function a(){for(var t,a,d,h,c,l,f,g,p=e.length,v=0;v<s;++v)for(a=(1===r?fn(e,Mn):2===r?de(e,Mn,kn):3===r?me(e,Mn,kn,An):null).visitAfter(u),t=0;t<p;++t)d=e[t],f=n[d.index],g=f*f,h=d.x+d.vx,r>1&&(c=d.y+d.vy),r>2&&(l=d.z+d.vz),a.visit(y);function y(t,e,n,s,a,u,p){var v=[e,n,s,a,u,p],y=v[0],m=v[1],w=v[2],x=v[r],b=v[r+1],E=v[r+2],N=t.data,_=t.r,M=f+_;if(!N)return y>h+M||x<h-M||r>1&&(m>c+M||b<c-M)||r>2&&(w>l+M||E<l-M);if(N.index>d.index){var k=h-N.x-N.vx,A=r>1?c-N.y-N.vy:0,j=r>2?l-N.z-N.vz:0,O=k*k+A*A+j*j;O<M*M&&(0===k&&(O+=(k=sn(o))*k),r>1&&0===A&&(O+=(A=sn(o))*A),r>2&&0===j&&(O+=(j=sn(o))*j),O=(M-(O=Math.sqrt(O)))/O*i,d.vx+=(k*=O)*(M=(_*=_)/(g+_)),r>1&&(d.vy+=(A*=O)*M),r>2&&(d.vz+=(j*=O)*M),N.vx-=k*(M=1-M),r>1&&(N.vy-=A*M),r>2&&(N.vz-=j*M))}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<Math.pow(2,r);++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function d(){if(e){var r,o,i=e.length;for(n=new Array(i),r=0;r<i;++r)o=e[r],n[o.index]=+t(o,r,e)}}return"function"!=typeof t&&(t=on(null==t?1:+t)),a.initialize=function(t,...n){e=t,o=n.find((t=>"function"==typeof t))||Math.random,r=n.find((t=>[1,2,3].includes(t)))||2,d()},a.iterations=function(t){return arguments.length?(s=+t,a):s},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:on(+e),d(),a):t},a}function On(t,e,r,n){var o,i,s,a,u=on(.1);function d(t){for(var u=0,d=o.length;u<d;++u){var h=o[u],c=h.x-e||1e-6,l=(h.y||0)-r||1e-6,f=(h.z||0)-n||1e-6,g=Math.sqrt(c*c+l*l+f*f),p=(a[u]-g)*s[u]*t/g;h.vx+=c*p,i>1&&(h.vy+=l*p),i>2&&(h.vz+=f*p)}}function h(){if(o){var e,r=o.length;for(s=new Array(r),a=new Array(r),e=0;e<r;++e)a[e]=+t(o[e],e,o),s[e]=isNaN(a[e])?0:+u(o[e],e,o)}}return"function"!=typeof t&&(t=on(+t)),null==e&&(e=0),null==r&&(r=0),null==n&&(n=0),d.initialize=function(t,...e){o=t,i=e.find((t=>[1,2,3].includes(t)))||2,h()},d.strength=function(t){return arguments.length?(u="function"==typeof t?t:on(+t),h(),d):u},d.radius=function(e){return arguments.length?(t="function"==typeof e?e:on(+e),h(),d):t},d.x=function(t){return arguments.length?(e=+t,d):e},d.y=function(t){return arguments.length?(r=+t,d):r},d.z=function(t){return arguments.length?(n=+t,d):n},d}function Sn(t){var e,r,n,o=on(.1);function i(t){for(var o,i=0,s=e.length;i<s;++i)(o=e[i]).vx+=(n[i]-o.x)*r[i]*t}function s(){if(e){var i,s=e.length;for(r=new Array(s),n=new Array(s),i=0;i<s;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=on(null==t?0:+t)),i.initialize=function(t){e=t,s()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:on(+t),s(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:on(+e),s(),i):t},i}function zn(t){var e,r,n,o=on(.1);function i(t){for(var o,i=0,s=e.length;i<s;++i)(o=e[i]).vy+=(n[i]-o.y)*r[i]*t}function s(){if(e){var i,s=e.length;for(r=new Array(s),n=new Array(s),i=0;i<s;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=on(null==t?0:+t)),i.initialize=function(t){e=t,s()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:on(+t),s(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:on(+e),s(),i):t},i}function Rn(t){var e,r,n,o=on(.1);function i(t){for(var o,i=0,s=e.length;i<s;++i)(o=e[i]).vz+=(n[i]-o.z)*r[i]*t}function s(){if(e){var i,s=e.length;for(r=new Array(s),n=new Array(s),i=0;i<s;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=on(null==t?0:+t)),i.initialize=function(t){e=t,s()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:on(+t),s(),i):o},i.z=function(e){return arguments.length?(t="function"==typeof e?e:on(+e),s(),i):t},i}var In=r(5439),Pn=r.n(In);class Cn{constructor(t){this.id="dagre",this.options={},Object.assign(this.options,Cn.defaultOptions,t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),r))}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),r))}))}genericDagreLayout(e,r,n){return t(this,void 0,void 0,(function*(){const{nodeSize:t}=n,o=new In.graphlib.Graph;o.setGraph(n),o.setDefaultEdgeLabel((()=>({}))),[...r.getAllNodes(),...r.getAllEdges()].some((({id:t})=>c(t)))&&console.error("Dagre layout only support string id, it will convert number to string."),r.getAllNodes().forEach((e=>{const{id:r}=e,n=Object.assign({},e.data);if(void 0!==t){const[r,o]=Ut($t(t)?t(e):t);Object.assign(n,{width:r,height:o})}o.setNode(r.toString(),n)})),r.getAllEdges().forEach((({id:t,source:e,target:r})=>{o.setEdge(e.toString(),r.toString(),{id:t})})),Pn().layout(o);const i={nodes:[],edges:[]};return o.nodes().forEach((t=>{const n=o.node(t);i.nodes.push({id:t,data:n}),e&&r.mergeNodeData(t,n)})),o.edges().forEach((t=>{const n=o.edge(t),{id:s}=n,a=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}(n,["id"]),{v:u,w:d}=t;i.edges.push({id:s,source:u,target:d,data:a}),e&&r.mergeEdgeData(s,a)})),i}))}}Cn.defaultOptions={};class Dn{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const e=this.rx-t.rx,r=this.ry-t.ry;return Math.hypot(e,r)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){const e=t.rx-this.rx,r=t.ry-this.ry;let n=Math.hypot(e,r);n=n<1e-4?1e-4:n;const o=this.g*(this.degree+1)*(t.degree+1)/n;this.fx+=o*e/n,this.fy+=o*r/n}in(t){return t.contains(this.rx,this.ry)}add(t){const e=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/e,n=(this.ry*this.mass+t.ry*t.mass)/e,o=this.degree+t.degree;return new Dn({rx:r,ry:n,mass:e,degree:o})}}class Tn{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){const r=this.length/2;return t<=this.xmid+r&&t>=this.xmid-r&&e<=this.ymid+r&&e>=this.ymid-r}NW(){const t=this.xmid-this.length/4,e=this.ymid+this.length/4,r=this.length/2;return new Tn({xmid:t,ymid:e,length:r})}NE(){const t=this.xmid+this.length/4,e=this.ymid+this.length/4,r=this.length/2;return new Tn({xmid:t,ymid:e,length:r})}SW(){const t=this.xmid-this.length/4,e=this.ymid-this.length/4,r=this.length/2;return new Tn({xmid:t,ymid:e,length:r})}SE(){const t=this.xmid+this.length/4,e=this.ymid-this.length/4,r=this.length/2;return new Tn({xmid:t,ymid:e,length:r})}}class Ln{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}insert(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new Ln(this.quad.NW()),this.NE=new Ln(this.quad.NE()),this.SW=new Ln(this.quad.SW()),this.SE=new Ln(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}updateForce(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))}}const Fn={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1},qn={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},Vn={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300},Bn=(t,e)=>{let r;const n=t.rows||5,o=t.cols||5;return null==e?r=Math.min(n,o):Math.min(n,o)===t.rows?t.rows=e:t.cols=e,r},$n=(t,e)=>{let r;const n=t.rows||5,o=t.cols||5;return null==e?r=Math.max(n,o):Math.max(n,o)===t.rows?t.rows=e:t.cols=e,r},Gn=(t,e)=>t[`c-${e.row}-${e.col}`]||!1,Un=(t,e)=>t[`c-${e.row}-${e.col}`]=!0,Wn=(t,e)=>{const r=t.cols||5;e.col++,e.col>=r&&(e.col=0,e.row++)},Yn=(t,e,r,n,o,i,s,a)=>{let u,d;const h=o[t.id];if(h)u=h.col*r+r/2+e[0],d=h.row*n+n/2+e[1];else{for(;Gn(a,s);)Wn(i,s);u=s.col*r+r/2+e[0],d=s.row*n+n/2+e[1],Un(a,s),Wn(i,s)}t.data.x=u,t.data.y=d},Hn={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},Kn=(t,e,r,n,o,i)=>{e.forEach(((s,a)=>{r[a]={x:0,y:0},e.forEach(((e,u)=>{if(a===u)return;if(o[a]!==o[u])return;let d=s.x-e.x,h=s.y-e.y,c=Math.sqrt(d*d+h*h);if(0===c){c=1;const t=a>u?1:-1;d=.01*t,h=.01*t}if(c<i(t[a])/2+i(t[u])/2){const t=n*n/c;r[a].x+=d/c*t,r[a].y+=h/c*t}}))}))},Jn=(t,e,r,n,o,i,s,a)=>{const u=i||s/10;return n&&e.forEach(((e,r)=>{const n=t[r].x-t[o].x,i=t[r].y-t[o].y,s=Math.sqrt(n*n+i*i);let a=i/s,u=-n/s;const d=Math.sqrt(e.x*e.x+e.y*e.y);let h=Math.acos((a*e.x+u*e.y)/d);h>Math.PI/2&&(h-=Math.PI/2,a*=-1,u*=-1);const c=Math.cos(h)*d;e.x=a*c,e.y=u*c})),t.forEach(((i,s)=>{if(s===o)return;const d=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(d>0&&s!==o){const h=Math.min(u*(r/800),d);if(i.x+=e[s].x/d*h,i.y+=e[s].y/d*h,n){let e=i.x-t[o].x,r=i.y-t[o].y;const n=Math.sqrt(e*e+r*r);e=e/n*a[s],r=r/n*a[s],i.x=t[o].x+e,i.y=t[o].y+r}}})),t},Xn={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10},Qn={center:[0,0],width:300,height:300},Zn={circular:class{constructor(t={}){this.options=t,this.id="circular",this.options=Object.assign(Object.assign({},Zt),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericCircularLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericCircularLayout(!0,e,r)}))}genericCircularLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{width:o,height:i,center:s,divisions:a,startAngle:u=0,endAngle:d=2*Math.PI,angleRatio:h,ordering:c,clockwise:l,nodeSpacing:f,nodeSize:g}=t,p=r.getAllNodes(),v=r.getAllEdges(),[y,m,w]=((t,e,r)=>{let n=t,o=e,i=r;return n||"undefined"==typeof window||(n=window.innerWidth),o||"undefined"==typeof window||(o=window.innerHeight),i||(i=[n/2,o/2]),[n,o,i]})(o,i,s),x=null==p?void 0:p.length;if(!x||1===x)return Qt(r,e,w);const b=(d-u)/x;let{radius:E,startRadius:N,endRadius:_}=t;if(f){const t=Wt(10,f),e=Yt(10,g);let r=-1/0;p.forEach((t=>{const n=e(t);r<n&&(r=n)}));let n=0;p.forEach(((e,o)=>{n+=0===o?r||10:(t(e)||0)+(r||10)})),E=n/(2*Math.PI)}else E||N||_?!N&&_?N=_:N&&!_&&(_=N):E=Math.min(m,y)/2;const M=b*h;let k=[];k="topology"===c?te(r,p):"topology-directed"===c?te(r,p,!0):"degree"===c?function(t,e){const r=[];return e.forEach(((t,e)=>{r.push(Jt(t))})),r.sort(((e,r)=>t.getDegree(e.id,"both")-t.getDegree(r.id,"both"))),r}(r,p):p.map((t=>Jt(t)));const A=Math.ceil(x/a);for(let t=0;t<x;++t){let e=E;e||null===N||null===_||(e=N+t*(_-N)/(x-1)),e||(e=10+100*t/(x-1));let r=u+t%A*M+2*Math.PI/a*Math.floor(t/A);l||(r=d-t%A*M-2*Math.PI/a*Math.floor(t/A)),k[t].data.x=w[0]+Math.cos(r)*e,k[t].data.y=w[1]+Math.sin(r)*e}return e&&k.forEach((t=>{r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),{nodes:k,edges:v}}))}},concentric:oe,mds:or,random:class{constructor(t={}){this.options=t,this.id="random",this.options=Object.assign(Object.assign({},Qn),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericRandomLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericRandomLayout(!0,e,r)}))}genericRandomLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{center:o,width:i,height:s}=t,a=r.getAllNodes(),u=i||"undefined"==typeof window?i:window.innerWidth,d=s||"undefined"==typeof window?s:window.innerHeight,h=o||[u/2,d/2],c=[];return a&&a.forEach((t=>{c.push({id:t.id,data:{x:.9*(Math.random()-.5)*u+h[0],y:.9*(Math.random()-.5)*d+h[1]}})})),e&&c.forEach((t=>r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y}))),{nodes:c,edges:r.getAllEdges()}}))}},grid:class{constructor(t={}){this.options=t,this.id="grid",this.options=Object.assign(Object.assign({},Vn),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericGridLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericGridLayout(!0,e,r)}))}genericGridLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{begin:o=[0,0],condense:i,preventOverlapPadding:s,preventOverlap:a,rows:u,cols:d,nodeSpacing:h,nodeSize:l,width:f,height:g,position:p}=t;let{sortBy:v}=t;const y=r.getAllNodes(),m=r.getAllEdges(),w=null==y?void 0:y.length;if(!w||1===w)return Qt(r,e,o);const x=y.map((t=>Jt(t)));"id"===v||ee(v)&&void 0!==x[0].data[v]||(v="degree"),"degree"===v?x.sort(((t,e)=>r.getDegree(e.id,"both")-r.getDegree(t.id,"both"))):"id"===v?x.sort(((t,e)=>c(e.id)&&c(t.id)?e.id-t.id:`${t.id}`.localeCompare(`${e.id}`))):x.sort(((t,e)=>e.data[v]-t.data[v]));const b=f||"undefined"==typeof window?f:window.innerWidth,E=g||"undefined"==typeof window?g:window.innerHeight,N=w,_={rows:u,cols:d};if(null!=u&&null!=d)_.rows=u,_.cols=d;else if(null!=u&&null==d)_.rows=u,_.cols=Math.ceil(N/_.rows);else if(null==u&&null!=d)_.cols=d,_.rows=Math.ceil(N/_.cols);else{const t=Math.sqrt(N*E/b);_.rows=Math.round(t),_.cols=Math.round(b/E*t)}if(_.rows=Math.max(_.rows,1),_.cols=Math.max(_.cols,1),_.cols*_.rows>N){const t=Bn(_),e=$n(_);(t-1)*e>=N?Bn(_,t-1):(e-1)*t>=N&&$n(_,e-1)}else for(;_.cols*_.rows<N;){const t=Bn(_),e=$n(_);(e+1)*t>=N?$n(_,e+1):Bn(_,t+1)}let M=i?0:b/_.cols,k=i?0:E/_.rows;if(a||h){const t=Wt(10,h),e=Yt(30,l,!1);x.forEach((n=>{n.data.x&&n.data.y||(n.data.x=0,n.data.y=0);const o=r.getNode(n.id),[i,a]=Ut(e(o)||30),u=void 0!==t?t(n):s,d=i+u,h=a+u;M=Math.max(M,d),k=Math.max(k,h)}))}const A={},j={row:0,col:0},O={};for(let t=0;t<x.length;t++){const e=x[t];let n;if(p&&(n=p(r.getNode(e.id))),n&&(void 0!==n.row||void 0!==n.col)){const t={row:n.row,col:n.col};if(void 0===t.col)for(t.col=0;Gn(A,t);)t.col++;else if(void 0===t.row)for(t.row=0;Gn(A,t);)t.row++;O[e.id]=t,Un(A,t)}Yn(e,o,M,k,O,_,j,A)}const S={nodes:x,edges:m};return e&&x.forEach((t=>{r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),S}))}},radial:class{constructor(t={}){this.options=t,this.id="radial",this.options=Object.assign(Object.assign({},Xn),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericRadialLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericRadialLayout(!0,e,r)}))}genericRadialLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{width:o,height:i,center:s,focusNode:a,unitRadius:u,nodeSize:d,nodeSpacing:h,strictRadial:c,preventOverlap:l,maxPreventOverlapIteration:f,sortBy:g,linkDistance:p=50,sortStrength:v=10,maxIteration:y=1e3}=t,m=r.getAllNodes(),w=r.getAllEdges(),x=o||"undefined"==typeof window?o:window.innerWidth,b=i||"undefined"==typeof window?i:window.innerHeight,E=s||[x/2,b/2];if(!(null==m?void 0:m.length)||1===m.length)return Qt(r,e,E);let N=m[0];if(ee(a)){for(let t=0;t<m.length;t++)if(m[t].id===a){N=m[t];break}}else N=a||m[0];const _=((t,e)=>{let r=-1;return t.forEach(((t,n)=>{t.id===e&&(r=n)})),Math.max(r,0)})(m,N.id),M=tr({nodes:m,edges:w},!1),k=Ze(M),A=((t,e)=>{let r=0;for(let n=0;n<t[e].length;n++)t[e][n]!==1/0&&(r=t[e][n]>r?t[e][n]:r);return r})(k,_);((t,e,r)=>{const n=t.length;for(let o=0;o<n;o++)if(t[e][o]===1/0){t[e][o]=r,t[o][e]=r;for(let i=0;i<n;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=r+t[o][i],t[i][e]=r+t[o][i])}for(let r=0;r<n;r++)if(r!==e)for(let o=0;o<n;o++)if(t[r][o]===1/0){let n=Math.abs(t[e][r]-t[e][o]);n=0===n?1:n,t[r][o]=n}})(k,_,A+1);const j=k[_];let O=x-E[0]>E[0]?E[0]:x-E[0],S=b-E[1]>E[1]?E[1]:b-E[1];0===O&&(O=x/2),0===S&&(S=b/2);const z=Math.min(O,S),R=Math.max(...j),I=[],P=u||z/R;j.forEach(((t,e)=>{I[e]=t*P}));const C=((t,e,r,n,o,i,s)=>{if(!t)return[];const a=[];if(e){const u={};e.forEach(((e,d)=>{const h=[];e.forEach(((e,a)=>{var c,l;if(d===a)h.push(0);else if(n[d]===n[a])if("data"===i)h.push(e*(Math.abs(d-a)*s)/(n[d]/o));else if(i){let r,f;if(u[t[d].id])r=u[t[d].id];else{const e=("id"===i?t[d].id:null===(c=t[d].data)||void 0===c?void 0:c[i])||0;r=ee(e)?e.charCodeAt(0):e,u[t[d].id]=r}if(u[t[a].id])f=u[t[a].id];else{const e=("id"===i?t[a].id:null===(l=t[a].data)||void 0===l?void 0:l[i])||0;f=ee(e)?e.charCodeAt(0):e,u[t[a].id]=f}h.push(e*(Math.abs(r-f)*s)/(n[d]/o))}else h.push(e*r/(n[d]/o));else{const t=(r+o)/2;h.push(e*t)}})),a.push(h)}))}return a})(m,k,p,I,P,g,v),D=(t=>{const e=t.length,r=t[0].length,n=[];for(let o=0;o<e;o++){const e=[];for(let n=0;n<r;n++)0!==t[o][n]?e.push(1/(t[o][n]*t[o][n])):e.push(0);n.push(e)}return n})(C),T=((t,e,r)=>{try{const r=Ke.mul(Ke.pow(e,2),-.5),n=r.mean("row"),o=r.mean("column"),i=r.mean();r.add(i).subRowVector(n).subColumnVector(o);const s=new Qe(r),a=Ke.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map((e=>Ke.mul([e],[a]).toJSON()[0].splice(0,t)))}catch(t){const n=[];for(let t=0;t<e.length;t++){const t=Math.random()*r,e=Math.random()*r;n.push([t,e])}return n}})(p,C,p);let L,F=T.map((([t,e])=>({x:(isNaN(t)?Math.random()*p:t)-T[_][0],y:(isNaN(e)?Math.random()*p:e)-T[_][1]})));if(this.run(y,F,D,C,I,_),l){L=Ht(d,h);const t={nodes:m,nodeSizeFunc:L,positions:F,radii:I,height:b,width:x,strictRadial:Boolean(c),focusIdx:_,iterations:f||200,k:F.length/4.5};F=((t,e)=>{const r=Object.assign(Object.assign({},Hn),e),{positions:n,iterations:o,width:i,k:s,speed:a=100,strictRadial:u,focusIdx:d,radii:h=[],nodeSizeFunc:c}=r,l=t.getAllNodes(),f=[],g=i/10;for(let t=0;t<o;t++)n.forEach(((t,e)=>{f[e]={x:0,y:0}})),Kn(l,n,f,s,h,c),Jn(n,f,a,u,d,g,i,h);return n})(r,t)}const q=[];return F.forEach(((t,e)=>{const r=Jt(m[e]);r.data.x=t.x+E[0],r.data.y=t.y+E[1],q.push(r)})),e&&q.forEach((t=>r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y}))),{nodes:q,edges:w}}))}run(t,e,r,n,o,i){for(let s=0;s<=t;s++){const a=s/t;this.oneIteration(a,e,o,n,r,i)}}oneIteration(t,e,r,n,o,i){const s=1-t;e.forEach(((a,u)=>{const d=er(a,{x:0,y:0}),h=0===d?0:1/d;if(u===i)return;let c=0,l=0,f=0;e.forEach(((t,e)=>{if(u===e)return;const r=er(a,t),i=0===r?0:1/r,s=n[e][u];f+=o[u][e],c+=o[u][e]*(t.x+s*(a.x-t.x)*i),l+=o[u][e]*(t.y+s*(a.y-t.y)*i)}));const g=0===r[u]?0:1/r[u];f*=s,f+=t*g*g,c*=s,c+=t*g*a.x*h,a.x=c/f,l*=s,l+=t*g*a.y*h,a.y=l/f}))}},force:Me,d3force:rn,"d3-force-3d":class extends rn{constructor(){super(...arguments),this.id="d3-force-3d",this.config={inputNodeAttrs:["x","y","z","vx","vy","vz","fx","fy","fz"],outputNodeAttrs:["x","y","z","vx","vy","vz"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource","numDimensions"]},this.forceMap={link:dn,manyBody:Nn,center:_n,collide:jn,radial:On,x:Sn,y:zn,z:Rn},this.options={numDimensions:3,link:{id:t=>t.id},manyBody:{},center:{x:0,y:0,z:0}}}initSimulation(){return function(t,e){e=e||2;var r,n=Math.min(3,Math.max(1,Math.round(e))),o=1,i=.001,s=1-Math.pow(i,1/300),a=0,u=.6,d=new Map,h=qr(f),c=kr("tick","end"),l=function(){let t=1;return()=>(t=(1664525*t+1013904223)%yn)/yn}();function f(){g(),c.call("tick",r),o<i&&(h.stop(),c.call("end",r))}function g(e){var i,h,c=t.length;void 0===e&&(e=1);for(var l=0;l<e;++l)for(o+=(a-o)*s,d.forEach((function(t){t(o)})),i=0;i<c;++i)null==(h=t[i]).fx?h.x+=h.vx*=u:(h.x=h.fx,h.vx=0),n>1&&(null==h.fy?h.y+=h.vy*=u:(h.y=h.fy,h.vy=0)),n>2&&(null==h.fz?h.z+=h.vz*=u:(h.z=h.fz,h.vz=0));return r}function p(){for(var e,r=0,o=t.length;r<o;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||n>1&&isNaN(e.y)||n>2&&isNaN(e.z)){var i=10*(n>2?Math.cbrt(.5+r):n>1?Math.sqrt(.5+r):r),s=r*bn,a=r*En;1===n?e.x=i:2===n?(e.x=i*Math.cos(s),e.y=i*Math.sin(s)):(e.x=i*Math.sin(s)*Math.cos(a),e.y=i*Math.cos(s),e.z=i*Math.sin(s)*Math.sin(a))}(isNaN(e.vx)||n>1&&isNaN(e.vy)||n>2&&isNaN(e.vz))&&(e.vx=0,n>1&&(e.vy=0),n>2&&(e.vz=0))}}function v(e){return e.initialize&&e.initialize(t,l,n),e}return null==t&&(t=[]),p(),r={tick:g,restart:function(){return h.restart(f),r},stop:function(){return h.stop(),r},numDimensions:function(t){return arguments.length?(n=Math.min(3,Math.max(1,Math.round(t))),d.forEach(v),r):n},nodes:function(e){return arguments.length?(t=e,p(),d.forEach(v),r):t},alpha:function(t){return arguments.length?(o=+t,r):o},alphaMin:function(t){return arguments.length?(i=+t,r):i},alphaDecay:function(t){return arguments.length?(s=+t,r):+s},alphaTarget:function(t){return arguments.length?(a=+t,r):a},velocityDecay:function(t){return arguments.length?(u=1-t,r):1-u},randomSource:function(t){return arguments.length?(l=t,d.forEach(v),r):l},force:function(t,e){return arguments.length>1?(null==e?d.delete(t):d.set(t,v(e)),r):d.get(t)},find:function(){var e,r,o,i,s,a,u=Array.prototype.slice.call(arguments),d=u.shift()||0,h=(n>1?u.shift():null)||0,c=(n>2?u.shift():null)||0,l=u.shift()||1/0,f=0,g=t.length;for(l*=l,f=0;f<g;++f)(i=(e=d-(s=t[f]).x)*e+(r=h-(s.y||0))*r+(o=c-(s.z||0))*o)<l&&(a=s,l=i);return a},on:function(t,e){return arguments.length>1?(c.on(t,e),r):c.on(t)}}}()}},fruchterman:class{constructor(t={}){this.options=t,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},qn),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericFruchtermanLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericFruchtermanLayout(!0,e,r)}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}tick(t=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let e=0;e<t;e++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const e={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&e.nodes.forEach((t=>this.lastGraph.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===this.options.dimensions?t.data.z:void 0}))),e}genericFruchtermanLayout(e,r,n){return t(this,void 0,void 0,(function*(){if(this.running)return;const t=this.formatOptions(n),{dimensions:o,width:i,height:s,center:a,clustering:d,nodeClusterBy:h,maxIteration:c,onTick:l}=t,f=r.getAllNodes(),g=r.getAllEdges();if(!(null==f?void 0:f.length)){const t={nodes:[],edges:g};return this.lastResult=t,t}if(1===f.length){e&&r.mergeNodeData(f[0].id,{x:a[0],y:a[1],z:3===o?a[2]:void 0});const t={nodes:[Object.assign(Object.assign({},f[0]),{data:Object.assign(Object.assign({},f[0].data),{x:a[0],y:a[1],z:3===o?a[2]:void 0})})],edges:g};return this.lastResult=t,t}const p=f.map((t=>Jt(t,[i,s]))),v=new u({nodes:p,edges:g}),y={};if(d&&p.forEach((t=>{const e=t.data[h];y[e]||(y[e]={name:e,cx:0,cy:0,count:0})})),this.lastLayoutNodes=p,this.lastLayoutEdges=g,this.lastAssign=e,this.lastGraph=v,this.lastOptions=t,this.lastClusterMap=y,"undefined"==typeof window)return;let m=0;return new Promise((n=>{this.timeInterval=window.setInterval((()=>{this.running?(this.runOneStep(v,y,t),e&&p.forEach((({id:t,data:e})=>r.mergeNodeData(t,{x:e.x,y:e.y,z:3===o?e.z:void 0}))),null==l||l({nodes:p,edges:g}),m++,m>=c&&(window.clearInterval(this.timeInterval),n({nodes:p,edges:g}))):n({nodes:p,edges:g})}),0),this.running=!0}))}))}formatOptions(t={}){const e=Object.assign(Object.assign({},this.options),t),{clustering:r,nodeClusterBy:n}=e,{center:o,width:i,height:s}=e;return e.width=i||"undefined"==typeof window?i:window.innerWidth,e.height=s||"undefined"==typeof window?s:window.innerHeight,e.center=o||[e.width/2,e.height/2],e.clustering=r&&!!n,e}runOneStep(t,e,r){const{dimensions:n,height:o,width:i,gravity:s,center:a,speed:u,clustering:d,nodeClusterBy:h,clusterGravity:l}=r,f=o*i,g=Math.sqrt(f)/10,p=t.getAllNodes(),v=f/(p.length+1),y=Math.sqrt(v),m={};if(this.applyCalculate(t,m,y,v),d){for(const t in e)e[t].cx=0,e[t].cy=0,e[t].count=0;p.forEach((t=>{const{data:r}=t,n=e[r[h]];c(r.x)&&(n.cx+=r.x),c(r.y)&&(n.cy+=r.y),n.count++}));for(const t in e)e[t].cx/=e[t].count,e[t].cy/=e[t].count;const t=l||s;p.forEach(((r,n)=>{const{id:o,data:i}=r;if(!c(i.x)||!c(i.y))return;const s=e[i[h]],a=Math.sqrt((i.x-s.cx)*(i.x-s.cx)+(i.y-s.cy)*(i.y-s.cy)),u=y*t;m[o].x-=u*(i.x-s.cx)/a,m[o].y-=u*(i.y-s.cy)/a}))}p.forEach(((t,e)=>{const{id:r,data:o}=t;if(!c(o.x)||!c(o.y))return;const i=.01*y*s;m[r].x-=i*(o.x-a[0]),m[r].y-=i*(o.y-a[1]),3===n&&(m[r].z-=i*(o.z-a[2]))})),p.forEach(((e,r)=>{const{id:o,data:i}=e;if(c(i.fx)&&c(i.fy))return i.x=i.fx,i.y=i.fy,void(3===n&&(i.z=i.fz));if(!c(i.x)||!c(i.y))return;const s=Math.sqrt(m[o].x*m[o].x+m[o].y*m[o].y+(3===n?m[o].z*m[o].z:0));if(s>0){const e=Math.min(g*(u/800),s);t.mergeNodeData(o,{x:i.x+m[o].x/s*e,y:i.y+m[o].y/s*e,z:3===n?i.z+m[o].z/s*e:void 0})}}))}applyCalculate(t,e,r,n){this.calRepulsive(t,e,n),this.calAttractive(t,e,r)}calRepulsive(t,e,r){const n=t.getAllNodes();n.forEach((({data:t,id:o},i)=>{e[o]={x:0,y:0,z:0},n.forEach((({data:n,id:s},a)=>{if(i<=a||!c(t.x)||!c(n.x)||!c(t.y)||!c(n.y))return;let u=t.x-n.x,d=t.y-n.y,h=3===this.options.dimensions?t.z-n.z:0,l=u*u+d*d+h*h;0===l&&(l=1,u=.01,d=.01,h=.01);const f=r/l,g=u*f,p=d*f,v=h*f;e[o].x+=g,e[o].y+=p,e[s].x-=g,e[s].y-=p,3===this.options.dimensions&&(e[o].z+=v,e[s].z-=v)}))}))}calAttractive(t,e,r){t.getAllEdges().forEach((n=>{const{source:o,target:i}=n;if(!o||!i||o===i)return;const{data:s}=t.getNode(o),{data:a}=t.getNode(i);if(!(c(a.x)&&c(s.x)&&c(a.y)&&c(s.y)))return;const u=a.x-s.x,d=a.y-s.y,h=3===this.options.dimensions?a.z-s.z:0,l=Math.sqrt(u*u+d*d+h*h)/r,f=u*l,g=d*l,p=h*l;e[o].x+=f,e[o].y+=g,e[i].x-=f,e[i].y-=g,3===this.options.dimensions&&(e[o].z+=p,e[i].z-=p)}))}},forceAtlas2:class{constructor(t={}){this.options=t,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Fn),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericForceAtlas2Layout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericForceAtlas2Layout(!0,e,r)}))}genericForceAtlas2Layout(e,r,n){return t(this,void 0,void 0,(function*(){const t=r.getAllEdges(),o=r.getAllNodes(),i=this.formatOptions(n,o.length),{width:s,height:a,prune:d,maxIteration:h,nodeSize:c,center:l}=i;if(!(null==o?void 0:o.length)||1===o.length)return Qt(r,e,l);const f=o.map((t=>Jt(t,[s,a]))),g=t.filter((t=>{const{source:e,target:r}=t;return e!==r})),p=new u({nodes:f,edges:g}),v=this.getSizes(p,c);if(this.run(p,r,h,v,e,i),d){for(let t=0;t<g.length;t+=1){const{source:e,target:r}=g[t],n=p.getDegree(e),o=p.getDegree(e);if(n<=1){const t=p.getNode(r);p.mergeNodeData(e,{x:t.data.x,y:t.data.y})}else if(o<=1){const t=p.getNode(e);p.mergeNodeData(r,{x:t.data.x,y:t.data.y})}}const t=Object.assign(Object.assign({},i),{prune:!1,barnesHut:!1});this.run(p,r,100,v,e,t)}return{nodes:f,edges:t}}))}getSizes(t,e){const r=t.getAllNodes(),n={};for(let t=0;t<r.length;t+=1){const o=r[t];n[o.id]=Ht(e,void 0)(o)}return n}formatOptions(t={},e){const r=Object.assign(Object.assign({},this.options),t),{center:n,width:o,height:i,barnesHut:s,prune:a,maxIteration:u,kr:d,kg:h}=r;return r.width=o||"undefined"==typeof window?o:window.innerWidth,r.height=i||"undefined"==typeof window?i:window.innerHeight,r.center=n||[r.width/2,r.height/2],void 0===s&&e>250&&(r.barnesHut=!0),void 0===a&&e>100&&(r.prune=!0),0!==u||a?0===u&&a&&(r.maxIteration=100,e<=200&&e>100?r.maxIteration=500:e>200&&(r.maxIteration=950)):(r.maxIteration=250,e<=200&&e>100?r.maxIteration=1e3:e>200&&(r.maxIteration=1200)),d||(r.kr=50,e>100&&e<=500?r.kr=20:e>500&&(r.kr=1)),h||(r.kg=20,e>100&&e<=500?r.kg=10:e>500&&(r.kg=1)),r}run(t,e,r,n,o,i){const{kr:s,barnesHut:a,onTick:u}=i,d=t.getAllNodes();let h=0,c=r;const l={},f={},g={};for(let e=0;e<d.length;e+=1){const{data:r,id:n}=d[e];if(l[n]=[0,0],a){const o={id:e,rx:r.x,ry:r.y,mass:1,g:s,degree:t.getDegree(n)};g[n]=new Dn(o)}}for(;c>0;)h=this.oneStep(t,{iter:c,preventOverlapIters:50,krPrime:100,sg:h,forces:l,preForces:f,bodies:g,sizes:n},i),c--,null==u||u({nodes:d,edges:e.getAllEdges()});return t}oneStep(t,e,r){const{iter:n,preventOverlapIters:o,krPrime:i,sg:s,preForces:a,bodies:u,sizes:d}=e;let{forces:h}=e;const{preventOverlap:c,barnesHut:l}=r,f=t.getAllNodes();for(let t=0;t<f.length;t+=1){const{id:e}=f[t];a[e]=[...h[e]],h[e]=[0,0]}return h=this.getAttrForces(t,n,o,d,h,r),h=l&&(c&&n>o||!c)?this.getOptRepGraForces(t,h,u,r):this.getRepGraForces(t,n,o,h,i,d,r),this.updatePos(t,h,a,s,r)}getAttrForces(t,e,r,n,o,i){const{preventOverlap:s,dissuadeHubs:a,mode:u,prune:d}=i,h=t.getAllEdges();for(let i=0;i<h.length;i+=1){const{source:c,target:l}=h[i],f=t.getNode(c),g=t.getNode(l),p=t.getDegree(c),v=t.getDegree(l);if(d&&(p<=1||v<=1))continue;const y=[g.data.x-f.data.x,g.data.y-f.data.y];let m=Math.hypot(y[0],y[1]);m=m<1e-4?1e-4:m,y[0]=y[0]/m,y[1]=y[1]/m,s&&e<r&&(m=m-n[c]-n[l]);let w=m,x=w;"linlog"===u&&(w=Math.log(1+m),x=w),a&&(w=m/p,x=m/v),s&&e<r&&m<=0?(w=0,x=0):s&&e<r&&m>0&&(w=m,x=m),o[c][0]+=w*y[0],o[l][0]-=x*y[0],o[c][1]+=w*y[1],o[l][1]-=x*y[1]}return o}getOptRepGraForces(t,e,r,n){const{kg:o,center:i,prune:s}=n,a=t.getAllNodes(),u=a.length;let d=9e10,h=-9e10,c=9e10,l=-9e10;for(let e=0;e<u;e+=1){const{id:n,data:o}=a[e];s&&t.getDegree(n)<=1||(r[n].setPos(o.x,o.y),o.x>=h&&(h=o.x),o.x<=d&&(d=o.x),o.y>=l&&(l=o.y),o.y<=c&&(c=o.y))}const f=Math.max(h-d,l-c),g=new Tn({xmid:(h+d)/2,ymid:(l+c)/2,length:f,massCenter:i,mass:u}),p=new Ln(g);for(let e=0;e<u;e+=1){const{id:n}=a[e];s&&t.getDegree(n)<=1||r[n].in(g)&&p.insert(r[n])}for(let n=0;n<u;n+=1){const{id:u,data:d}=a[n],h=t.getDegree(u);if(s&&h<=1)continue;r[u].resetForce(),p.updateForce(r[u]),e[u][0]-=r[u].fx,e[u][1]-=r[u].fy;const c=[d.x-i[0],d.y-i[1]];let l=Math.hypot(c[0],c[1]);l=l<1e-4?1e-4:l,c[0]=c[0]/l,c[1]=c[1]/l;const f=o*(h+1);e[u][0]-=f*c[0],e[u][1]-=f*c[1]}return e}getRepGraForces(t,e,r,n,o,i,s){const{preventOverlap:a,kr:u,kg:d,center:h,prune:c}=s,l=t.getAllNodes(),f=l.length;for(let s=0;s<f;s+=1){const g=l[s],p=t.getDegree(g.id);for(let d=s+1;d<f;d+=1){const s=l[d],h=t.getDegree(s.id);if(c&&(p<=1||h<=1))continue;const f=[s.data.x-g.data.x,s.data.y-g.data.y];let v=Math.hypot(f[0],f[1]);v=v<1e-4?1e-4:v,f[0]=f[0]/v,f[1]=f[1]/v,a&&e<r&&(v=v-i[g.id]-i[s.id]);let y=u*(p+1)*(h+1)/v;a&&e<r&&v<0?y=o*(p+1)*(h+1):a&&e<r&&0===v?y=0:a&&e<r&&v>0&&(y=u*(p+1)*(h+1)/v),n[g.id][0]-=y*f[0],n[s.id][0]+=y*f[0],n[g.id][1]-=y*f[1],n[s.id][1]+=y*f[1]}const v=[g.data.x-h[0],g.data.y-h[1]],y=Math.hypot(v[0],v[1]);v[0]=v[0]/y,v[1]=v[1]/y;const m=d*(p+1);n[g.id][0]-=m*v[0],n[g.id][1]-=m*v[1]}return n}updatePos(t,e,r,n,o){const{ks:i,tao:s,prune:a,ksmax:u}=o,d=t.getAllNodes(),h=d.length,l=[],f=[];let g=0,p=0,v=n;for(let n=0;n<h;n+=1){const{id:o}=d[n],i=t.getDegree(o);if(a&&i<=1)continue;const s=[e[o][0]-r[o][0],e[o][1]-r[o][1]],u=Math.hypot(s[0],s[1]),h=[e[o][0]+r[o][0],e[o][1]+r[o][1]],c=Math.hypot(h[0],h[1]);l[n]=u,f[n]=c/2,g+=(i+1)*l[n],p+=(i+1)*f[n]}const y=v;v=s*p/g,0!==y&&(v=v>1.5*y?1.5*y:v);for(let r=0;r<h;r+=1){const{id:n,data:o}=d[r],s=t.getDegree(n);if(a&&s<=1)continue;if(c(o.fx)&&c(o.fy))continue;let h=i*v/(1+v*Math.sqrt(l[r])),f=Math.hypot(e[n][0],e[n][1]);f=f<1e-4?1e-4:f;const g=u/f;h=h>g?g:h;const p=h*e[n][0],y=h*e[n][1];t.mergeNodeData(n,{x:o.x+p,y:o.y+y})}return v}},dagre:Cn,antvDagre:class{constructor(t={}){this.options=t,this.id="antv-dagre",this.options=Object.assign(Object.assign({},Xt),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericDagreLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericDagreLayout(!0,e,r)}))}genericDagreLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.options),n),{nodeSize:o,align:i,rankdir:s="TB",ranksep:a,nodesep:d,ranksepFunc:h,nodesepFunc:l,edgeLabelSpace:f,ranker:g,nodeOrder:p,begin:v,controlPoints:y,radial:m,sortByCombo:w,preset:x}=t,b=new u({tree:[]}),E=Wt(a||50,h),N=Wt(d||50,l);let _=N,M=E;"LR"!==s&&"RL"!==s||(_=E,M=N);const k=Yt(10,o,!1),A=r.getAllNodes(),j=r.getAllEdges();let O;A.forEach((t=>{const e=Ut(k(t)),r=M(t),n=_(t),o=e[0]+2*n,i=e[1]+2*r,s=t.data.layer;c(s)?b.addNode({id:t.id,data:{width:o,height:i,layer:s}}):b.addNode({id:t.id,data:{width:o,height:i}})})),w&&(b.attachTreeStructure("combo"),A.forEach((t=>{const{parentId:e}=t.data;void 0!==e&&b.hasNode(e)&&b.setParent(t.id,e,"combo")}))),j.forEach((t=>{b.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||1}})})),(null==x?void 0:x.length)&&(O=new u({nodes:x})),((t,e)=>{const{edgeLabelSpace:r,keepNodeOrder:n,prevGraph:o,rankdir:i,ranksep:s}=e;var a,d;!n&&o&&(d=o,(a=t).getAllNodes().forEach((t=>{const e=a.getNode(t.id);if(d.hasNode(t.id)){const r=d.getNode(t.id);e.data.fixorder=r.data._order,delete r.data._order}else delete e.data.fixorder})));const h=(t=>{const e=new u({tree:[]});return t.getAllNodes().forEach((r=>{const n=Bt(t.getNode(r.id).data),o=Object.assign(Object.assign({},kt),n),i=Vt(o,Mt);e.hasNode(r.id)||e.addNode({id:r.id,data:Object.assign({},i)});const s=t.hasTreeStructure("combo")?t.getParent(r.id,"combo"):t.getParent(r.id);null==s||(e.hasNode(s.id)||e.addNode(Object.assign({},s)),e.setParent(r.id,s.id))})),t.getAllEdges().forEach((r=>{const n=Bt(t.getEdge(r.id).data),o={};null==Ot||Ot.forEach((t=>{void 0!==n[t]&&(o[t]=n[t])})),e.addEdge({id:r.id,source:r.source,target:r.target,data:Object.assign({},jt,Vt(n,At),o)})})),e})(t);let c;r&&(e.ranksep=((t,e)=>{const{ranksep:r=0,rankdir:n}=e;return t.getAllNodes().forEach((t=>{isNaN(t.data.layer)||t.data.layer||(t.data.layer=0)})),t.getAllEdges().forEach((t=>{var e;t.data.minlen*=2,"c"!==(null===(e=t.data.labelpos)||void 0===e?void 0:e.toLowerCase())&&("TB"===n||"BT"===n?t.data.width+=t.data.labeloffset:t.data.height+=t.data.labeloffset)})),r/2})(h,{rankdir:i,ranksep:s}));try{c=_t(h,e)}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}((t,e)=>{t.getAllNodes().forEach((r=>{var n;const o=t.getNode(r.id);if(o){const t=e.getNode(r.id);o.data.x=t.data.x,o.data.y=t.data.y,o.data._order=t.data.order,o.data._rank=t.data.rank,(null===(n=e.getChildren(r.id))||void 0===n?void 0:n.length)&&(o.data.width=t.data.width,o.data.height=t.data.height)}})),t.getAllEdges().forEach((r=>{const n=t.getEdge(r.id),o=e.getEdge(r.id);n.data.points=o?o.data.points:[],o&&o.data.hasOwnProperty("x")&&(n.data.x=o.data.x,n.data.y=o.data.y)}))})(t,h)})(b,{prevGraph:O,edgeLabelSpace:f,keepNodeOrder:!!p,nodeOrder:p||[],acyclicer:"greedy",ranker:g,rankdir:s,nodesep:d,align:i});const S=[0,0];if(v){let t=1/0,e=1/0;b.getAllNodes().forEach((r=>{t>r.data.x&&(t=r.data.x),e>r.data.y&&(e=r.data.y)})),b.getAllEdges().forEach((r=>{var n;null===(n=r.data.points)||void 0===n||n.forEach((r=>{t>r.x&&(t=r.x),e>r.y&&(e=r.y)}))})),S[0]=v[0]-t,S[1]=v[1]-e}const z="LR"===s||"RL"===s;if(m);else{const t=new Set,e="BT"===s||"RL"===s?(t,e)=>e-t:(t,e)=>t-e;b.getAllNodes().forEach((e=>{e.data.x=e.data.x+S[0],e.data.y=e.data.y+S[1],t.add(z?e.data.x:e.data.y)}));const r=Array.from(t).sort(e),n=z?(t,e)=>t.x!==e.x:(t,e)=>t.y!==e.y,o=z?(t,e,r)=>{const n=Math.max(e.y,r.y),o=Math.min(e.y,r.y);return t.filter((t=>t.y<=n&&t.y>=o))}:(t,e,r)=>{const n=Math.max(e.x,r.x),o=Math.min(e.x,r.x);return t.filter((t=>t.x<=n&&t.x>=o))};b.getAllEdges().forEach(((t,e)=>{var i;f&&y&&"loop"!==t.data.type&&(t.data.controlPoints=((t,e,r,n,o,i,s)=>{let a=(null==t?void 0:t.slice(1,t.length-1))||[];if(e&&r){let{x:t,y:u}=e.data,{x:d,y:h}=r.data;if(o&&(t=e.data.y,u=e.data.x,d=r.data.y,h=r.data.x),h!==u&&t!==d){const c=n.indexOf(u),l=n[c+1];if(l){const t=a[0],e=o?{x:(u+l)/2,y:(null==t?void 0:t.y)||d}:{x:(null==t?void 0:t.x)||d,y:(u+l)/2};t&&!i(t,e)||a.unshift(e)}const f=n.indexOf(h),g=Math.abs(f-c);if(1===g)a=s(a,e.data,r.data),a.length||a.push(o?{x:(u+h)/2,y:t}:{x:t,y:(u+h)/2});else if(g>1){const e=n[f-1];if(e){const r=a[a.length-1],n=o?{x:(h+e)/2,y:(null==r?void 0:r.y)||d}:{x:(null==r?void 0:r.x)||t,y:(h+e)/2};r&&!i(r,n)||a.push(n)}}}}return a})(null===(i=t.data.points)||void 0===i?void 0:i.map((({x:t,y:e})=>({x:t+S[0],y:e+S[1]}))),b.getNode(t.source),b.getNode(t.target),r,z,n,o))}))}let R=[];R=b.getAllNodes().map((t=>Jt(t)));const I=b.getAllEdges();return e&&(R.forEach((t=>{r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),I.forEach((t=>{r.mergeEdgeData(t.id,{controlPoints:t.data.controlPoints})}))),{nodes:R,edges:I}}))}},comboCombined:class{constructor(t={}){this.options=t,this.id="comboCombined",this.options=Object.assign(Object.assign({},dr),t)}execute(e,r){return t(this,void 0,void 0,(function*(){return this.genericComboCombinedLayout(!1,e,r)}))}assign(e,r){return t(this,void 0,void 0,(function*(){yield this.genericComboCombinedLayout(!0,e,r)}))}genericComboCombinedLayout(e,r,n){return t(this,void 0,void 0,(function*(){const t=this.initVals(Object.assign(Object.assign({},this.options),n)),{center:o,treeKey:i,outerLayout:s}=t,a=r.getAllNodes().filter((t=>!t.data._isCombo)),d=r.getAllNodes().filter((t=>t.data._isCombo)),h=r.getAllEdges(),c=null==a?void 0:a.length;if(!c||1===c)return Qt(r,e,o);const l=[],f=new Map;a.forEach((t=>{f.set(t.id,t)}));const g=new Map;d.forEach((t=>{g.set(t.id,t)}));const p=new Map,v=this.getInnerGraphs(r,i,f,g,h,t,p);yield Promise.all(v);const y=new Map,m=[],w=new Map;let x=!0;r.getRoots(i).forEach((t=>{const e=p.get(t.id),n=g.get(t.id)||f.get(t.id),o={id:t.id,data:Object.assign(Object.assign({},t.data),{x:e.data.x||n.data.x,y:e.data.y||n.data.y,fx:e.data.fx||n.data.fx,fy:e.data.fy||n.data.fy,mass:e.data.mass||n.data.mass,size:e.data.size})};m.push(o),y.set(t.id,!0),isNaN(o.data.x)||0===o.data.x||isNaN(o.data.y)||0===o.data.y?(o.data.x=100*Math.random(),o.data.y=100*Math.random()):x=!1,rr(r,[t],(e=>{e.id!==t.id&&w.set(e.id,t.id)}),"TB",i)}));const b=[];let E;if(h.forEach((t=>{const e=w.get(t.source)||t.source,r=w.get(t.target)||t.target;e!==r&&y.has(e)&&y.has(r)&&b.push({id:t.id,source:e,target:r,data:{}})})),null==m?void 0:m.length){if(1===m.length)m[0].data.x=o[0],m[0].data.y=o[1];else{const t=new u({nodes:m,edges:b}),e=s||new Me;if(x&&ur[e.id]){const e=m.length<100?new or:new oe;yield e.assign(t)}const r=Object.assign({center:o,kg:5,preventOverlap:!0,animate:!1},"force"===e.id?{gravity:1,factor:4,linkDistance:(t,e,r)=>(Math.max(...e.data.size)||32)/2+(Math.max(...r.data.size)||32)/2+200}:{});E=yield hr(e,t,r)}p.forEach((t=>{var e;const r=E.nodes.find((e=>e.id===t.id));if(r){const{x:e,y:n}=r.data;t.data.visited=!0,t.data.x=e,t.data.y=n,l.push({id:t.id,data:{x:e,y:n}})}const{x:n,y:o}=t.data;null===(e=t.data.nodes)||void 0===e||e.forEach((t=>{l.push({id:t.id,data:{x:t.data.x+n,y:t.data.y+o}})}))})),p.forEach((({data:t})=>{const{x:e,y:r,visited:n,nodes:o}=t;null==o||o.forEach((t=>{if(!n){const n=l.find((e=>e.id===t.id));n.data.x+=e||0,n.data.y+=r||0}}))}))}return e&&l.forEach((t=>{r.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})})),{nodes:l,edges:h}}))}initVals(t){const e=Object.assign({},t),{nodeSize:r,spacing:n,comboPadding:o}=t;let i,s,a;if(s=c(n)?()=>n:$t(n)?n:()=>0,e.spacing=s,r)if($t(r))i=t=>{const e=r(t),n=s(t);return re(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+n)/2:((e||32)+n)/2};else if(re(r)){const t=(r[0]>r[1]?r[0]:r[1])/2;i=e=>t+s(e)/2}else{const t=r/2;i=e=>t+s(e)/2}else i=t=>{const e=s(t);return t.size?re(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+e)/2:Gt(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+e)/2:(t.size+e)/2:32+e/2};return e.nodeSize=i,a=c(o)?()=>o:re(o)?()=>Math.max.apply(null,o):$t(o)?o:()=>0,e.comboPadding=a,e}getInnerGraphs(e,r,n,o,i,s,a){const{nodeSize:d,comboPadding:h,spacing:l,innerLayout:f}=s,g=f||new oe({}),p={center:[0,0],preventOverlap:!0,nodeSpacing:l},v=[],y=t=>{let e=(null==h?void 0:h(t))||10;return re(e)&&(e=Math.max(...e)),{size:e?[2*e,2*e]:[30,30],padding:e}};return e.getRoots(r).forEach((s=>{a.set(s.id,{id:s.id,data:{nodes:[],size:y(s).size}});let h=Promise.resolve();rr(e,[s],(s=>{var l;if(!s.data._isCombo)return;const{size:f,padding:v}=y(s);if(null===(l=e.getChildren(s.id,r))||void 0===l?void 0:l.length){const l=a.get(s.id);a.set(s.id,{id:s.id,data:Object.assign({nodes:[]},null==l?void 0:l.data)});const f=new Map,y=e.getChildren(s.id,r).map((t=>{if(t.data._isCombo)return a.has(t.id)||a.set(t.id,{id:t.id,data:Object.assign({},t.data)}),f.set(t.id,!0),a.get(t.id);const e=n.get(t.id)||o.get(t.id);return f.set(t.id,!0),{id:t.id,data:Object.assign(Object.assign({},e.data),t.data)}})),m={nodes:y,edges:i.filter((t=>f.has(t.source)&&f.has(t.target)))};let w=1/0;y.forEach((t=>{var e;let{size:r}=t.data;r||(r=(null===(e=a.get(t.id))||void 0===e?void 0:e.data.size)||(null==d?void 0:d(t))||[30,30]),c(r)&&(r=[r,r]);const[n,o]=r;w>n&&(w=n),w>o&&(w=o),t.data.size=r})),h=h.then((()=>t(this,void 0,void 0,(function*(){const t=new u(m);yield hr(g,t,p,!0);const{minX:e,minY:r,maxX:n,maxY:o}=(t=>{let e=1/0,r=1/0,n=-1/0,o=-1/0;return t.forEach((t=>{let i=t.data.size;re(i)?1===i.length&&(i=[i[0],i[0]]):c(i)?i=[i,i]:(void 0===i||isNaN(i))&&(i=[30,30]);const s=[i[0]/2,i[1]/2],a=t.data.x-s[0],u=t.data.x+s[0],d=t.data.y-s[1],h=t.data.y+s[1];e>a&&(e=a),r>d&&(r=d),n<u&&(n=u),o<h&&(o=h)})),{minX:e,minY:r,maxX:n,maxY:o}})(y),i=(n+e)/2,d=(o+r)/2;m.nodes.forEach((t=>{t.data.x-=i,t.data.y-=d}));const h=[Math.max(n-e,w)+2*v,Math.max(o-r,w)+2*v];a.get(s.id).data.size=h,a.get(s.id).data.nodes=y}))))}else a.set(s.id,{id:s.id,data:Object.assign(Object.assign({},s.data),{size:f})});return!0}),"BT",r),v.push(h)})),v}}};let to;function eo(){(null==to?void 0:to.stop)&&to.stop()}function ro(e,r){return t(this,void 0,void 0,(function*(){const{layout:{id:t,options:n,iterations:o},nodes:i,edges:s}=e,a=new u({nodes:i,edges:s}),d=Zn[t];if(!d)throw new Error(`Unknown layout id: ${t}`);to=new d(n);let h=yield to.execute(a);return ar(to)&&(to.stop(),h=to.tick(o)),[h,r]}))}addEventListener("message",(function(t){var e,r=t.data,o=r.type,i=r.method,s=r.id,a=r.params;"RPC"===o&&i&&((e=n[i])?Promise.resolve().then((function(){return e.apply(n,a)})):Promise.reject("No such method")).then((function(t){postMessage({type:"RPC",id:s,result:t})})).catch((function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:"RPC",id:s,error:e})}))})),postMessage({type:"RPC",method:"ready"})})()})();
//# sourceMappingURL=e2b4e534ff10c7df8b27.worker.js.map