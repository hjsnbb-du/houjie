{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/callSuper.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/inherits.js","../../g-plugin-dom-interaction/dist/index.esm.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../g-plugin-svg-picker/dist/index.esm.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../../../node_modules/.pnpm/@antv+util@3.3.10/node_modules/@antv/util/esm/lodash/is-nil.js","../../../node_modules/.pnpm/@antv+util@3.3.10/node_modules/@antv/util/esm/lodash/is-string.js","../../../node_modules/.pnpm/@antv+util@3.3.10/node_modules/@antv/util/esm/lodash/clamp.js","../../../node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/common.js","../../../node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/mat4.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../g-plugin-svg-renderer/dist/index.esm.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../src/SVGContextService.ts","../src/ContextRegisterPlugin.ts","../src/index.ts"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };","/*!\n * @antv/g-plugin-dom-interaction\n * @description A G plugin\n * @version 2.1.19\n * @date 1/2/2025, 2:55:40 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { AbstractRendererPlugin } from '@antv/g-lite';\n\n// const MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\n/**\n * listen to mouse/touch/pointer events on DOM wrapper, trigger pointer events\n */\nvar DOMInteractionPlugin = /*#__PURE__*/function () {\n  function DOMInteractionPlugin() {\n    _classCallCheck(this, DOMInteractionPlugin);\n  }\n  return _createClass(DOMInteractionPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext,\n        config = context.config;\n      this.context = context;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      // const SUPPORT_ONLY_TOUCH = canvas.supportsTouchEvents && MOBILE_REGEX.test(navigator.userAgent);\n\n      var onPointerMove = function onPointerMove(ev) {\n        renderingService.hooks.pointerMove.call(ev);\n      };\n      var onPointerUp = function onPointerUp(ev) {\n        renderingService.hooks.pointerUp.call(ev);\n      };\n      var onPointerDown = function onPointerDown(ev) {\n        renderingService.hooks.pointerDown.call(ev);\n      };\n      var onPointerOver = function onPointerOver(ev) {\n        renderingService.hooks.pointerOver.call(ev);\n      };\n      var onPointerOut = function onPointerOut(ev) {\n        renderingService.hooks.pointerOut.call(ev);\n      };\n      var onPointerCancel = function onPointerCancel(ev) {\n        renderingService.hooks.pointerCancel.call(ev);\n      };\n      var onPointerWheel = function onPointerWheel(ev) {\n        renderingService.hooks.pointerWheel.call(ev);\n      };\n      var onClick = function onClick(ev) {\n        renderingService.hooks.click.call(ev);\n      };\n      var addPointerEventListener = function addPointerEventListener($el) {\n        runtime.globalThis.document.addEventListener('pointermove', onPointerMove, true);\n        $el.addEventListener('pointerdown', onPointerDown, true);\n        $el.addEventListener('pointerleave', onPointerOut, true);\n        $el.addEventListener('pointerover', onPointerOver, true);\n        runtime.globalThis.addEventListener('pointerup', onPointerUp, true);\n        runtime.globalThis.addEventListener('pointercancel', onPointerCancel, true);\n      };\n      var addTouchEventListener = function addTouchEventListener($el) {\n        $el.addEventListener('touchstart', onPointerDown, true);\n        $el.addEventListener('touchend', onPointerUp, true);\n        $el.addEventListener('touchmove', onPointerMove, true);\n        $el.addEventListener('touchcancel', onPointerCancel, true);\n      };\n      var addMouseEventListener = function addMouseEventListener($el) {\n        runtime.globalThis.document.addEventListener('mousemove', onPointerMove, true);\n        $el.addEventListener('mousedown', onPointerDown, true);\n        $el.addEventListener('mouseout', onPointerOut, true);\n        $el.addEventListener('mouseover', onPointerOver, true);\n        runtime.globalThis.addEventListener('mouseup', onPointerUp, true);\n      };\n      var removePointerEventListener = function removePointerEventListener($el) {\n        runtime.globalThis.document.removeEventListener('pointermove', onPointerMove, true);\n        $el.removeEventListener('pointerdown', onPointerDown, true);\n        $el.removeEventListener('pointerleave', onPointerOut, true);\n        $el.removeEventListener('pointerover', onPointerOver, true);\n        runtime.globalThis.removeEventListener('pointerup', onPointerUp, true);\n        runtime.globalThis.removeEventListener('pointercancel', onPointerCancel, true);\n      };\n      var removeTouchEventListener = function removeTouchEventListener($el) {\n        $el.removeEventListener('touchstart', onPointerDown, true);\n        $el.removeEventListener('touchend', onPointerUp, true);\n        $el.removeEventListener('touchmove', onPointerMove, true);\n        $el.removeEventListener('touchcancel', onPointerCancel, true);\n      };\n      var removeMouseEventListener = function removeMouseEventListener($el) {\n        runtime.globalThis.document.removeEventListener('mousemove', onPointerMove, true);\n        $el.removeEventListener('mousedown', onPointerDown, true);\n        $el.removeEventListener('mouseout', onPointerOut, true);\n        $el.removeEventListener('mouseover', onPointerOver, true);\n        runtime.globalThis.removeEventListener('mouseup', onPointerUp, true);\n      };\n      renderingService.hooks.init.tap(DOMInteractionPlugin.tag, function () {\n        var $el = _this.context.contextService.getDomElement();\n\n        // @ts-ignore\n        if (runtime.globalThis.navigator.msPointerEnabled) {\n          // @ts-ignore\n          $el.style.msContentZooming = 'none';\n          // @ts-ignore\n          $el.style.msTouchAction = 'none';\n        } else if (canvas.supportsPointerEvents) {\n          $el.style.touchAction = 'none';\n        }\n        if (canvas.supportsPointerEvents) {\n          addPointerEventListener($el);\n        } else {\n          addMouseEventListener($el);\n        }\n        if (canvas.supportsTouchEvents) {\n          addTouchEventListener($el);\n        }\n        if (config.useNativeClickEvent) {\n          $el.addEventListener('click', onClick, true);\n        }\n\n        // use passive event listeners\n        // @see https://zhuanlan.zhihu.com/p/24555031\n        $el.addEventListener('wheel', onPointerWheel, {\n          passive: true,\n          capture: true\n        });\n      });\n      renderingService.hooks.destroy.tap(DOMInteractionPlugin.tag, function () {\n        var $el = _this.context.contextService.getDomElement();\n\n        // @ts-ignore\n        if (runtime.globalThis.navigator.msPointerEnabled) {\n          // @ts-ignore\n          $el.style.msContentZooming = '';\n          // @ts-ignore\n          $el.style.msTouchAction = '';\n        } else if (canvas.supportsPointerEvents) {\n          $el.style.touchAction = '';\n        }\n        if (canvas.supportsPointerEvents) {\n          removePointerEventListener($el);\n        } else {\n          removeMouseEventListener($el);\n        }\n        if (canvas.supportsTouchEvents) {\n          removeTouchEventListener($el);\n        }\n        if (config.useNativeClickEvent) {\n          $el.removeEventListener('click', onClick, true);\n        }\n        $el.removeEventListener('wheel', onPointerWheel, true);\n      });\n    }\n  }]);\n}();\nDOMInteractionPlugin.tag = 'DOMInteraction';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'dom-interaction';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new DOMInteractionPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","import _typeof from \"./typeof.js\";\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  };\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nexport { _regeneratorRuntime as default };","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","/*!\n * @antv/g-plugin-svg-picker\n * @description A G plugin for picking in SVG\n * @version 2.0.32\n * @date 1/2/2025, 2:57:07 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { AbstractRendererPlugin } from '@antv/g-lite';\nimport _createForOfIteratorHelper from '@babel/runtime/helpers/createForOfIteratorHelper';\nimport _regeneratorRuntime from '@babel/runtime/helpers/regeneratorRuntime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\n\n/**\n * pick shape(s) with Mouse/Touch event\n *\n * 1. find AABB with r-tree\n * 2. use elementFromPoint\n */\nvar SVGPickerPlugin = /*#__PURE__*/function () {\n  function SVGPickerPlugin() {\n    _classCallCheck(this, SVGPickerPlugin);\n  }\n  return _createClass(SVGPickerPlugin, [{\n    key: \"apply\",\n    value: function apply(context, runtime) {\n      var _this = this;\n      var doc = context.config.document,\n        renderingService = context.renderingService,\n        svgElementMap = context.svgElementMap;\n      renderingService.hooks.pick.tapPromise(SVGPickerPlugin.tag, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(result) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", _this.pick(svgElementMap, doc, result));\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      renderingService.hooks.pickSync.tap(SVGPickerPlugin.tag, function (result) {\n        return _this.pick(svgElementMap, doc, result);\n      });\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(svgElementMap, doc, result) {\n      var topmost = result.topmost,\n        _result$position = result.position,\n        clientX = _result$position.clientX,\n        clientY = _result$position.clientY;\n      try {\n        var targets = [];\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementsFromPoint\n        var _iterator = _createForOfIteratorHelper((doc || document).elementsFromPoint(clientX, clientY)),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var element = _step.value;\n            if (element.shadowRoot && element.shadowRoot !== doc) {\n              return this.pick(svgElementMap, element.shadowRoot, result);\n            }\n            var target = svgElementMap.get(element);\n            // don't need to account for `visibility` since DOM API already does\n            if (target && target.isInteractive()) {\n              targets.push(target);\n              if (topmost) {\n                result.picked = targets;\n                return result;\n              }\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        result.picked = targets;\n      } catch (_unused) {\n        result.picked = [];\n      }\n      return result;\n    }\n  }]);\n}();\nSVGPickerPlugin.tag = 'SVGPicker';\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    _classCallCheck(this, Plugin);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Plugin, [].concat(args));\n    _this.name = 'svg-picker';\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init() {\n      this.addRenderingPlugin(new SVGPickerPlugin());\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { Plugin };\n//# sourceMappingURL=index.esm.js.map\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nfunction _createForOfIteratorHelper(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (!t) {\n    if (Array.isArray(r) || (t = unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n      t && (r = t);\n      var _n = 0,\n        F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          return _n >= r.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: r[_n++]\n          };\n        },\n        e: function e(r) {\n          throw r;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var o,\n    a = !0,\n    u = !1;\n  return {\n    s: function s() {\n      t = t.call(r);\n    },\n    n: function n() {\n      var r = t.next();\n      return a = r.done, r;\n    },\n    e: function e(r) {\n      u = !0, o = r;\n    },\n    f: function f() {\n      try {\n        a || null == t[\"return\"] || t[\"return\"]();\n      } finally {\n        if (u) throw o;\n      }\n    }\n  };\n}\nexport { _createForOfIteratorHelper as default };","/**\n * 判断值是否为 null 或 undefined\n * @return 是否为 null 或 undefined\n */\nexport default function isNil(value) {\n    return value === null || value === undefined;\n}\n//# sourceMappingURL=is-nil.js.map","/**\n * 判断值是否为字符串\n * @return 是否为字符串\n */\nexport default function isString(value) {\n    return typeof value === 'string';\n}\n//# sourceMappingURL=is-string.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","/*!\n * @antv/g-plugin-svg-renderer\n * @description A G plugin of renderer implementation with SVG\n * @version 2.2.14\n * @date 1/2/2025, 2:56:11 AM\n * @author AntVis\n * @docs https://g.antv.antgroup.com/\n */\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _callSuper from '@babel/runtime/helpers/callSuper';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport { isDisplayObject, translatePathToString, UnitType, isCSSRGB, isPattern, isBrowser, GradientType, computeLinearGradient, computeRadialGradient, isCSSGradientValue, parseTransform, ElementEvent, RenderReason, Shape, propertyMetadataCache, AbstractRendererPlugin } from '@antv/g-lite';\nimport { isString, clamp, isNil } from '@antv/util';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { mat4 } from 'gl-matrix';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\n\nvar ElementSVG = /*#__PURE__*/_createClass(function ElementSVG() {\n  _classCallCheck(this, ElementSVG);\n});\nElementSVG.tag = 'c-svg-element';\n\nfunction updateImageElementAttribute($el, parsedStyle) {\n  var _parsedStyle$src = parsedStyle.src,\n    src = _parsedStyle$src === void 0 ? '' : _parsedStyle$src,\n    _parsedStyle$x = parsedStyle.x,\n    x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n    _parsedStyle$y = parsedStyle.y,\n    y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n    width = parsedStyle.width,\n    height = parsedStyle.height;\n  $el.setAttribute('x', \"\".concat(x));\n  $el.setAttribute('y', \"\".concat(y));\n  if (isString(src)) {\n    $el.setAttribute('href', src);\n  } else if (src instanceof Image) {\n    if (!width) {\n      $el.setAttribute('width', \"\".concat(src.width));\n    }\n    if (!height) {\n      $el.setAttribute('height', \"\".concat(src.height));\n    }\n    $el.setAttribute('href', src.src);\n  } else if (\n  // @ts-ignore\n  src instanceof HTMLElement && isString(src.nodeName) && src.nodeName.toUpperCase() === 'CANVAS') {\n    $el.setAttribute('href', src.toDataURL());\n    // @ts-ignore\n  } else if (src instanceof ImageData) {\n    var canvas = document.createElement('canvas');\n    // @ts-ignore\n    canvas.setAttribute('width', \"\".concat(src.width));\n    // @ts-ignore\n    canvas.setAttribute('height', \"\".concat(src.height));\n    var context = canvas.getContext('2d');\n    if (context) {\n      context.putImageData(src, 0, 0);\n      if (!width) {\n        // @ts-ignore\n        $el.setAttribute('width', \"\".concat(src.width));\n      }\n      if (!height) {\n        // @ts-ignore\n        $el.setAttribute('height', \"\".concat(src.height));\n      }\n      $el.setAttribute('href', canvas.toDataURL());\n    }\n  }\n}\n\nfunction updateLineElementAttribute($el, parsedStyle) {\n  var x1 = parsedStyle.x1,\n    y1 = parsedStyle.y1,\n    x2 = parsedStyle.x2,\n    y2 = parsedStyle.y2,\n    markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  // @see https://github.com/antvis/g/issues/1038\n  $el.setAttribute('x1', \"\".concat(x1 + startOffsetX));\n  $el.setAttribute('y1', \"\".concat(y1 + startOffsetY));\n  $el.setAttribute('x2', \"\".concat(x2 + endOffsetX));\n  $el.setAttribute('y2', \"\".concat(y2 + endOffsetY));\n}\n\nfunction updatePathElementAttribute($el, parsedStyle) {\n  var d = parsedStyle.d,\n    markerStart = parsedStyle.markerStart,\n    markerEnd = parsedStyle.markerEnd,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var startOffsetX = 0;\n  var startOffsetY = 0;\n  var endOffsetX = 0;\n  var endOffsetY = 0;\n  var rad = 0;\n  var x;\n  var y;\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    var _getStartTangent = markerStart.parentNode.getStartTangent(),\n      _getStartTangent2 = _slicedToArray(_getStartTangent, 2),\n      p1 = _getStartTangent2[0],\n      p2 = _getStartTangent2[1];\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    var _getEndTangent = markerEnd.parentNode.getEndTangent(),\n      _getEndTangent2 = _slicedToArray(_getEndTangent, 2),\n      _p = _getEndTangent2[0],\n      _p2 = _getEndTangent2[1];\n    x = _p[0] - _p2[0];\n    y = _p[1] - _p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n  $el.setAttribute('d', translatePathToString(d.absolutePath, startOffsetX, startOffsetY, endOffsetX, endOffsetY));\n}\n\nfunction updatePolylineElementAttribute($el, parsedStyle) {\n  var points = parsedStyle.points.points,\n    markerStart = parsedStyle.markerStart,\n    markerStartOffset = parsedStyle.markerStartOffset,\n    markerEnd = parsedStyle.markerEnd,\n    markerEndOffset = parsedStyle.markerEndOffset;\n  var length = points.length;\n  if (points && length >= 2) {\n    var startOffsetX = 0;\n    var startOffsetY = 0;\n    var endOffsetX = 0;\n    var endOffsetY = 0;\n    var rad = 0;\n    var x;\n    var y;\n    if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n      x = points[1][0] - points[0][0];\n      y = points[1][1] - points[0][1];\n      rad = Math.atan2(y, x);\n      startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n      startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n    }\n    if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n      x = points[length - 2][0] - points[length - 1][0];\n      y = points[length - 2][1] - points[length - 1][1];\n      rad = Math.atan2(y, x);\n      endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n      endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n    }\n    $el.setAttribute('points', points.map(function (point, i) {\n      var offsetX = 0;\n      var offsetY = 0;\n      if (i === 0) {\n        offsetX = startOffsetX;\n        offsetY = startOffsetY;\n      } else if (i === length - 1) {\n        offsetX = endOffsetX;\n        offsetY = endOffsetY;\n      }\n      return \"\".concat(point[0] + offsetX, \",\").concat(point[1] + offsetY);\n    }).join(' '));\n  }\n}\n\nfunction updateRectElementAttribute($el, parsedStyle) {\n  var radius = parsedStyle.radius,\n    _parsedStyle$x = parsedStyle.x,\n    x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n    _parsedStyle$y = parsedStyle.y,\n    y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n    width = parsedStyle.width,\n    height = parsedStyle.height;\n\n  // CSSKeyword: auto\n  if (!isFinite(width) || !isFinite(height)) {\n    return;\n  }\n  var hasRadius = radius && radius.some(function (r) {\n    return r !== 0;\n  });\n  var d = '';\n  if (!hasRadius) {\n    d = \"M \".concat(x, \",\").concat(y, \" l \").concat(width, \",0 l 0,\").concat(height, \" l\").concat(-width, \" 0 z\");\n  } else {\n    var _radius$map = radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2));\n      }),\n      _radius$map2 = _slicedToArray(_radius$map, 4),\n      tlr = _radius$map2[0],\n      trr = _radius$map2[1],\n      brr = _radius$map2[2],\n      blr = _radius$map2[3];\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    var sweepFlag = signX + signY !== 0 ? 1 : 0;\n    d = [[\"M \".concat(signX * tlr + x, \",\").concat(y)], [\"l \".concat(width - signX * (tlr + trr), \",0\")], [\"a \".concat(trr, \",\").concat(trr, \",0,0,\").concat(sweepFlag, \",\").concat(signX * trr, \",\").concat(signY * trr)], [\"l 0,\".concat(height - signY * (trr + brr))], [\"a \".concat(brr, \",\").concat(brr, \",0,0,\").concat(sweepFlag, \",\").concat(-signX * brr, \",\").concat(signY * brr)], [\"l \".concat(signX * (brr + blr) - width, \",0\")], [\"a \".concat(blr, \",\").concat(blr, \",0,0,\").concat(sweepFlag, \",\").concat(-signX * blr, \",\").concat(-signY * blr)], [\"l 0,\".concat(signY * (blr + tlr) - height)], [\"a \".concat(tlr, \",\").concat(tlr, \",0,0,\").concat(sweepFlag, \",\").concat(signX * tlr, \",\").concat(-signY * tlr)], ['z']].join(' ');\n  }\n  $el.setAttribute('d', d);\n}\n\nfunction createSVGElement(type, doc) {\n  return (doc || document).createElementNS('http://www.w3.org/2000/svg', type);\n}\n\nvar FILTER_PREFIX = 'g-filter-';\n\n/**\n * use SVG filters, eg. blur, brightness, contrast...\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/filter\n */\nfunction createOrUpdateFilter(document, $def, object, $el, filters) {\n  // eg. filter=\"url(#f1) url(#f2)\"\n  var filterName = FILTER_PREFIX + object.entity;\n  var $existedFilters = $def.querySelectorAll(\"[name=\".concat(filterName, \"]\"));\n  if ($existedFilters.length) {\n    $existedFilters.forEach(function ($filter) {\n      $def.removeChild($filter);\n    });\n  }\n  if (filters.length === 0) {\n    // 'none'\n    $el === null || $el === void 0 || $el.removeAttribute('filter');\n  } else {\n    var filterIds = filters.map(function (_ref, i) {\n      var name = _ref.name,\n        params = _ref.params;\n      var $filter = createSVGElement('filter', document);\n      // @see https://github.com/antvis/g/issues/1025\n      $filter.setAttribute('filterUnits', 'userSpaceOnUse');\n      if (name === 'blur') {\n        createBlur(document, $filter, params);\n      } else if (name === 'brightness') {\n        createBrightness(document, $filter, params);\n      } else if (name === 'drop-shadow') {\n        createDropShadow(document, $filter, params);\n      } else if (name === 'contrast') {\n        createContrast(document, $filter, params);\n      } else if (name === 'grayscale') {\n        createGrayscale(document, $filter, params);\n      } else if (name === 'sepia') {\n        createSepia(document, $filter, params);\n      } else if (name === 'saturate') {\n        createSaturate(document, $filter, params);\n      } else if (name === 'hue-rotate') {\n        createHueRotate(document, $filter, params);\n      } else if (name === 'invert') {\n        createInvert(document, $filter, params);\n      }\n      $filter.id = \"\".concat(filterName, \"-\").concat(i);\n      $filter.setAttribute('name', filterName);\n      $def.appendChild($filter);\n      return $filter.id;\n    });\n\n    // @see https://github.com/antvis/G/issues/1114\n    setTimeout(function () {\n      $el === null || $el === void 0 || $el.setAttribute('filter', filterIds.map(function (filterId) {\n        return \"url(#\".concat(filterId, \")\");\n      }).join(' '));\n    });\n  }\n}\nfunction convertToAbsoluteValue(param) {\n  return param.unit === UnitType.kPercentage ? param.value / 100 : param.value;\n}\n\n/**\n * @see https://drafts.fxtf.org/filter-effects/#blurEquivalent\n */\nfunction createBlur(document, $filter, params) {\n  var $feGaussianBlur = createSVGElement('feGaussianBlur', document);\n  $feGaussianBlur.setAttribute('in', 'SourceGraphic');\n  $feGaussianBlur.setAttribute('stdDeviation', \"\".concat(params[0].value));\n  $filter.appendChild($feGaussianBlur);\n}\nfunction createFeComponentTransfer(document, $filter, _ref2) {\n  var type = _ref2.type,\n    slope = _ref2.slope,\n    intercept = _ref2.intercept,\n    tableValues = _ref2.tableValues;\n  var $feComponentTransfer = createSVGElement('feComponentTransfer', document);\n  [createSVGElement('feFuncR', document), createSVGElement('feFuncG', document), createSVGElement('feFuncB', document)].forEach(function ($feFunc) {\n    $feFunc.setAttribute('type', type);\n    if (type === 'table') {\n      $feFunc.setAttribute('tableValues', \"\".concat(tableValues));\n    } else {\n      $feFunc.setAttribute('slope', \"\".concat(slope));\n      $feFunc.setAttribute('intercept', \"\".concat(intercept));\n    }\n    $feComponentTransfer.appendChild($feFunc);\n  });\n  $filter.appendChild($feComponentTransfer);\n}\nfunction createContrast(document, $filter, params) {\n  var slope = convertToAbsoluteValue(params[0]);\n  createFeComponentTransfer(document, $filter, {\n    type: 'linear',\n    slope: slope,\n    intercept: -(0.5 * slope) + 0.5\n  });\n}\nfunction createInvert(document, $filter, params) {\n  var amount = convertToAbsoluteValue(params[0]);\n  createFeComponentTransfer(document, $filter, {\n    type: 'table',\n    tableValues: \"\".concat(amount, \" \").concat(1 - amount)\n  });\n}\nfunction createBrightness(document, $filter, params) {\n  var slope = convertToAbsoluteValue(params[0]);\n  createFeComponentTransfer(document, $filter, {\n    type: 'linear',\n    slope: slope,\n    intercept: 0\n  });\n}\nfunction createSaturate(document, $filter, params) {\n  var amount = convertToAbsoluteValue(params[0]);\n  var $feColorMatrix = createSVGElement('feColorMatrix', document);\n  $feColorMatrix.setAttribute('type', 'saturate');\n  $feColorMatrix.setAttribute('values', \"\".concat(amount));\n  $filter.appendChild($feColorMatrix);\n}\nfunction createHueRotate(document, $filter, params) {\n  var $feColorMatrix = createSVGElement('feColorMatrix', document);\n  $feColorMatrix.setAttribute('type', 'hueRotate');\n  // $feColorMatrix.setAttribute('values', `${params[0].to(UnitType.kDegrees).value}`);\n  // FIXME: convert to degrees\n  $feColorMatrix.setAttribute('values', \"\".concat(params[0].value));\n  $filter.appendChild($feColorMatrix);\n}\nfunction createDropShadow(document, $filter, params) {\n  var shadowOffsetX = params[0].value;\n  var shadowOffsetY = params[1].value;\n  var shadowBlur = params[2].value;\n  // @ts-ignore\n  var shadowColor = params[3].formatted;\n  var $feGaussianBlur = createSVGElement('feGaussianBlur', document);\n  $feGaussianBlur.setAttribute('in', 'SourceAlpha');\n  $feGaussianBlur.setAttribute('stdDeviation', \"\".concat(shadowBlur));\n  $filter.appendChild($feGaussianBlur);\n  var $feOffset = createSVGElement('feOffset', document);\n  $feOffset.setAttribute('dx', \"\".concat(shadowOffsetX));\n  $feOffset.setAttribute('dy', \"\".concat(shadowOffsetY));\n  $feOffset.setAttribute('result', 'offsetblur');\n  $filter.appendChild($feOffset);\n  var $feFlood = createSVGElement('feFlood', document);\n  $feFlood.setAttribute('flood-color', shadowColor);\n  $filter.appendChild($feFlood);\n  var $feComposite = createSVGElement('feComposite', document);\n  $feComposite.setAttribute('in2', 'offsetblur');\n  $feComposite.setAttribute('operator', 'in');\n  $filter.appendChild($feComposite);\n  var $feMerge = createSVGElement('feMerge', document);\n  $filter.appendChild($feMerge);\n  var $feMergeNode1 = createSVGElement('feMergeNode', document);\n  var $feMergeNode2 = createSVGElement('feMergeNode', document);\n  $feMergeNode2.setAttribute('in', 'SourceGraphic');\n  $feMerge.appendChild($feMergeNode1);\n  $feMerge.appendChild($feMergeNode2);\n}\nfunction createFeColorMatrix(document, $filter, matrix) {\n  var $feColorMatrix = createSVGElement('feColorMatrix', document);\n  $feColorMatrix.setAttribute('type', 'matrix');\n  $feColorMatrix.setAttribute('values', matrix.join(' '));\n  $filter.appendChild($feColorMatrix);\n}\n\n/**\n * @see https://drafts.fxtf.org/filter-effects/#grayscaleEquivalent\n */\nfunction createGrayscale(document, $filter, params) {\n  var amount = convertToAbsoluteValue(params[0]);\n  createFeColorMatrix(document, $filter, [0.2126 + 0.7874 * (1 - amount), 0.7152 - 0.7152 * (1 - amount), 0.0722 - 0.0722 * (1 - amount), 0, 0, 0.2126 - 0.2126 * (1 - amount), 0.7152 + 0.2848 * (1 - amount), 0.0722 - 0.0722 * (1 - amount), 0, 0, 0.2126 - 0.2126 * (1 - amount), 0.7152 - 0.7152 * (1 - amount), 0.0722 + 0.9278 * (1 - amount), 0, 0, 0, 0, 0, 1, 0]);\n}\n\n/**\n * @see https://drafts.fxtf.org/filter-effects/#sepiaEquivalent\n */\nfunction createSepia(document, $filter, params) {\n  var amount = convertToAbsoluteValue(params[0]);\n  createFeColorMatrix(document, $filter, [0.393 + 0.607 * (1 - amount), 0.769 - 0.769 * (1 - amount), 0.189 - 0.189 * (1 - amount), 0, 0, 0.349 - 0.349 * (1 - amount), 0.686 + 0.314 * (1 - amount), 0.168 - 0.168 * (1 - amount), 0, 0, 0.272 - 0.272 * (1 - amount), 0.534 - 0.534 * (1 - amount), 0.131 + 0.869 * (1 - amount), 0, 0, 0, 0, 0, 1, 0]);\n}\n\nvar PATTERN_PREFIX = 'g-pattern-';\nvar cacheKey2IDMap = {};\nvar counter = 0;\nfunction resetPatternCounter() {\n  counter = 0;\n  cacheKey2IDMap = {};\n}\nfunction createOrUpdateGradientAndPattern(document, $def, object, $el, parsedColor, name, createImage, plugin) {\n  // eg. clipPath don't have fill/stroke\n  if (!parsedColor) {\n    return '';\n  }\n  if (isCSSRGB(parsedColor)) {\n    // keep using currentColor @see https://github.com/d3/d3-axis/issues/49\n    if (object.style[name] === 'currentColor') {\n      $el === null || $el === void 0 || $el.setAttribute(name, 'currentColor');\n    } else {\n      // constant value, eg. '#fff'\n      $el === null || $el === void 0 || $el.setAttribute(name, parsedColor.isNone ? 'none' : parsedColor.toString());\n    }\n  } else if (isPattern(parsedColor)) {\n    var patternId = createOrUpdatePattern(document, $def, object, parsedColor, createImage, plugin);\n    // use style instead of attribute when applying <pattern>\n    // @see https://stackoverflow.com/a/7723115\n    $el.style[name] = \"url(#\".concat(patternId, \")\");\n    return patternId;\n  } else {\n    if (parsedColor.length === 1) {\n      var gradientId = createOrUpdateGradient(document, object, $def, $el, parsedColor[0]);\n      $el === null || $el === void 0 || $el.setAttribute(name, \"url(#\".concat(gradientId, \")\"));\n      return gradientId;\n    }\n    // @see https://stackoverflow.com/questions/20671502/can-i-blend-gradients-in-svg\n    var filterId = createOrUpdateMultiGradient(document, object, $def, $el, parsedColor);\n    $el === null || $el === void 0 || $el.setAttribute('filter', \"url(#\".concat(filterId, \")\"));\n    $el === null || $el === void 0 || $el.setAttribute('fill', 'black');\n    return filterId;\n  }\n  return '';\n}\nfunction generateCacheKey(src) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var cacheKey = '';\n  if (isCSSGradientValue(src)) {\n    var type = src.type,\n      value = src.value;\n    if (type === GradientType.LinearGradient || type === GradientType.RadialGradient) {\n      // @ts-ignore\n      var _value$options = _objectSpread(_objectSpread({}, value), options),\n        _type = _value$options.type,\n        x = _value$options.x,\n        y = _value$options.y,\n        width = _value$options.width,\n        height = _value$options.height,\n        steps = _value$options.steps,\n        angle = _value$options.angle,\n        cx = _value$options.cx,\n        cy = _value$options.cy,\n        size = _value$options.size;\n      cacheKey = \"gradient-\".concat(_type, \"-\").concat((x === null || x === void 0 ? void 0 : x.toString()) || 0, \"-\").concat((y === null || y === void 0 ? void 0 : y.toString()) || 0, \"-\").concat((angle === null || angle === void 0 ? void 0 : angle.toString()) || 0, \"-\").concat((cx === null || cx === void 0 ? void 0 : cx.toString()) || 0, \"-\").concat((cy === null || cy === void 0 ? void 0 : cy.toString()) || 0, \"-\").concat((size === null || size === void 0 ? void 0 : size.toString()) || 0, \"-\").concat(width, \"-\").concat(height, \"-\").concat(steps.map(function (_ref) {\n        var offset = _ref.offset,\n          color = _ref.color;\n        return \"\".concat(offset).concat(color);\n      }).join('-'));\n    }\n  } else if (isPattern(src)) {\n    if (isString(src.image)) {\n      cacheKey = \"pattern-\".concat(src.image, \"-\").concat(src.repetition);\n    } else if (src.image.nodeName === 'rect') {\n      // use rect's entity as key\n      cacheKey = \"pattern-rect-\".concat(src.image.entity);\n    } else {\n      cacheKey = \"pattern-\".concat(counter);\n    }\n  }\n  if (cacheKey) {\n    if (!cacheKey2IDMap[cacheKey]) {\n      cacheKey2IDMap[cacheKey] = \"\".concat(PATTERN_PREFIX).concat(counter++);\n    }\n  }\n  return cacheKey2IDMap[cacheKey];\n}\nfunction formatTransform(transform) {\n  // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/patternTransform\n  // should remove unit: rotate(20deg) -> rotate(20)\n  return parseTransform(transform).map(function (parsed) {\n    var t = parsed.t,\n      d = parsed.d;\n    if (t === 'translate') {\n      return \"translate(\".concat(d[0].value, \" \").concat(d[1].value, \")\");\n    }\n    if (t === 'translateX') {\n      return \"translate(\".concat(d[0].value, \" 0)\");\n    }\n    if (t === 'translateY') {\n      return \"translate(0 \".concat(d[0].value, \")\");\n    }\n    if (t === 'rotate') {\n      return \"rotate(\".concat(d[0].value, \")\");\n    }\n    if (t === 'scale') {\n      // scale(1) scale(1, 1)\n      var newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1, 1];\n      return \"scale(\".concat(newScale[0], \", \").concat(newScale[1], \")\");\n    }\n    if (t === 'scaleX') {\n      var _newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1];\n      return \"scale(\".concat(_newScale[0], \", 1)\");\n    }\n    if (t === 'scaleY') {\n      var _newScale2 = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1];\n      return \"scale(1, \".concat(_newScale2[0], \")\");\n    }\n    if (t === 'skew') {\n      var newSkew = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [0, 0];\n      return \"skewX(\".concat(newSkew[0], \") skewY(\").concat(newSkew[1], \")\");\n    }\n    if (t === 'skewZ') {\n      var _newSkew = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [0];\n      return \"skewX(\".concat(_newSkew[0], \")\");\n    }\n    if (t === 'skewY') {\n      var _newSkew2 = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [0];\n      return \"skewY(\".concat(_newSkew2[0], \")\");\n    }\n    if (t === 'matrix') {\n      var _d$map = d.map(function (s) {\n          return s.value;\n        }),\n        _d$map2 = _slicedToArray(_d$map, 6),\n        a = _d$map2[0],\n        b = _d$map2[1],\n        c = _d$map2[2],\n        dd = _d$map2[3],\n        tx = _d$map2[4],\n        ty = _d$map2[5];\n      return \"matrix(\".concat(a, \" \").concat(b, \" \").concat(c, \" \").concat(dd, \" \").concat(tx, \" \").concat(ty, \")\");\n    }\n    return null;\n  }).filter(function (item) {\n    return item !== null;\n  }).join(' ');\n}\nfunction create$Pattern(document, $def, object, pattern, patternId, width, height) {\n  var repetition = pattern.repetition,\n    transform = pattern.transform;\n\n  // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/pattern\n  var $pattern = createSVGElement('pattern', document);\n  if (transform) {\n    $pattern.setAttribute('patternTransform', formatTransform(transform));\n  }\n  $pattern.setAttribute('patternUnits', 'userSpaceOnUse');\n  $pattern.id = patternId;\n  $def.appendChild($pattern);\n  var _object$getGeometryBo = object.getGeometryBounds(),\n    halfExtents = _object$getGeometryBo.halfExtents,\n    min = _object$getGeometryBo.min;\n  $pattern.setAttribute('x', \"\".concat(min[0]));\n  $pattern.setAttribute('y', \"\".concat(min[1]));\n\n  // There is no equivalent to CSS no-repeat for SVG patterns\n  // @see https://stackoverflow.com/a/33481956\n  var patternWidth = width;\n  var patternHeight = height;\n  if (repetition === 'repeat-x') {\n    patternHeight = halfExtents[1] * 2;\n  } else if (repetition === 'repeat-y') {\n    patternWidth = halfExtents[0] * 2;\n  } else if (repetition === 'no-repeat') {\n    patternWidth = halfExtents[0] * 2;\n    patternHeight = halfExtents[1] * 2;\n  }\n  $pattern.setAttribute('width', \"\".concat(patternWidth));\n  $pattern.setAttribute('height', \"\".concat(patternHeight));\n  return $pattern;\n}\nfunction createOrUpdatePattern(document, $def, object, pattern, createImage, plugin) {\n  var patternId = generateCacheKey(pattern);\n  var $existed = $def.querySelector(\"#\".concat(patternId));\n  if (!$existed) {\n    var image = pattern.image;\n    var imageURL = '';\n    if (isString(image)) {\n      imageURL = image;\n    } else if (isBrowser) {\n      if (image instanceof HTMLImageElement) {\n        imageURL = image.src;\n      } else if (image instanceof HTMLCanvasElement) {\n        imageURL = image.toDataURL();\n      } else ;\n    }\n    if (imageURL) {\n      var $image = createSVGElement('image', document);\n      // use href instead of xlink:href\n      // @see https://stackoverflow.com/a/13379007\n      $image.setAttribute('href', imageURL);\n      var img = createImage();\n      if (!imageURL.match(/^data:/i)) {\n        img.crossOrigin = 'Anonymous';\n        $image.setAttribute('crossorigin', 'anonymous');\n      }\n      img.src = imageURL;\n      var onload = function onload() {\n        var $pattern = create$Pattern(document, $def, object, pattern, patternId, img.width, img.height);\n        $def.appendChild($pattern);\n        $pattern.appendChild($image);\n        $image.setAttribute('x', '0');\n        $image.setAttribute('y', '0');\n        $image.setAttribute('width', \"\".concat(img.width));\n        $image.setAttribute('height', \"\".concat(img.height));\n      };\n      if (img.complete) {\n        onload();\n      } else {\n        img.onload = onload;\n        // Fix onload() bug in IE9\n        // img.src = img.src;\n      }\n    }\n    if (image.nodeName === 'rect') {\n      var _parsedStyle = image.parsedStyle,\n        width = _parsedStyle.width,\n        height = _parsedStyle.height;\n      var $pattern = create$Pattern(document, $def, image, pattern, patternId, width, height);\n\n      // traverse subtree of pattern\n      image.forEach(function (object) {\n        plugin.createSVGDom(document, object, null);\n\n        // @ts-ignore\n        var svgElement = object.elementSVG;\n\n        // apply local RTS transformation to <group> wrapper\n        var localTransform = object.getLocalTransform();\n        plugin.applyTransform(svgElement.$groupEl, localTransform);\n      });\n\n      // @ts-ignore\n      var svgElement = image.elementSVG;\n      $pattern.appendChild(svgElement.$groupEl);\n    }\n  }\n  return patternId;\n}\nfunction createOrUpdateGradient(document, object, $def, $el, parsedColor) {\n  var bounds = object.getGeometryBounds();\n  var width = bounds && bounds.halfExtents[0] * 2 || 0;\n  var height = bounds && bounds.halfExtents[1] * 2 || 0;\n  var min = bounds && bounds.min || [0, 0];\n  var gradientId = generateCacheKey(parsedColor, {\n    x: min[0],\n    y: min[1],\n    width: width,\n    height: height\n  });\n  var $existed = $def.querySelector(\"#\".concat(gradientId));\n  if (!$existed) {\n    // <linearGradient> <radialGradient>\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/linearGradient\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/radialGradient\n    $existed = createSVGElement(parsedColor.type === GradientType.LinearGradient ? 'linearGradient' : 'radialGradient', document);\n    // @see https://github.com/antvis/g/issues/1025\n    $existed.setAttribute('gradientUnits', 'userSpaceOnUse');\n    // add stops\n    var innerHTML = '';\n    parsedColor.value.steps\n    // sort by offset @see https://github.com/antvis/G/issues/1171\n    .sort(function (a, b) {\n      return a.offset.value - b.offset.value;\n    }).forEach(function (_ref2) {\n      var offset = _ref2.offset,\n        color = _ref2.color;\n      // TODO: support absolute unit like `px`\n      innerHTML += \"<stop offset=\\\"\".concat(offset.value / 100, \"\\\" stop-color=\\\"\").concat(color, \"\\\"></stop>\");\n    });\n    $existed.innerHTML = innerHTML;\n    $existed.id = gradientId;\n    $def.appendChild($existed);\n  }\n  if (parsedColor.type === GradientType.LinearGradient) {\n    var _ref3 = parsedColor.value,\n      angle = _ref3.angle;\n    var _computeLinearGradien = computeLinearGradient([min[0], min[1]], width, height, angle),\n      x1 = _computeLinearGradien.x1,\n      y1 = _computeLinearGradien.y1,\n      x2 = _computeLinearGradien.x2,\n      y2 = _computeLinearGradien.y2;\n    $existed.setAttribute('x1', \"\".concat(x1));\n    $existed.setAttribute('y1', \"\".concat(y1));\n    $existed.setAttribute('x2', \"\".concat(x2));\n    $existed.setAttribute('y2', \"\".concat(y2));\n\n    // $existed.setAttribute('gradientTransform', `rotate(${angle})`);\n  } else {\n    var _ref4 = parsedColor.value,\n      cx = _ref4.cx,\n      cy = _ref4.cy,\n      size = _ref4.size;\n    var _computeRadialGradien = computeRadialGradient([min[0], min[1]], width, height, cx, cy, size),\n      x = _computeRadialGradien.x,\n      y = _computeRadialGradien.y,\n      r = _computeRadialGradien.r;\n    $existed.setAttribute('cx', \"\".concat(x));\n    $existed.setAttribute('cy', \"\".concat(y));\n    $existed.setAttribute('r', \"\".concat(r));\n  }\n  return gradientId;\n}\nfunction createOrUpdateMultiGradient(document, object, $def, $el, gradients) {\n  var filterId = \"\".concat(FILTER_PREFIX + object.entity, \"-gradient\");\n  var $existed = $def.querySelector(\"#\".concat(filterId));\n  if (!$existed) {\n    $existed = createSVGElement('filter', document);\n    $existed.setAttribute('filterUnits', 'userSpaceOnUse');\n    // @see https://github.com/antvis/g/issues/1025\n    $existed.setAttribute('x', '0%');\n    $existed.setAttribute('y', '0%');\n    $existed.setAttribute('width', '100%');\n    $existed.setAttribute('height', '100%');\n    $existed.id = filterId;\n    $def.appendChild($existed);\n  }\n\n  /**\n   * <rect id=\"wave-rect\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#wave)\"></rect>\n   * <filter id=\"blend-it\" x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\">\n        <feImage xlink:href=\"#wave-rect\" result=\"myWave\" x=\"100\" y=\"100\"/>\n        <feImage xlink:href=\"#ry-rect\" result=\"myRY\"  x=\"100\" y=\"100\"/>\n        <feBlend in=\"myWave\" in2=\"myRY\" mode=\"multiply\" result=\"blendedGrad\"/>\n        <feComposite in=\"blendedGrad\" in2=\"SourceGraphic\" operator=\"in\"/>\n    </filter>\n   */\n\n  var blended = 0;\n  gradients.forEach(function (gradient, i) {\n    var gradientId = createOrUpdateGradient(document, object, $def, $el, gradient);\n    var rectId = \"\".concat(gradientId, \"_rect\");\n    var $rect = createSVGElement('rect', document);\n    $rect.setAttribute('x', '0');\n    $rect.setAttribute('y', '0');\n    $rect.setAttribute('width', '100%');\n    $rect.setAttribute('height', '100%');\n    $rect.setAttribute('fill', \"url(#\".concat(gradientId, \")\"));\n    $rect.id = rectId;\n    $def.appendChild($rect);\n    var $feImage = createSVGElement('feImage', document);\n    $feImage.setAttribute('href', \"#\".concat(rectId));\n    $feImage.setAttribute('result', \"\".concat(filterId, \"-\").concat(i));\n    $existed.appendChild($feImage);\n    if (i > 0) {\n      var $feBlend = createSVGElement('feBlend', document);\n      $feBlend.setAttribute('in', i === 1 ? \"\".concat(filterId, \"-\").concat(i - 1) : \"\".concat(filterId, \"-blended-\").concat(blended - 1));\n      $feBlend.setAttribute('in2', \"\".concat(filterId, \"-\").concat(i));\n      $feBlend.setAttribute('result', \"\".concat(filterId, \"-blended-\").concat(blended++));\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/blend-mode\n      $feBlend.setAttribute('mode', 'multiply');\n      $existed.appendChild($feBlend);\n    }\n  });\n  var $feComposite = createSVGElement('feComposite', document);\n  $feComposite.setAttribute('in', \"\".concat(filterId, \"-blended-\").concat(blended));\n  $feComposite.setAttribute('in2', 'SourceGraphic');\n  $feComposite.setAttribute('operator', 'in');\n  $existed.appendChild($feComposite);\n  return filterId;\n}\n\nvar FILTER_DROPSHADOW_PREFIX = 'g-filter-dropshadow-';\n\n/**\n * use SVG filters\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/filter\n */\nfunction createOrUpdateShadow(document, $def, object, $el, name) {\n  var _object$parsedStyle = object.parsedStyle,\n    _object$parsedStyle$s = _object$parsedStyle.shadowType,\n    shadowType = _object$parsedStyle$s === void 0 ? 'outer' : _object$parsedStyle$s,\n    shadowBlur = _object$parsedStyle.shadowBlur,\n    shadowColor = _object$parsedStyle.shadowColor,\n    shadowOffsetX = _object$parsedStyle.shadowOffsetX,\n    shadowOffsetY = _object$parsedStyle.shadowOffsetY;\n  var hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n  var shadowId = FILTER_DROPSHADOW_PREFIX + object.entity;\n  var $existedFilter = $def.querySelector(\"#\".concat(shadowId));\n  if ($existedFilter) {\n    var existedShadowType = $existedFilter.getAttribute('data-type');\n    if (existedShadowType !== shadowType || !hasShadow) {\n      // remove existed shadow\n      $existedFilter.remove();\n      $existedFilter = null;\n    }\n  }\n\n  // <Group> also has shadowType as its default value\n  // only apply shadow when blur > 0\n  if (hasShadow) {\n    // use filter <feDropShadow>\n    // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feDropShadow\n    $el === null || $el === void 0 || $el.setAttribute('filter', \"url(#\".concat(shadowId, \")\"));\n  } else {\n    $el === null || $el === void 0 || $el.removeAttribute('filter');\n    return;\n  }\n  if (!$existedFilter) {\n    $existedFilter = createSVGElement('filter', document);\n    $existedFilter.setAttribute('data-type', shadowType);\n    if (shadowType === 'outer') {\n      var $feDropShadow = createSVGElement('feDropShadow', document);\n      $feDropShadow.setAttribute('dx', \"\".concat((shadowOffsetX || 0) / 2));\n      $feDropShadow.setAttribute('dy', \"\".concat((shadowOffsetY || 0) / 2));\n      $feDropShadow.setAttribute('stdDeviation', \"\".concat((shadowBlur || 0) / 4));\n      $feDropShadow.setAttribute('flood-color', shadowColor.toString());\n      $existedFilter.appendChild($feDropShadow);\n    } else if (shadowType === 'inner') {\n      var $feComponentTransfer = createSVGElement('feComponentTransfer', document);\n      $feComponentTransfer.setAttribute('in', 'SourceAlpha');\n      var $feFuncA = createSVGElement('feFuncA', document);\n      $feFuncA.setAttribute('type', 'table');\n      $feFuncA.setAttribute('tableValues', '1 0');\n      $feComponentTransfer.appendChild($feFuncA);\n      $existedFilter.appendChild($feComponentTransfer);\n      var $feGaussianBlur = createSVGElement('feGaussianBlur', document);\n      $feGaussianBlur.setAttribute('stdDeviation', \"\".concat((shadowBlur || 0) / 4));\n      $existedFilter.appendChild($feGaussianBlur);\n      var $feOffset = createSVGElement('feOffset', document);\n      $feOffset.setAttribute('dx', \"\".concat((shadowOffsetX || 0) / 2));\n      $feOffset.setAttribute('dy', \"\".concat((shadowOffsetY || 0) / 2));\n      $feOffset.setAttribute('result', 'offsetblur');\n      $existedFilter.appendChild($feOffset);\n      var $feFlood = createSVGElement('feFlood', document);\n      $feFlood.setAttribute('flood-color', shadowColor.toString());\n      $feFlood.setAttribute('result', 'color');\n      $existedFilter.appendChild($feFlood);\n      var $feComposite = createSVGElement('feComposite', document);\n      $feComposite.setAttribute('in2', 'offsetblur');\n      $feComposite.setAttribute('operator', 'in');\n      $existedFilter.appendChild($feComposite);\n      var $feComposite2 = createSVGElement('feComposite', document);\n      $feComposite2.setAttribute('in2', 'SourceAlpha');\n      $feComposite2.setAttribute('operator', 'in');\n      $existedFilter.appendChild($feComposite2);\n      var $feMerge = createSVGElement('feMerge', document);\n      $existedFilter.appendChild($feMerge);\n      var $feMergeNode = createSVGElement('feMergeNode', document);\n      $feMergeNode.setAttribute('in', 'SourceGraphic');\n      var $feMergeNode2 = createSVGElement('feMergeNode', document);\n      $feMerge.appendChild($feMergeNode);\n      $feMerge.appendChild($feMergeNode2);\n    }\n    $existedFilter.id = shadowId;\n    // @see https://github.com/antvis/g/issues/1025\n    $existedFilter.setAttribute('filterUnits', 'userSpaceOnUse');\n    $def.appendChild($existedFilter);\n    return;\n  }\n  if (shadowType === 'inner') {\n    var _$feGaussianBlur = $existedFilter.children[1];\n    var _$feOffset = $existedFilter.children[2];\n    var _$feFlood = $existedFilter.children[3];\n    if (name === 'shadowColor') {\n      _$feFlood.setAttribute('flood-color', shadowColor.toString());\n    } else if (name === 'shadowBlur') {\n      // half the blur radius\n      // @see https://drafts.csswg.org/css-backgrounds/#shadow-blur\n      // @see https://css-tricks.com/breaking-css-box-shadow-vs-drop-shadow/\n      _$feGaussianBlur.setAttribute('stdDeviation', \"\".concat((shadowBlur || 0) / 4));\n    } else if (name === 'shadowOffsetX') {\n      _$feOffset.setAttribute('dx', \"\".concat((shadowOffsetX || 0) / 2));\n    } else if (name === 'shadowOffsetY') {\n      _$feOffset.setAttribute('dy', \"\".concat((shadowOffsetY || 0) / 2));\n    }\n  } else if (shadowType === 'outer') {\n    var _$feDropShadow = $existedFilter.children[0];\n    if (name === 'shadowColor') {\n      _$feDropShadow.setAttribute('flood-color', shadowColor.toString());\n    } else if (name === 'shadowBlur') {\n      // half the blur radius\n      // @see https://drafts.csswg.org/css-backgrounds/#shadow-blur\n      // @see https://css-tricks.com/breaking-css-box-shadow-vs-drop-shadow/\n      _$feDropShadow.setAttribute('stdDeviation', \"\".concat((shadowBlur || 0) / 4));\n    } else if (name === 'shadowOffsetX') {\n      _$feDropShadow.setAttribute('dx', \"\".concat((shadowOffsetX || 0) / 2));\n    } else if (name === 'shadowOffsetY') {\n      _$feDropShadow.setAttribute('dy', \"\".concat((shadowOffsetY || 0) / 2));\n    }\n  }\n}\n\nvar urlRegexp = /url\\(\"?#(.*)\\)/;\nvar DefElementManager = /*#__PURE__*/function () {\n  function DefElementManager(context) {\n    _classCallCheck(this, DefElementManager);\n    this.gradientCache = {};\n    this.context = context;\n  }\n\n  /**\n   * container for <gradient> <clipPath>...\n   */\n  return _createClass(DefElementManager, [{\n    key: \"getDefElement\",\n    value: function getDefElement() {\n      return this.$def;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var document = this.context.config.document;\n      var $svg = this.context.contextService.getContext();\n      this.$def = createSVGElement('defs', document);\n      $svg.appendChild(this.$def);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(entity) {\n      var _this = this;\n      Object.keys(this.gradientCache).forEach(function (id) {\n        _this.clearUnusedDefElement(_this.gradientCache, id, entity);\n      });\n    }\n  }, {\n    key: \"clearUnusedDefElement\",\n    value: function clearUnusedDefElement(cache, id, entity) {\n      if (cache[id] && cache[id].size === 1 && cache[id].has(entity)) {\n        var targetElement = this.$def.querySelector(\"#\".concat(id));\n        if (targetElement) {\n          this.$def.removeChild(targetElement);\n        }\n      }\n    }\n  }, {\n    key: \"createOrUpdateGradientAndPattern\",\n    value: function createOrUpdateGradientAndPattern$1(object, $el, parsedColor, name, plugin) {\n      var _this$context$config = this.context.config,\n        doc = _this$context$config.document,\n        createImage = _this$context$config.createImage;\n      if ($el) {\n        var attributeValue = '';\n        if (isPattern(parsedColor)) {\n          // `fill: url(#${patternId})`\n          attributeValue = $el.style[name];\n        } else {\n          // `url(#${gradientId})`\n          attributeValue = $el.getAttribute(name) || '';\n        }\n        var matches = attributeValue.match(urlRegexp);\n        if (matches && matches.length > 1) {\n          this.clearUnusedDefElement(this.gradientCache, matches[1].replace('\"', ''), object.entity);\n        }\n        var newDefElementId = createOrUpdateGradientAndPattern(doc || document, this.$def, object, $el, parsedColor, name, createImage, plugin);\n        if (newDefElementId) {\n          if (!this.gradientCache[newDefElementId]) {\n            this.gradientCache[newDefElementId] = new Set();\n          }\n          this.gradientCache[newDefElementId].add(object.entity);\n        }\n      }\n    }\n  }, {\n    key: \"createOrUpdateShadow\",\n    value: function createOrUpdateShadow$1(object, $el, name) {\n      var doc = this.context.config.document;\n      createOrUpdateShadow(doc || document, this.$def, object, $el, name);\n    }\n  }, {\n    key: \"createOrUpdateFilter\",\n    value: function createOrUpdateFilter$1(object, $el, filters) {\n      var doc = this.context.config.document;\n      createOrUpdateFilter(doc || document, this.$def, object, $el, filters);\n    }\n  }]);\n}();\n\nfunction numberToLongString(x) {\n  return x.toFixed(6).replace('.000000', '');\n}\nfunction convertHTML(str) {\n  var regex = /[&|<|>|\"|']/g;\n  return str.replace(regex, function (match) {\n    if (match === '&') {\n      return '&amp;';\n    }\n    if (match === '<') {\n      return '&lt;';\n    }\n    if (match === '>') {\n      return '&gt;';\n    }\n    if (match === '\"') {\n      return '&quot;';\n    }\n    return '&apos;';\n  });\n}\n\nvar SVG_ATTR_MAP = {\n  opacity: 'opacity',\n  fillStyle: 'fill',\n  fill: 'fill',\n  fillRule: 'fill-rule',\n  fillOpacity: 'fill-opacity',\n  strokeStyle: 'stroke',\n  strokeOpacity: 'stroke-opacity',\n  stroke: 'stroke',\n  clipPath: 'clip-path',\n  textPath: 'text-path',\n  r: 'r',\n  cx: 'cx',\n  cy: 'cy',\n  rx: 'rx',\n  ry: 'ry',\n  x: 'x',\n  y: 'y',\n  width: 'width',\n  height: 'height',\n  lineCap: 'stroke-linecap',\n  lineJoin: 'stroke-linejoin',\n  lineWidth: 'stroke-width',\n  lineDash: 'stroke-dasharray',\n  lineDashOffset: 'stroke-dashoffset',\n  miterLimit: 'stroke-miterlimit',\n  font: 'font',\n  fontSize: 'font-size',\n  fontStyle: 'font-style',\n  fontVariant: 'font-variant',\n  fontWeight: 'font-weight',\n  fontFamily: 'font-family',\n  letterSpacing: 'letter-spacing',\n  startArrow: 'marker-start',\n  endArrow: 'marker-end',\n  \"class\": 'class',\n  id: 'id',\n  // style: 'style',\n  preserveAspectRatio: 'preserveAspectRatio',\n  visibility: 'visibility',\n  shadowColor: 'flood-color',\n  shadowBlur: 'stdDeviation',\n  shadowOffsetX: 'dx',\n  shadowOffsetY: 'dy',\n  filter: 'filter',\n  innerHTML: 'innerHTML',\n  textAlign: 'text-anchor',\n  pointerEvents: 'pointer-events'\n};\nvar FORMAT_VALUE_MAP = {\n  textAlign: {\n    inherit: 'inherit',\n    left: 'left',\n    start: 'left',\n    center: 'middle',\n    right: 'end',\n    end: 'end'\n  }\n};\nvar DEFAULT_VALUE_MAP = {\n  textAlign: 'inherit',\n  // textBaseline: 'alphabetic',\n  // @see https://www.w3.org/TR/SVG/painting.html#LineCaps\n  lineCap: 'butt',\n  // @see https://www.w3.org/TR/SVG/painting.html#LineJoin\n  lineJoin: 'miter',\n  // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/stroke-width\n  lineWidth: '1px',\n  opacity: '1',\n  fillOpacity: '1',\n  fillRule: 'nonzero',\n  strokeOpacity: '1',\n  strokeWidth: '0',\n  strokeMiterLimit: '4',\n  letterSpacing: '0',\n  fontSize: 'inherit',\n  fontFamily: 'inherit',\n  pointerEvents: 'auto',\n  transform: 'matrix(1,0,0,1,0,0)'\n};\n/**\n * G_SVG_PREFIX + nodeName + entity\n *\n * eg. g_svg_circle_345\n */\nvar G_SVG_PREFIX = 'g-svg';\nvar CLIP_PATH_PREFIX = 'clip-path-';\nvar TEXT_PATH_PREFIX = 'text-path-';\nvar SVGRendererPlugin = /*#__PURE__*/function () {\n  function SVGRendererPlugin(pluginOptions, defElementManager, context) {\n    _classCallCheck(this, SVGRendererPlugin);\n    /**\n     * Will be used in g-plugin-svg-picker for finding relative SVG element of current DisplayObject.\n     */\n    this.svgElementMap = new WeakMap();\n    /**\n     * render at the end of frame\n     */\n    this.renderQueue = [];\n    /**\n     * dirty attributes at the end of frame\n     */\n    this.dirtyAttributes = new WeakMap();\n    /**\n     * reorder after mounted\n     */\n    this.pendingReorderQueue = new Set();\n    /**\n     * <use> elements in <clipPath>, which should be sync with clipPath\n     *\n     * @example\n     * <clipPath transform=\"matrix(1,0,0,1,-100,-155)\" id=\"clip-path-0-2\">\n     *  <use href=\"#g_svg_circle_0\" transform=\"matrix(1.477115,0,0,1.477115,150,150)\">\n     *  </use>\n     * </clipPath>\n     */\n    this.clipPathUseMap = new WeakMap();\n    this.pluginOptions = pluginOptions;\n    this.defElementManager = defElementManager;\n    this.context = context;\n  }\n  return _createClass(SVGRendererPlugin, [{\n    key: \"apply\",\n    value: function apply(context) {\n      var _this = this;\n      var renderingService = context.renderingService,\n        renderingContext = context.renderingContext;\n      this.context = context;\n      // @ts-ignore\n      this.context.svgElementMap = this.svgElementMap;\n      var canvas = renderingContext.root.ownerDocument.defaultView;\n      var document = this.context.config.document;\n      var handleMounted = function handleMounted(e) {\n        var object = e.target;\n\n        // should remove clipPath already existed in <defs>\n        var $useRefs = _this.clipPathUseMap.get(object);\n        if ($useRefs) {\n          var $def = _this.defElementManager.getDefElement();\n          var existed = $def.querySelector(\"#\".concat(_this.getId(object)));\n          if (existed) {\n            existed.remove();\n          }\n        }\n\n        // create SVG DOM Node\n        _this.createSVGDom(document, object, _this.$camera);\n      };\n      var handleUnmounted = function handleUnmounted(e) {\n        var object = e.target;\n        _this.defElementManager.clear(object.entity);\n        _this.clipPathUseMap[\"delete\"](object);\n        _this.removeSVGDom(object);\n      };\n      var reorderChildren = function reorderChildren(object) {\n        var _object$parentNode;\n        var parent = object.parentNode;\n        // @ts-ignore\n        var $groupEl = (_object$parentNode = object.parentNode) === null || _object$parentNode === void 0 || (_object$parentNode = _object$parentNode.elementSVG) === null || _object$parentNode === void 0 ? void 0 : _object$parentNode.$groupEl;\n        var children = ((parent === null || parent === void 0 ? void 0 : parent.children) || []).slice();\n        if ($groupEl) {\n          _this.reorderChildren(document, $groupEl, children);\n        }\n      };\n      var handleReparent = function handleReparent(e) {\n        var object = e.target;\n        reorderChildren(object);\n      };\n      var handleAttributeChanged = function handleAttributeChanged(e) {\n        var object = e.target;\n\n        // @see https://github.com/antvis/g/issues/994\n        // @ts-ignore\n        if (!object.elementSVG) {\n          return;\n        }\n        var attrName = e.attrName;\n        var attribtues = _this.dirtyAttributes.get(object);\n        if (!attribtues) {\n          _this.dirtyAttributes.set(object, []);\n          attribtues = _this.dirtyAttributes.get(object);\n        }\n        attribtues.push(attrName);\n      };\n      var handleGeometryBoundsChanged = function handleGeometryBoundsChanged(e) {\n        var target = e.target;\n        var nodes = target.nodeName === Shape.FRAGMENT ? target.childNodes : [target];\n        nodes.forEach(function (object) {\n          var _object$elementSVG;\n          // @ts-ignore\n          var $el = (_object$elementSVG = object.elementSVG) === null || _object$elementSVG === void 0 ? void 0 : _object$elementSVG.$el;\n          var _object$parsedStyle = object.parsedStyle,\n            fill = _object$parsedStyle.fill,\n            stroke = _object$parsedStyle.stroke,\n            clipPath = _object$parsedStyle.clipPath;\n          if (fill && !isCSSRGB(fill)) {\n            _this.defElementManager.createOrUpdateGradientAndPattern(object, $el, fill, 'fill', _this);\n          }\n          if (stroke && !isCSSRGB(stroke)) {\n            _this.defElementManager.createOrUpdateGradientAndPattern(object, $el, stroke, 'stroke', _this);\n          }\n          if (clipPath) {\n            var parentInvert = mat4.invert(mat4.create(), object.getWorldTransform());\n            var clipPathId = \"\".concat(CLIP_PATH_PREFIX + clipPath.entity, \"-\").concat(object.entity);\n            var $def = _this.defElementManager.getDefElement();\n            var $existed = $def.querySelector(\"#\".concat(clipPathId));\n            if ($existed) {\n              _this.applyTransform($existed, parentInvert);\n            }\n          }\n        });\n      };\n      renderingService.hooks.init.tap(SVGRendererPlugin.tag, function () {\n        var _this$context$config = _this.context.config,\n          background = _this$context$config.background,\n          document = _this$context$config.document;\n\n        // <defs>\n        _this.defElementManager.init();\n        var $svg = _this.context.contextService.getContext();\n        if (background) {\n          $svg.style.background = background;\n        }\n\n        // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/color-interpolation-filters\n        $svg.setAttribute('color-interpolation-filters', 'sRGB');\n        _this.$camera = createSVGElement('g', document);\n        _this.$camera.id = \"\".concat(G_SVG_PREFIX, \"-camera\");\n        _this.applyTransform(_this.$camera, _this.context.camera.getOrthoMatrix());\n        $svg.appendChild(_this.$camera);\n        canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.addEventListener(ElementEvent.REPARENT, handleReparent);\n        canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleGeometryBoundsChanged);\n      });\n      renderingService.hooks.destroy.tap(SVGRendererPlugin.tag, function () {\n        canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n        canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n        canvas.removeEventListener(ElementEvent.REPARENT, handleReparent);\n        canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n        canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleGeometryBoundsChanged);\n        resetPatternCounter();\n      });\n      renderingService.hooks.render.tap(SVGRendererPlugin.tag, function (object) {\n        _this.renderQueue.push(object);\n      });\n      renderingService.hooks.beginFrame.tap(SVGRendererPlugin.tag, function () {\n        var doc = _this.context.config.document;\n        if (_this.pendingReorderQueue.size) {\n          _this.pendingReorderQueue.forEach(function (object) {\n            var _object$elementSVG2;\n            var children = ((object === null || object === void 0 ? void 0 : object.children) || []).slice();\n            var $parentGroupEl = // @ts-ignore\n            object === null || object === void 0 || (_object$elementSVG2 = object.elementSVG) === null || _object$elementSVG2 === void 0 ? void 0 : _object$elementSVG2.$groupEl;\n            if ($parentGroupEl) {\n              _this.reorderChildren(doc || document, $parentGroupEl, children || []);\n            }\n          });\n          _this.pendingReorderQueue.clear();\n        }\n      });\n      renderingService.hooks.endFrame.tap(SVGRendererPlugin.tag, function () {\n        if (renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)) {\n          _this.applyTransform(_this.$camera, _this.context.camera.getOrthoMatrix());\n        }\n        _this.renderQueue.forEach(function (object) {\n          var _elementSVG, _elementSVG2;\n          var $el = (_elementSVG = object.elementSVG) === null || _elementSVG === void 0 ? void 0 : _elementSVG.$el;\n          var $groupEl = (_elementSVG2 = object.elementSVG) === null || _elementSVG2 === void 0 ? void 0 : _elementSVG2.$groupEl;\n          if ($el && $groupEl) {\n            // apply local RTS transformation to <group> wrapper\n            // account for anchor\n            var localTransform = object.getLocalTransform();\n            _this.applyTransform($groupEl, localTransform);\n\n            // clipped shapes should also be informed\n\n            var $useRefs = _this.clipPathUseMap.get(object);\n            if ($useRefs && $useRefs.length) {\n              $useRefs.forEach(function ($use) {\n                // <clipPath transform=\"matrix()\"><circle /></clipPath>\n                _this.applyTransform($use, object.getWorldTransform());\n                // const parentInvert = mat4.invert(\n                //   mat4.create(),\n                //   (object as DisplayObject).getWorldTransform(),\n                // );\n                // this.applyTransform($clipPath, parentInvert);\n              });\n            }\n\n            // finish rendering, clear dirty flag\n            object.renderable.dirty = false;\n          }\n\n          // update dirty attributes\n          var attributes = _this.dirtyAttributes.get(object);\n          if (attributes) {\n            attributes.forEach(function (attrName) {\n              if (attrName === 'zIndex') {\n                reorderChildren(object);\n              } else if (attrName === 'increasedLineWidthForHitTesting') {\n                _this.createOrUpdateHitArea(object, $el, $groupEl);\n              }\n              _this.updateAttribute(object, [attrName]);\n            });\n            _this.dirtyAttributes[\"delete\"](object);\n          }\n        });\n        _this.renderQueue = [];\n      });\n    }\n  }, {\n    key: \"getId\",\n    value: function getId(object) {\n      return object.id || \"\".concat(G_SVG_PREFIX, \"-\").concat(object.entity);\n    }\n  }, {\n    key: \"reorderChildren\",\n    value: function reorderChildren(doc, $groupEl, children) {\n      // need to reorder parent's children\n      children.sort(function (a, b) {\n        return a.sortable.renderOrder - b.sortable.renderOrder;\n      });\n      if (children.length) {\n        // create empty fragment\n        var fragment = (doc || document).createDocumentFragment();\n        children.forEach(function (child) {\n          if (child.isConnected) {\n            var $el = child.elementSVG.$groupEl;\n            if ($el) {\n              fragment.appendChild($el);\n            }\n          }\n        });\n        $groupEl.appendChild(fragment);\n      }\n    }\n  }, {\n    key: \"applyTransform\",\n    value: function applyTransform($el, rts) {\n      var matrix = \"matrix(\".concat(numberToLongString(rts[0]), \",\").concat(numberToLongString(rts[1]), \",\").concat(numberToLongString(rts[4]), \",\").concat(numberToLongString(rts[5]), \",\").concat(numberToLongString(rts[12]), \",\").concat(numberToLongString(rts[13]), \")\");\n      if (matrix !== $el.getAttribute('transform')) {\n        // use proper precision avoiding too long string in `transform`\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n        $el.setAttribute('transform', matrix);\n      }\n      if (matrix === DEFAULT_VALUE_MAP.transform) {\n        $el.removeAttribute('transform');\n      }\n    }\n  }, {\n    key: \"applyAttributes\",\n    value: function applyAttributes(object) {\n      var elementSVG = object.elementSVG;\n      var $el = elementSVG === null || elementSVG === void 0 ? void 0 : elementSVG.$el;\n      var $groupEl = elementSVG === null || elementSVG === void 0 ? void 0 : elementSVG.$groupEl;\n      if ($el && $groupEl) {\n        var nodeName = object.nodeName,\n          attributes = object.attributes;\n        if (nodeName !== Shape.HTML) {\n          $el.setAttribute('fill', 'none');\n        }\n        if (nodeName === Shape.IMAGE) {\n          $el.setAttribute('preserveAspectRatio', 'none');\n        }\n\n        // apply attributes\n        this.updateAttribute(object, Object.keys(attributes));\n      }\n    }\n  }, {\n    key: \"updateAttribute\",\n    value: function updateAttribute(object, attributes) {\n      var _this2 = this;\n      var document = this.context.config.document;\n      var _ref = object.elementSVG,\n        $el = _ref.$el,\n        $hitTestingEl = _ref.$hitTestingEl;\n      var parsedStyle = object.parsedStyle,\n        nodeName = object.nodeName;\n      var shouldUpdateElementAttribute = attributes.some(function (name) {\n        return (\n          // @ts-ignore\n          _this2.context.SVGElementLifeCycleContribution.shouldUpdateElementAttribute(object, name)\n        );\n      });\n\n      // need re-generate path\n      if (shouldUpdateElementAttribute && $el) {\n        [$el, $hitTestingEl].forEach(function ($el) {\n          if ($el) {\n            // @ts-ignore\n            _this2.context.SVGElementLifeCycleContribution.updateElementAttribute(object, $el, _this2.svgElementMap);\n          }\n        });\n      }\n\n      // update common attributes\n      attributes.forEach(function (name) {\n        var _FORMAT_VALUE_MAP$nam, _propertyMetadataCach;\n        var usedName = SVG_ATTR_MAP[name];\n        var computedValue = parsedStyle[name];\n        var computedValueStr = !isNil(computedValue) && computedValue.toString();\n        var formattedValueStr = ((_FORMAT_VALUE_MAP$nam = FORMAT_VALUE_MAP[name]) === null || _FORMAT_VALUE_MAP$nam === void 0 ? void 0 : _FORMAT_VALUE_MAP$nam[computedValueStr]) || computedValueStr;\n        var usedValue = parsedStyle[name];\n        var inherited = usedName && !!((_propertyMetadataCach = propertyMetadataCache[name]) !== null && _propertyMetadataCach !== void 0 && _propertyMetadataCach.inh);\n\n        // <foreignObject>\n        if (nodeName === Shape.HTML) {\n          if (name === 'fill') {\n            $el.style.background = usedValue.toString();\n          } else if (name === 'stroke') {\n            $el.style['border-color'] = usedValue.toString();\n            $el.style['border-style'] = 'solid';\n          } else if (name === 'lineWidth') {\n            $el.style['border-width'] = \"\".concat(usedValue || 0, \"px\");\n          } else if (name === 'lineDash') {\n            $el.style['border-style'] = 'dashed';\n          } else if (name === 'innerHTML') {\n            _this2.createOrUpdateInnerHTML(document, $el, usedValue);\n          } else if (name === 'width' || name === 'height' || name === 'class') {\n            // width & height are both required for <foreignObject> and cannot be used as style.\n            $el.setAttribute(name, usedValue.toString());\n          } else if (!isNil(object.style[name]) && object.style[name] !== '') {\n            $el.style[name] = object.style[name];\n          }\n        } else {\n          if (!usedName || (nodeName === Shape.GROUP || object.isCustomElement) && (inherited || usedName === 'fill' || usedName === 'stroke')) {\n            return;\n          }\n          if (name === 'fill') {\n            _this2.defElementManager.createOrUpdateGradientAndPattern(object, $el, usedValue, usedName, _this2);\n          } else if (name === 'stroke') {\n            _this2.defElementManager.createOrUpdateGradientAndPattern(object, $el, usedValue, usedName, _this2);\n          } else if (name === 'clipPath') {\n            _this2.createOrUpdateClipOrTextPath(document, usedValue, object);\n          } else if (name === 'textPath') {\n            _this2.createOrUpdateClipOrTextPath(document, usedValue, object, true);\n          } else if (name === 'shadowType' || name === 'shadowColor' || name === 'shadowBlur' || name === 'shadowOffsetX' || name === 'shadowOffsetY') {\n            _this2.defElementManager.createOrUpdateShadow(object, $el, name);\n          } else if (name === 'filter') {\n            _this2.defElementManager.createOrUpdateFilter(object, $el, usedValue);\n          } else if (!isNil(computedValue)) {\n            // use computed value so that we can use cascaded effect in SVG\n            // ignore 'unset' and default value\n            [$el, $hitTestingEl].forEach(function ($el) {\n              if ($el && usedName) {\n                if (computedValueStr !== 'unset' && computedValueStr !== DEFAULT_VALUE_MAP[name]) {\n                  $el.setAttribute(usedName, formattedValueStr);\n                } else {\n                  $el.removeAttribute(usedName);\n                }\n              }\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"createSVGDom\",\n    value: function createSVGDom(document, object, root) {\n      var noWrapWithGroup = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      // create svg element\n      // @ts-ignore\n      object.elementSVG = new ElementSVG();\n      // @ts-ignore\n      var svgElement = object.elementSVG;\n\n      // use <group> as default, eg. CustomElement\n      var $el =\n      // @ts-ignore\n      this.context.SVGElementLifeCycleContribution.createElement(object, this.svgElementMap);\n      if ($el) {\n        var _object$parentNode$el;\n        var $groupEl;\n\n        // save $el on parsedStyle, which will be returned in getDomElement()\n        if (object.nodeName === Shape.HTML) {\n          object.parsedStyle.$el = $el;\n        }\n        if (this.pluginOptions.outputSVGElementId) {\n          // use user-defined id first.\n          $el.id = this.getId(object);\n        }\n        if (this.pluginOptions.outputSVGElementName && object.name) {\n          $el.setAttribute('name', object.name);\n        }\n        if (($el.hasAttribute('data-wrapgroup') || $el.nodeName !== 'g') && !noWrapWithGroup) {\n          $groupEl = createSVGElement('g', document);\n          // if (this.pluginOptions.outputSVGElementId) {\n          //   $groupEl.id = $el.id + '-g';\n          // }\n          $groupEl.appendChild($el);\n        } else {\n          $groupEl = $el;\n        }\n        svgElement.$el = $el;\n        svgElement.$groupEl = $groupEl;\n\n        // apply attributes at first time\n        this.applyAttributes(object);\n\n        // create hitArea if necessary\n        this.createOrUpdateHitArea(object, $el, $groupEl);\n        var $parentGroupEl = root ||\n        // @ts-ignore\n        object.parentNode && ((_object$parentNode$el = object.parentNode.elementSVG) === null || _object$parentNode$el === void 0 ? void 0 : _object$parentNode$el.$groupEl);\n        if ($parentGroupEl) {\n          $parentGroupEl.appendChild($groupEl);\n\n          // need reorder children later\n          this.pendingReorderQueue.add(object.parentNode);\n        }\n      }\n    }\n  }, {\n    key: \"removeSVGDom\",\n    value: function removeSVGDom(object) {\n      var _object$elementSVG3;\n      // @ts-ignore\n      var $groupEl = (_object$elementSVG3 = object.elementSVG) === null || _object$elementSVG3 === void 0 ? void 0 : _object$elementSVG3.$groupEl;\n      if ($groupEl && $groupEl.parentNode) {\n        $groupEl.parentNode.removeChild($groupEl);\n\n        // @ts-ignore\n        this.context.SVGElementLifeCycleContribution.destroyElement(object, $groupEl);\n        // object.entity.removeComponent(ElementSVG, true);\n      }\n    }\n  }, {\n    key: \"createOrUpdateHitArea\",\n    value: function createOrUpdateHitArea(object, $el, $groupEl) {\n      var svgElement = object.elementSVG;\n      var $hitTestingEl = svgElement.$hitTestingEl;\n      var increasedLineWidthForHitTesting = Number(object.parsedStyle.increasedLineWidthForHitTesting);\n\n      // account for hitArea\n      if (increasedLineWidthForHitTesting) {\n        if (!$hitTestingEl) {\n          $hitTestingEl = $el.cloneNode();\n          // clear attributes like `filter` `font-size`\n          ['filter'].forEach(function (attribute) {\n            $hitTestingEl.removeAttribute(attribute);\n          });\n          // hitArea should be 'transparent' but not 'none'\n          var hasFill = $el.getAttribute('fill') !== 'none';\n          $hitTestingEl.setAttribute('fill', hasFill ? 'transparent' : 'none');\n          $hitTestingEl.setAttribute('stroke', 'transparent');\n          $groupEl.appendChild($hitTestingEl);\n          svgElement.$hitTestingEl = $hitTestingEl;\n\n          // g-plugin-svg-picker will use this map to find target object\n          this.svgElementMap.set($hitTestingEl, object);\n        }\n\n        // increase interactive line width\n        $hitTestingEl.setAttribute('stroke-width', \"\".concat(increasedLineWidthForHitTesting + object.parsedStyle.lineWidth));\n      } else if ($hitTestingEl) {\n        $groupEl.removeChild($hitTestingEl);\n        svgElement.$hitTestingEl = null;\n      }\n    }\n  }, {\n    key: \"createOrUpdateInnerHTML\",\n    value: function createOrUpdateInnerHTML(doc, $el, usedValue) {\n      var $div = (doc || document).createElement('div');\n      if (typeof usedValue === 'string') {\n        $div.innerHTML = usedValue;\n      } else {\n        $div.appendChild(usedValue);\n      }\n      $el.innerHTML = '';\n      $el.appendChild($div);\n    }\n  }, {\n    key: \"createOrUpdateClipOrTextPath\",\n    value: function createOrUpdateClipOrTextPath(document, clipPath, object) {\n      var isTextPath = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var _ref2 = object.elementSVG,\n        $groupEl = _ref2.$groupEl;\n      var PREFIX = isTextPath ? TEXT_PATH_PREFIX : CLIP_PATH_PREFIX;\n      var attributeNameCamel = isTextPath ? 'g' : 'clipPath';\n      var attributeNameHyphen = isTextPath ? 'text-path' : 'clip-path';\n      if (clipPath) {\n        var clipPathId = \"\".concat(PREFIX + clipPath.entity, \"-\").concat(object.entity);\n        var $def = this.defElementManager.getDefElement();\n        var existed = $def.querySelector(\"#\".concat(clipPathId));\n        if (!existed) {\n          var $clipPath;\n          if (isTextPath) {\n            // use <path> directly instead of wrapping with <g>\n            this.createSVGDom(document, clipPath, null, true);\n            // @ts-ignore\n            $clipPath = clipPath.elementSVG.$el;\n          } else {\n            // the clipPath is allowed to be detached from canvas\n            if (!clipPath.isConnected) {\n              var $existedClipPath = $def.querySelector(\"#\".concat(this.getId(clipPath)));\n              if (!$existedClipPath) {\n                this.createSVGDom(document, clipPath, $def, true);\n              }\n            }\n\n            // create <clipPath> dom node\n            $clipPath = createSVGElement(attributeNameCamel, document);\n            var $use = createSVGElement('use', document);\n            // @ts-ignore\n            $use.setAttribute('href', \"#\".concat(clipPath.elementSVG.$el.id));\n            $clipPath.appendChild($use);\n            var $useRefs = this.clipPathUseMap.get(clipPath);\n            if (!$useRefs) {\n              this.clipPathUseMap.set(clipPath, []);\n              $useRefs = this.clipPathUseMap.get(clipPath);\n            }\n            $useRefs.push($use);\n\n            // <clipPath transform=\"matrix()\"><circle /></clipPath>\n            this.applyTransform($use, clipPath.getWorldTransform());\n            var parentInvert = mat4.invert(mat4.create(), object.getWorldTransform());\n            this.applyTransform($clipPath, parentInvert);\n          }\n          if (this.pluginOptions.outputSVGElementId) {\n            $clipPath.id = clipPathId;\n          }\n          // append it to <defs>\n          $def.appendChild($clipPath);\n        }\n\n        // apply attributes\n        this.applyAttributes(clipPath);\n        if (!isTextPath) {\n          // apply clipPath to $group\n          // @see https://github.com/antvis/g/issues/961\n          $groupEl.setAttribute(attributeNameHyphen, \"url(#\".concat(clipPathId, \")\"));\n        }\n      } else if (!isTextPath) {\n        // remove clip path\n        $groupEl.removeAttribute(attributeNameHyphen);\n      }\n    }\n  }]);\n}();\nSVGRendererPlugin.tag = 'SVGRenderer';\n\n// @see https://github.com/plouc/nivo/issues/164\nvar BASELINE_MAP = {\n  top: 'hanging',\n  // Use hanging here.\n  middle: 'central',\n  bottom: 'text-after-edge',\n  // FIXME: It is not a standard property.\n  alphabetic: 'alphabetic',\n  ideographic: 'ideographic',\n  hanging: 'hanging'\n};\nfunction updateTextElementAttribute($el, parsedStyle, text, runtime) {\n  // Trigger text geometry calculation.\n  text.getBounds();\n  var _parsedStyle$lineWidt = parsedStyle.lineWidth,\n    lineWidth = _parsedStyle$lineWidt === void 0 ? 1 : _parsedStyle$lineWidt,\n    _parsedStyle$x = parsedStyle.x,\n    x = _parsedStyle$x === void 0 ? 0 : _parsedStyle$x,\n    _parsedStyle$y = parsedStyle.y,\n    y = _parsedStyle$y === void 0 ? 0 : _parsedStyle$y,\n    _parsedStyle$dx = parsedStyle.dx,\n    dx = _parsedStyle$dx === void 0 ? 0 : _parsedStyle$dx,\n    _parsedStyle$dy = parsedStyle.dy,\n    dy = _parsedStyle$dy === void 0 ? 0 : _parsedStyle$dy,\n    textPath = parsedStyle.textPath,\n    _parsedStyle$textPath = parsedStyle.textPathSide,\n    textPathSide = _parsedStyle$textPath === void 0 ? 'left' : _parsedStyle$textPath,\n    _parsedStyle$textPath2 = parsedStyle.textPathStartOffset,\n    textPathStartOffset = _parsedStyle$textPath2 === void 0 ? 0 : _parsedStyle$textPath2,\n    _parsedStyle$textDeco = parsedStyle.textDecorationLine,\n    textDecorationLine = _parsedStyle$textDeco === void 0 ? '' : _parsedStyle$textDeco,\n    _parsedStyle$textDeco2 = parsedStyle.textDecorationColor,\n    textDecorationColor = _parsedStyle$textDeco2 === void 0 ? '' : _parsedStyle$textDeco2,\n    _parsedStyle$textDeco3 = parsedStyle.textDecorationStyle,\n    textDecorationStyle = _parsedStyle$textDeco3 === void 0 ? '' : _parsedStyle$textDeco3,\n    metrics = parsedStyle.metrics;\n  var _parsedStyle$textBase = parsedStyle.textBaseline,\n    textBaseline = _parsedStyle$textBase === void 0 ? 'alphabetic' : _parsedStyle$textBase;\n  if (textBaseline === 'alphabetic') {\n    textBaseline = 'bottom';\n  }\n  $el.setAttribute('dominant-baseline', BASELINE_MAP[textBaseline]);\n  $el.setAttribute('paint-order', 'stroke');\n  var lines = metrics.lines,\n    lineHeight = metrics.lineHeight,\n    height = metrics.height;\n  var lineNum = lines.length;\n  var styleCSSText = '';\n  if (dx !== 0 || dy !== 0) {\n    styleCSSText += \"transform:translate(\".concat(dx, \"px, \").concat(dy, \"px);\");\n  }\n  if (textDecorationLine && textDecorationLine !== 'none') {\n    // use CSS text-decoration since the implementation in SVG is not good enough\n    styleCSSText += \"text-decoration:\".concat(textDecorationLine, \" \").concat(textDecorationStyle, \" \").concat(textDecorationColor, \";\");\n  }\n  if (styleCSSText) {\n    $el.setAttribute('style', styleCSSText);\n  }\n  if (x !== 0) {\n    $el.setAttribute('x', \"\".concat(x));\n  }\n  if (y !== 0) {\n    $el.setAttribute('y', \"\".concat(y));\n  }\n  if (lineNum === 1) {\n    var textContent = convertHTML(lines[0]);\n    $el.setAttribute('dx', \"\".concat(lineWidth / 2));\n\n    // Since `text-after-edge` is not a standard property value, we use `dy` instead.\n    if (textBaseline === 'bottom' || textBaseline === 'top') {\n      $el.setAttribute('dominant-baseline', BASELINE_MAP.middle);\n      $el.setAttribute('dy', textBaseline === 'bottom' ? \"-\".concat(height / 2, \"px\") : \"\".concat(height / 2, \"px\"));\n    }\n\n    // <textPath> only support one line\n    // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/textPath\n    if (textPath) {\n      // clear existed text content first\n      $el.innerHTML = '';\n\n      // append <textPath href=\"#MyPath\">text</textPath>\n      var $textPath = createSVGElement('textPath', $el.ownerDocument);\n      $textPath.setAttribute('href', \"#\".concat(TEXT_PATH_PREFIX + textPath.entity));\n      if (textPathSide !== 'left') {\n        $textPath.setAttribute('side', textPathSide);\n      }\n      if (textPathStartOffset !== 0) {\n        $textPath.setAttribute('startOffset', \"\".concat(textPathStartOffset));\n      }\n      $textPath.innerHTML = textContent;\n      $el.appendChild($textPath);\n    } else {\n      $el.innerHTML = textContent;\n    }\n  } else {\n    $el.innerHTML = lines.map(function (line, i) {\n      var dx = lineWidth / 2;\n      var dy = 0;\n      if (i === 0) {\n        // TODO: handle other textBaseline values\n        if (textBaseline === 'middle') {\n          dy = lineHeight / 2 - height / 2;\n        } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n          dy = 0;\n        } else if (textBaseline === 'bottom' || textBaseline === 'ideographic') {\n          dy = -lineHeight * (lineNum - 1);\n        }\n      } else {\n        dy = lineHeight;\n      }\n      return \"<tspan x=\".concat(x, \" dx=\\\"\").concat(dx, \"\\\" dy=\\\"\").concat(dy, \"\\\">\").concat(convertHTML(line), \"</tspan>\");\n    }).join('');\n  }\n}\n\nvar _SHAPE2TAGS;\nvar SHAPE2TAGS = (_SHAPE2TAGS = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_SHAPE2TAGS, Shape.RECT, 'path'), Shape.CIRCLE, 'circle'), Shape.ELLIPSE, 'ellipse'), Shape.IMAGE, 'image'), Shape.GROUP, 'g'), Shape.LINE, 'line'), Shape.POLYLINE, 'polyline'), Shape.POLYGON, 'polygon'), Shape.TEXT, 'text'), Shape.PATH, 'path'), _defineProperty(_SHAPE2TAGS, Shape.HTML, 'foreignObject'));\nvar SHAPE_UPDATE_DEPS = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Shape.CIRCLE, ['cx', 'cy', 'r']), Shape.ELLIPSE, ['cx', 'cy', 'rx', 'ry']), Shape.RECT, ['x', 'y', 'width', 'height', 'radius']), Shape.IMAGE, ['x', 'y', 'src', 'width', 'height']), Shape.LINE, ['x1', 'y1', 'x2', 'y2', 'markerStart', 'markerEnd', 'markerStartOffset', 'markerEndOffset']), Shape.POLYLINE, ['points', 'markerStart', 'markerEnd', 'markerMid', 'markerStartOffset', 'markerEndOffset']), Shape.POLYGON, ['points', 'markerStart', 'markerEnd', 'markerMid', 'markerStartOffset', 'markerEndOffset']), Shape.PATH, ['d', 'markerStart', 'markerEnd', 'markerMid', 'markerStartOffset', 'markerEndOffset']), Shape.TEXT, ['text', 'font', 'fontSize', 'fontFamily', 'fontStyle', 'fontWeight', 'fontVariant', 'lineHeight', 'letterSpacing', 'wordWrap', 'wordWrapWidth', 'maxLines', 'leading', 'textBaseline', 'textAlign', 'textTransform', 'textOverflow', 'textPath', 'textPathSide', 'textPathStartOffset', 'textDecorationLine', 'textDecorationColor', 'textDecorationStyle',\n// 'whiteSpace',\n'dx', 'dy']);\nvar DefaultElementLifeCycleContribution = /*#__PURE__*/function () {\n  function DefaultElementLifeCycleContribution(context, runtime) {\n    _classCallCheck(this, DefaultElementLifeCycleContribution);\n    this.context = context;\n    this.runtime = runtime;\n  }\n  return _createClass(DefaultElementLifeCycleContribution, [{\n    key: \"createElement\",\n    value: function createElement(object, svgElementMap) {\n      var doc = this.context.config.document;\n      var type = SHAPE2TAGS[object.nodeName] || 'g';\n      var $el = createSVGElement(type, doc || document);\n      svgElementMap.set($el, object);\n      return $el;\n    }\n  }, {\n    key: \"destroyElement\",\n    value: function destroyElement(object, $el) {}\n  }, {\n    key: \"shouldUpdateElementAttribute\",\n    value: function shouldUpdateElementAttribute(object, attributeName) {\n      var nodeName = object.nodeName;\n      return (SHAPE_UPDATE_DEPS[nodeName] || []).indexOf(attributeName) > -1;\n    }\n  }, {\n    key: \"updateElementAttribute\",\n    value: function updateElementAttribute(object) {\n      // @ts-ignore\n      var _ref = object.elementSVG,\n        $el = _ref.$el;\n      var nodeName = object.nodeName,\n        parsedStyle = object.parsedStyle;\n      switch (nodeName) {\n        case Shape.IMAGE:\n          {\n            updateImageElementAttribute($el, parsedStyle);\n            break;\n          }\n        case Shape.RECT:\n          {\n            updateRectElementAttribute($el, parsedStyle);\n            break;\n          }\n        case Shape.LINE:\n          {\n            updateLineElementAttribute($el, parsedStyle);\n            break;\n          }\n        case Shape.POLYGON:\n        case Shape.POLYLINE:\n          {\n            updatePolylineElementAttribute($el, parsedStyle);\n            break;\n          }\n        case Shape.PATH:\n          {\n            updatePathElementAttribute($el, parsedStyle);\n            break;\n          }\n        case Shape.TEXT:\n          {\n            updateTextElementAttribute($el, parsedStyle, object, this.runtime);\n            break;\n          }\n      }\n    }\n  }]);\n}();\n\nvar Plugin = /*#__PURE__*/function (_AbstractRendererPlug) {\n  function Plugin() {\n    var _this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Plugin);\n    _this = _callSuper(this, Plugin);\n    _this.name = 'svg-renderer';\n    _this.options = options;\n    return _this;\n  }\n  _inherits(Plugin, _AbstractRendererPlug);\n  return _createClass(Plugin, [{\n    key: \"init\",\n    value: function init(runtime) {\n      var _this$options = this.options,\n        outputSVGElementId = _this$options.outputSVGElementId,\n        outputSVGElementName = _this$options.outputSVGElementName;\n      var defElementManager = new DefElementManager(this.context);\n\n      // default implementation\n      var defaultElementLifeCycleContribution = new DefaultElementLifeCycleContribution(this.context, runtime);\n      // @ts-ignore\n      this.context.defaultElementLifeCycleContribution = defaultElementLifeCycleContribution;\n\n      // @ts-ignore\n      this.context.SVGElementLifeCycleContribution = defaultElementLifeCycleContribution;\n      var SVGRendererPluginOptions = {\n        outputSVGElementId: !isNil(outputSVGElementId) ? !!outputSVGElementId : true,\n        outputSVGElementName: !isNil(outputSVGElementName) ? !!outputSVGElementName : true\n      };\n      this.addRenderingPlugin(\n      // @ts-ignore\n      new SVGRendererPlugin(SVGRendererPluginOptions, defElementManager, this.context));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.removeAllRenderingPlugins();\n\n      // @ts-ignore\n      delete this.context.defaultElementLifeCycleContribution;\n      // @ts-ignore\n      delete this.context.SVGElementLifeCycleContribution;\n    }\n  }]);\n}(AbstractRendererPlugin);\n\nexport { CLIP_PATH_PREFIX, DEFAULT_VALUE_MAP, DefaultElementLifeCycleContribution, ElementSVG, G_SVG_PREFIX, Plugin, SHAPE2TAGS, SHAPE_UPDATE_DEPS, SVGRendererPlugin, SVG_ATTR_MAP, TEXT_PATH_PREFIX, createSVGElement, updateImageElementAttribute, updateLineElementAttribute, updatePathElementAttribute, updatePolylineElementAttribute, updateRectElementAttribute, updateTextElementAttribute };\n//# sourceMappingURL=index.esm.js.map\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var s = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.includes(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import type {\n  CanvasContext,\n  DataURLOptions,\n  GlobalRuntime,\n  CanvasConfig,\n  ContextService,\n  DisplayObject,\n} from '@antv/g-lite';\nimport { propertyMetadataCache } from '@antv/g-lite';\nimport { createSVGElement } from '@antv/g-plugin-svg-renderer';\nimport { isString } from '@antv/util';\n\nexport class SVGContextService implements ContextService<SVGElement> {\n  private $container: HTMLElement | null;\n  private $namespace: SVGElement | null;\n  private dpr: number;\n\n  private canvasConfig: Partial<CanvasConfig>;\n\n  constructor(public context: GlobalRuntime & CanvasContext) {\n    this.canvasConfig = context.config;\n  }\n\n  init() {\n    const {\n      container,\n      document: doc,\n      devicePixelRatio: dpr,\n    } = this.canvasConfig;\n\n    // create container\n    this.$container = isString(container)\n      ? (doc || document).getElementById(container)\n      : container;\n    if (this.$container) {\n      if (!this.$container.style.position) {\n        this.$container.style.position = 'relative';\n      }\n      const $namespace = createSVGElement('svg', doc);\n      $namespace.setAttribute('width', `${this.canvasConfig.width}`);\n      $namespace.setAttribute('height', `${this.canvasConfig.height}`);\n\n      this.$container.appendChild($namespace);\n\n      this.$namespace = $namespace;\n    }\n\n    this.dpr = dpr;\n  }\n\n  // @ts-ignore\n  getDomElement() {\n    return this.$namespace;\n  }\n\n  getContext() {\n    return this.$namespace;\n  }\n\n  getDPR() {\n    return this.dpr;\n  }\n\n  getBoundingClientRect() {\n    return this.$namespace?.getBoundingClientRect();\n  }\n\n  destroy() {\n    // destroy context\n    if (this.$container && this.$namespace && this.$namespace.parentNode) {\n      this.$container.removeChild(this.$namespace);\n    }\n  }\n\n  resize(width: number, height: number) {\n    // SVG should ignore DPR\n    if (this.$namespace) {\n      this.$namespace.setAttribute('width', `${width}`);\n      this.$namespace.setAttribute('height', `${height}`);\n    }\n  }\n\n  applyCursorStyle(cursor: string) {\n    if (this.$container) {\n      this.$container.style.cursor = cursor;\n    }\n  }\n\n  private generateCSSText(\n    animationName: string,\n    selector: string,\n    keyframes: ComputedKeyframe[],\n    timing: ComputedEffectTiming,\n    prefixes: Record<string, string> = {},\n  ) {\n    const { duration, easing, delay, direction, iterations, fill } = timing;\n\n    return (\n      `@keyframes ${animationName}{${keyframes\n        .map((keyframe) => {\n          const { offset, composite, computedOffset, easing, ...rest } =\n            keyframe;\n          const rules = Object.keys(rest)\n            .map((attributeName) => {\n              return `${attributeName}:${prefixes[attributeName] || ''}${\n                rest[attributeName]\n              };`;\n            })\n            .join('');\n          return `${computedOffset * 100}%{${rules}}`;\n        })\n        .join('')}}` +\n      `${selector} {animation: ${animationName} ${duration}ms ${easing} ${delay}ms ${\n        iterations === Infinity ? 'infinite' : iterations\n      } ${direction} ${fill};}`\n    );\n  }\n\n  async toDataURL(options: Partial<DataURLOptions> = {}) {\n    const cloneNode = this.$namespace.cloneNode(true);\n\n    const { document: doc } = this.canvasConfig;\n    let animationCounter = 0;\n    let $style: HTMLStyleElement | null = null;\n\n    this.context.renderingContext.root.forEach((object: DisplayObject) => {\n      const animations = object.getAnimations();\n      if (animations.length) {\n        if (!$style) {\n          // export animations to <style>, using CSS Transformation\n          $style = (doc || document).createElement('style');\n          cloneNode.appendChild($style);\n        }\n\n        // @ts-ignore\n        const svgElement = object.elementSVG;\n        const selfSelector = `#${svgElement.$el.id}`;\n        const groupSelector = `#${svgElement.$groupEl.id}`;\n        let selfCssText = '';\n        let groupCssText = '';\n\n        animations.forEach((animation) => {\n          const keyframes = animation.effect.getKeyframes();\n\n          // split attributes into self and group\n          if (keyframes.length) {\n            const selfAttributes = [];\n            const groupAttributes = [];\n            const {\n              offset,\n              composite,\n              computedOffset,\n              easing,\n              transformOrigin,\n              ...rest\n            } = keyframes[0];\n            Object.keys(rest).forEach((attributeName) => {\n              if (attributeName === 'transform') {\n                groupAttributes.push(attributeName);\n              }\n\n              const inherited = !!propertyMetadataCache[attributeName]?.inh;\n              if (inherited) {\n                groupAttributes.push(attributeName);\n              } else if (attributeName !== 'transform') {\n                selfAttributes.push(attributeName);\n              }\n            });\n\n            if (groupAttributes.length) {\n              const keyframesWithGroup = keyframes.map((keyframe) => {\n                const {\n                  offset,\n                  composite,\n                  computedOffset,\n                  easing,\n                  transformOrigin,\n                  ...rest\n                } = keyframe;\n\n                const ret = { offset, composite, computedOffset, easing };\n                Object.keys(rest).forEach((attributeName) => {\n                  if (groupAttributes.includes(attributeName)) {\n                    ret[attributeName] = keyframe[attributeName];\n                  }\n                });\n                return ret;\n              });\n              groupCssText += this.generateCSSText(\n                `a${animationCounter++}`,\n                groupSelector,\n                keyframesWithGroup,\n                animation.effect.getComputedTiming(),\n                { transform: svgElement.$groupEl.getAttribute('transform') },\n              );\n            }\n\n            if (selfAttributes.length) {\n              const keyframesWithSelf = keyframes.map((keyframe) => {\n                const {\n                  offset,\n                  composite,\n                  computedOffset,\n                  easing,\n                  transformOrigin,\n                  ...rest\n                } = keyframe;\n\n                const ret = { offset, composite, computedOffset, easing };\n                Object.keys(rest).forEach((attributeName) => {\n                  if (selfAttributes.includes(attributeName)) {\n                    ret[attributeName] = keyframe[attributeName];\n                  }\n                });\n                return ret;\n              });\n\n              selfCssText += this.generateCSSText(\n                `a${animationCounter++}`,\n                selfSelector,\n                keyframesWithSelf,\n                animation.effect.getComputedTiming(),\n              );\n            }\n          }\n        });\n\n        $style.textContent += selfCssText + groupCssText;\n      }\n    });\n\n    const svgDocType = document.implementation.createDocumentType(\n      'svg',\n      '-//W3C//DTD SVG 1.1//EN',\n      'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd',\n    );\n    const svgDoc = document.implementation.createDocument(\n      'http://www.w3.org/2000/svg',\n      'svg',\n      svgDocType,\n    );\n    svgDoc.replaceChild(cloneNode, svgDoc.documentElement);\n    return `data:image/svg+xml;charset=utf8,${encodeURIComponent(\n      new XMLSerializer().serializeToString(svgDoc),\n    )}`;\n  }\n}\n","import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { SVGContextService } from './SVGContextService';\n\nexport class ContextRegisterPlugin extends AbstractRendererPlugin {\n  name = 'svg-context-register';\n  init(): void {\n    // @ts-ignore\n    this.context.ContextService = SVGContextService;\n  }\n  destroy(): void {\n    delete this.context.ContextService;\n  }\n}\n","import type { RendererConfig } from '@antv/g-lite';\nimport { AbstractRenderer } from '@antv/g-lite';\nimport * as DomInteraction from '@antv/g-plugin-dom-interaction';\nimport * as SVGPicker from '@antv/g-plugin-svg-picker';\nimport * as SVGRenderer from '@antv/g-plugin-svg-renderer';\nimport { ContextRegisterPlugin } from './ContextRegisterPlugin';\n\nexport { DomInteraction, SVGPicker, SVGRenderer };\n\nexport interface SVGRendererConfig extends RendererConfig {\n  /**\n   * Whether to output id on SVGElement with `setAttribute` like: <circle id=\"g-circle-123\">.\n   */\n  outputSVGElementId: boolean;\n}\n\nexport class Renderer extends AbstractRenderer {\n  constructor(config: Partial<SVGRendererConfig> = {}) {\n    super(config);\n\n    this.registerPlugin(new ContextRegisterPlugin());\n    this.registerPlugin(\n      new SVGRenderer.Plugin({\n        outputSVGElementId: config.outputSVGElementId,\n      }),\n    );\n    this.registerPlugin(new DomInteraction.Plugin());\n    this.registerPlugin(new SVGPicker.Plugin());\n  }\n}\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_classCallCheck","a","n","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_callSuper","possibleConstructorReturn","isNativeReflectConstruct","apply","_setPrototypeOf","_inherits","create","value","DOMInteractionPlugin","context","runtime","_this","this","renderingService","renderingContext","config","canvas","root","ownerDocument","defaultView","onPointerMove","ev","hooks","pointerMove","onPointerUp","pointerUp","onPointerDown","pointerDown","onPointerOver","pointerOver","onPointerOut","pointerOut","onPointerCancel","pointerCancel","onPointerWheel","pointerWheel","onClick","click","init","tap","tag","$el","contextService","getDomElement","globalThis","navigator","msPointerEnabled","style","msContentZooming","msTouchAction","supportsPointerEvents","touchAction","document","addEventListener","addPointerEventListener","addMouseEventListener","supportsTouchEvents","addTouchEventListener","useNativeClickEvent","passive","capture","destroy","removeEventListener","removePointerEventListener","removeMouseEventListener","removeTouchEventListener","_arrayLikeToArray","Array","_unsupportedIterableToArray","arrayLikeToArray","toString","slice","name","from","test","_regeneratorRuntime","hasOwnProperty","c","asyncIterator","u","toStringTag","define","wrap","Generator","Context","makeInvokeMethod","tryCatch","type","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","awrap","async","Promise","keys","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","SVGPickerPlugin","doc","svgElementMap","pick","tapPromise","_ref","_callee","result","_context","_x","pickSync","topmost","_result$position","position","clientX","clientY","_step","targets","_iterator","isArray","unsupportedIterableToArray","_n","F","_createForOfIteratorHelper","elementsFromPoint","element","shadowRoot","target","get","isInteractive","picked","err","_unused","isNil","isString","clamp$1","min","max","ARRAY_TYPE","Float32Array","out","glMatrix.ARRAY_TYPE","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","_defineProperty","_slicedToArray","arrayWithHoles","iterableToArrayLimit","nonIterableRest","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","Math","hypot","sqrt","ElementSVG","_objectWithoutProperties","includes","objectWithoutPropertiesLoose","propertyIsEnumerable","SVGContextService","canvasConfig","_this$canvasConfig","container","dpr","devicePixelRatio","$container","getElementById","$namespace","createSVGElement","setAttribute","concat","width","height","appendChild","_this$$namespace","getBoundingClientRect","parentNode","removeChild","cursor","animationName","selector","keyframes","timing","prefixes","undefined","duration","easing","delay","direction","iterations","fill","map","keyframe","computedOffset","rest","_excluded","rules","attributeName","join","Infinity","_toDataURL","cloneNode","animationCounter","$style","svgDocType","svgDoc","object","animations","getAnimations","createElement","svgElement","elementSVG","selfSelector","id","groupSelector","$groupEl","selfCssText","groupCssText","animation","effect","getKeyframes","selfAttributes","groupAttributes","_keyframes$","_excluded2","_propertyMetadataCach","propertyMetadataCache","inh","keyframesWithGroup","offset","composite","_excluded3","ret","generateCSSText","getComputedTiming","transform","getAttribute","keyframesWithSelf","_excluded4","textContent","implementation","createDocumentType","createDocument","replaceChild","documentElement","encodeURIComponent","XMLSerializer","serializeToString","ContextRegisterPlugin","_AbstractRendererPlug","_len","args","_key","ContextService","AbstractRendererPlugin","Renderer","_AbstractRenderer","registerPlugin","SVGRenderer","outputSVGElementId","DomInteraction","SVGPicker","AbstractRenderer"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,31,32]}